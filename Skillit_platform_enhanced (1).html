<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Skillit — Verified Skill Exchange & Recruiter Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,300;9..144,400;9..144,600;9..144,700;9..144,900&family=Plus+Jakarta+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#07080a;
  --bg2:#0d0f12;
  --surface:#111318;
  --card:#16191f;
  --card2:#1b1f27;
  --border:#222630;
  --border2:#2a3040;
  --accent:#e8ff5a;
  --accent-dim:rgba(232,255,90,0.12);
  --accent-glow:rgba(232,255,90,0.25);
  --red:#ff4d4d;
  --red-dim:rgba(255,77,77,0.12);
  --blue:#4daaff;
  --blue-dim:rgba(77,170,255,0.12);
  --purple:#b57bff;
  --purple-dim:rgba(181,123,255,0.12);
  --orange:#ff8c42;
  --orange-dim:rgba(255,140,66,0.12);
  --teal:#42ffe4;
  --teal-dim:rgba(66,255,228,0.1);
  --text:#e8ecf2;
  --text2:#c4cdd8;
  --muted:#6b7688;
  --muted2:#4a5568;
  --r:14px;
}
*{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;}
body{
  font-family:'Plus Jakarta Sans',sans-serif;
  background:var(--bg);color:var(--text);
  min-height:100vh;overflow-x:hidden;
  cursor:default;
}

/* ── CANVAS ── */
#bg-canvas{position:fixed;inset:0;z-index:0;pointer-events:none;}
.wrap{position:relative;z-index:1;}

/* ── CUSTOM CURSOR ── */
#cursor{
  width:12px;height:12px;border-radius:50%;
  background:var(--accent);position:fixed;
  pointer-events:none;z-index:9999;
  transform:translate(-50%,-50%);
  transition:transform 0.1s,opacity 0.2s;
  mix-blend-mode:difference;
}
#cursor-ring{
  width:36px;height:36px;border-radius:50%;
  border:1px solid rgba(232,255,90,0.4);
  position:fixed;pointer-events:none;z-index:9998;
  transform:translate(-50%,-50%);
  transition:transform 0.18s cubic-bezier(0.23,1,0.32,1),width 0.2s,height 0.2s,opacity 0.2s;
}

/* ── NAV ── */
nav{
  display:flex;align-items:center;justify-content:space-between;
  padding:0.9rem 2.5rem;
  border-bottom:1px solid var(--border);
  position:sticky;top:0;z-index:200;
  background:rgba(7,8,10,0.85);
  backdrop-filter:blur(24px) saturate(180%);
}
.logo{
  font-family:'Fraunces',serif;font-weight:900;
  font-size:1.5rem;cursor:pointer;letter-spacing:-0.5px;
  display:flex;align-items:center;gap:0.1rem;
}
.logo-s{color:var(--accent);}
.nav-center{display:flex;gap:0.2rem;}
.nav-tab{
  font-family:'JetBrains Mono',monospace;font-size:0.72rem;
  padding:0.42rem 1rem;border-radius:8px;
  border:1px solid transparent;cursor:pointer;
  background:transparent;color:var(--muted);
  transition:all 0.18s;position:relative;letter-spacing:0.02em;
}
.nav-tab:hover{color:var(--text2);background:rgba(255,255,255,0.04);}
.nav-tab.active{
  color:var(--accent);border-color:rgba(232,255,90,0.3);
  background:var(--accent-dim);
}
.ndot{
  position:absolute;top:5px;right:5px;width:6px;height:6px;
  border-radius:50%;background:var(--red);display:none;
  box-shadow:0 0 6px var(--red);
  animation:blink 2s infinite;
}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0.3}}
.nav-right{display:flex;gap:0.6rem;align-items:center;}
.nav-stats{
  font-family:'JetBrains Mono',monospace;font-size:0.65rem;
  color:var(--muted);padding:0.3rem 0.7rem;
  border:1px solid var(--border);border-radius:6px;
}
.nav-stats span{color:var(--accent);}

/* ── BUTTONS ── */
.btn{
  font-family:'JetBrains Mono',monospace;font-size:0.72rem;
  padding:0.5rem 1.1rem;border-radius:8px;
  border:1px solid var(--border2);cursor:pointer;
  transition:all 0.18s;background:transparent;
  color:var(--text2);letter-spacing:0.02em;
}
.btn:hover{border-color:var(--muted);color:var(--text);}
.btn-primary{
  background:var(--accent);color:#0a0b0d;
  border-color:var(--accent);font-weight:700;
  box-shadow:0 0 20px var(--accent-glow);
}
.btn-primary:hover{background:#f0ff70;box-shadow:0 0 30px var(--accent-glow);transform:translateY(-1px);}
.btn-ghost{border-color:var(--border2);color:var(--muted);}
.btn-ghost:hover{border-color:var(--muted);color:var(--text);}
.btn-danger{border-color:rgba(255,77,77,0.4);color:var(--red);}
.btn-danger:hover{background:var(--red-dim);}
.btn-blue{border-color:rgba(77,170,255,0.4);color:var(--blue);}
.btn-blue:hover{background:var(--blue-dim);}
.btn-purple{border-color:rgba(181,123,255,0.4);color:var(--purple);}
.btn-purple:hover{background:var(--purple-dim);}
.btn-sm{padding:0.28rem 0.65rem;font-size:0.66rem;}
.btn-xs{padding:0.2rem 0.5rem;font-size:0.62rem;}

/* ── VIEWS ── */
.view{display:none;}
.view.active{display:block;}

/* ── HERO ── */
.hero{
  padding:7rem 2.5rem 4rem;
  max-width:820px;margin:0 auto;
  text-align:center;
}
.hero-eyebrow{
  display:inline-flex;align-items:center;gap:0.5rem;
  background:var(--surface);border:1px solid var(--border2);
  border-radius:999px;padding:0.32rem 1rem;
  font-family:'JetBrains Mono',monospace;font-size:0.68rem;
  color:var(--muted);margin-bottom:2rem;letter-spacing:0.05em;
}
.hero-eyebrow-dot{width:6px;height:6px;border-radius:50%;background:var(--accent);animation:blink 2s infinite;}
.hero h1{
  font-family:'Fraunces',serif;
  font-size:clamp(3rem,7vw,5.5rem);
  font-weight:900;line-height:1.02;
  letter-spacing:-2px;margin-bottom:1.5rem;
  color:var(--text);
}
.hero h1 .highlight{
  color:var(--accent);
  text-shadow:0 0 60px rgba(232,255,90,0.3);
}
.hero-sub{
  font-size:1rem;color:var(--muted);
  line-height:1.75;max-width:560px;margin:0 auto 2.5rem;
}
.hero-cta{display:flex;gap:0.8rem;justify-content:center;flex-wrap:wrap;margin-bottom:3rem;}
.hero-stats{
  display:flex;gap:2.5rem;justify-content:center;
  padding-top:2rem;border-top:1px solid var(--border);
}
.hstat-num{
  font-family:'Fraunces',serif;font-size:2rem;
  font-weight:900;color:var(--text);letter-spacing:-1px;
}
.hstat-num span{color:var(--accent);}
.hstat-label{font-size:0.72rem;color:var(--muted);margin-top:0.1rem;}

/* ── SECTION ── */
.section{max-width:1240px;margin:0 auto;padding:1.5rem 2.5rem 4rem;}
.section-bar{
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom:1.4rem;gap:1rem;
}
.section-title{
  font-family:'Fraunces',serif;font-size:1.2rem;
  font-weight:700;letter-spacing:-0.3px;
}
.count-chip{
  background:var(--surface);border:1px solid var(--border);
  border-radius:999px;font-family:'JetBrains Mono',monospace;
  font-size:0.65rem;padding:0.18rem 0.7rem;color:var(--muted);
}

/* ── TOOLBAR ── */
.toolbar{display:flex;gap:0.6rem;margin-bottom:1.2rem;flex-wrap:wrap;}
.search-wrap{flex:1;min-width:200px;position:relative;}
.search-wrap input{
  width:100%;background:var(--surface);
  border:1px solid var(--border2);border-radius:10px;
  color:var(--text);font-family:'JetBrains Mono',monospace;
  font-size:0.76rem;padding:0.62rem 1rem 0.62rem 2.4rem;
  outline:none;transition:all 0.18s;
}
.search-wrap input:focus{border-color:rgba(232,255,90,0.4);background:var(--card);}
.search-icon{
  position:absolute;left:0.85rem;top:50%;transform:translateY(-50%);
  color:var(--muted);font-size:0.82rem;pointer-events:none;
}
.toolbar select{
  background:var(--surface);border:1px solid var(--border2);
  border-radius:10px;color:var(--text2);
  font-family:'JetBrains Mono',monospace;font-size:0.72rem;
  padding:0.62rem 0.9rem;outline:none;cursor:pointer;
  transition:border-color 0.18s;
}
.toolbar select:focus{border-color:rgba(232,255,90,0.4);}
.toolbar select option{background:var(--card);}

/* ── FILTERS ── */
.filters{display:flex;gap:0.35rem;flex-wrap:wrap;margin-bottom:1.5rem;}
.fchip{
  font-family:'JetBrains Mono',monospace;font-size:0.65rem;
  padding:0.28rem 0.78rem;border-radius:999px;
  border:1px solid var(--border);cursor:pointer;
  background:transparent;color:var(--muted);
  transition:all 0.16s;letter-spacing:0.02em;
}
.fchip:hover{border-color:var(--muted);color:var(--text2);}
.fchip.on{
  border-color:rgba(232,255,90,0.5);
  color:var(--accent);background:var(--accent-dim);
}

/* ── GRID ── */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(310px,1fr));
  gap:1.1rem;
}

/* ── CARD ── */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--r);padding:1.4rem;
  transition:all 0.22s cubic-bezier(0.23,1,0.32,1);
  animation:riseIn 0.4s cubic-bezier(0.23,1,0.32,1) both;
  position:relative;overflow:hidden;
}
.card::before{
  content:'';position:absolute;inset:0;border-radius:var(--r);
  background:radial-gradient(circle at var(--mx,50%) var(--my,50%),rgba(232,255,90,0.04) 0%,transparent 60%);
  opacity:0;transition:opacity 0.3s;pointer-events:none;
}
.card:hover::before{opacity:1;}
.card:hover{
  border-color:var(--border2);
  transform:translateY(-4px);
  box-shadow:0 20px 60px rgba(0,0,0,0.5),0 0 0 1px rgba(232,255,90,0.06);
}
@keyframes riseIn{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}

.card-header{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:1rem;}
.user-pill{display:flex;align-items:center;gap:0.65rem;cursor:pointer;}
.avatar{
  width:38px;height:38px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-family:'Fraunces',serif;font-size:1rem;font-weight:900;
  flex-shrink:0;transition:transform 0.18s;
  border:2px solid transparent;
}
.user-pill:hover .avatar{transform:scale(1.08);}
.user-info{}
.user-name{
  font-size:0.83rem;font-weight:600;color:var(--text);
  transition:color 0.15s;line-height:1.2;
}
.user-pill:hover .user-name{color:var(--accent);}
.user-meta{
  font-family:'JetBrains Mono',monospace;
  font-size:0.62rem;color:var(--muted);margin-top:0.18rem;
}
.card-badges{display:flex;gap:0.3rem;flex-wrap:wrap;}
.cbadge{
  font-family:'JetBrains Mono',monospace;font-size:0.58rem;
  padding:0.14rem 0.42rem;border-radius:4px;
  border:1px solid;letter-spacing:0.03em;
}
.cbadge-cat{border-color:rgba(232,255,90,0.3);color:var(--accent);background:var(--accent-dim);}
.cbadge-lvl{border-color:var(--border2);color:var(--muted2);}
.cbadge-top{border-color:rgba(255,140,66,0.4);color:var(--orange);background:var(--orange-dim);}

.skill-divider{height:1px;background:var(--border);margin:0.9rem 0;}

.offer-label{
  font-family:'JetBrains Mono',monospace;font-size:0.58rem;
  color:var(--muted);text-transform:uppercase;letter-spacing:0.08em;
  margin-bottom:0.3rem;
}
.offer-text{
  font-family:'Fraunces',serif;font-size:1.05rem;
  font-weight:700;color:var(--text);line-height:1.25;
  margin-bottom:0.7rem;
}
.want-row{
  display:flex;align-items:center;gap:0.4rem;
  margin-bottom:0.8rem;
}
.want-label{
  font-family:'JetBrains Mono',monospace;font-size:0.6rem;
  color:var(--muted);text-transform:uppercase;letter-spacing:0.06em;
}
.want-text{
  font-size:0.78rem;font-weight:600;color:var(--red);
}
.card-bio{
  font-size:0.76rem;color:var(--muted);
  line-height:1.65;margin-bottom:1rem;
  display:-webkit-box;-webkit-line-clamp:2;
  -webkit-box-orient:vertical;overflow:hidden;
}
.portfolio-chips{display:flex;gap:0.3rem;flex-wrap:wrap;margin-bottom:1rem;}
.pchip{
  font-family:'JetBrains Mono',monospace;font-size:0.58rem;
  padding:0.16rem 0.5rem;border-radius:4px;
  background:var(--surface);border:1px solid var(--border);
  color:var(--muted2);
}
.card-footer{display:flex;align-items:center;justify-content:space-between;gap:0.5rem;}
.footer-left{display:flex;align-items:center;gap:0.4rem;}
.req-chip{
  font-family:'JetBrains Mono',monospace;font-size:0.6rem;
  padding:0.18rem 0.55rem;border-radius:5px;border:1px solid;
}
.req-chip.sent{border-color:rgba(77,170,255,0.4);color:var(--blue);}
.req-chip.accepted{border-color:rgba(232,255,90,0.4);color:var(--accent);}
.req-chip.declined{border-color:rgba(255,77,77,0.3);color:var(--red);}
.match-strip{
  background:var(--accent-dim);border:1px solid rgba(232,255,90,0.2);
  border-radius:7px;padding:0.4rem 0.7rem;
  font-family:'JetBrains Mono',monospace;
  font-size:0.62rem;color:var(--accent);margin-bottom:0.7rem;
  display:flex;align-items:center;gap:0.4rem;
}

/* ── PROFILE MODAL ── */
.profile-hero{
  position:relative;height:80px;
  background:linear-gradient(135deg,var(--bg2) 0%,var(--card2) 100%);
  border-radius:12px 12px 0 0;margin:-1.7rem -1.7rem 0;
  overflow:hidden;
}
.profile-hero-bg{
  position:absolute;inset:0;opacity:0.15;
  background:radial-gradient(circle at 30% 50%,var(--accent) 0%,transparent 60%);
}
.profile-avatar-wrap{
  position:relative;margin:-28px 0 0 1.7rem;
  display:inline-block;
}
.profile-avatar-lg{
  width:56px;height:56px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-family:'Fraunces',serif;font-size:1.4rem;font-weight:900;
  border:3px solid var(--bg);
}
.profile-badge-wrap{position:absolute;bottom:0;right:-2px;}
.profile-name{
  font-family:'Fraunces',serif;font-size:1.3rem;
  font-weight:900;letter-spacing:-0.3px;margin-top:0.8rem;
}
.profile-tagline{font-size:0.78rem;color:var(--muted);margin-top:0.2rem;}
.profile-email{
  font-family:'JetBrains Mono',monospace;font-size:0.68rem;
  color:var(--blue);margin-top:0.3rem;
}
.profile-stats-row{
  display:flex;gap:0;margin:1.2rem 0;
  border:1px solid var(--border);border-radius:10px;overflow:hidden;
}
.pstat{
  flex:1;text-align:center;padding:0.7rem 0.5rem;
  border-right:1px solid var(--border);
}
.pstat:last-child{border-right:none;}
.pstat-num{
  font-family:'Fraunces',serif;font-size:1.2rem;
  font-weight:900;color:var(--text);
}
.pstat-lbl{font-family:'JetBrains Mono',monospace;font-size:0.58rem;color:var(--muted);margin-top:0.1rem;}
.section-lbl{
  font-family:'JetBrains Mono',monospace;font-size:0.6rem;
  color:var(--muted);text-transform:uppercase;letter-spacing:0.08em;
  margin-bottom:0.5rem;margin-top:1rem;
}
.skill-box{
  background:var(--card);border:1px solid var(--border);
  border-radius:10px;padding:0.85rem 1rem;margin-bottom:0.6rem;
}
.skill-box-title{
  font-family:'Fraunces',serif;font-size:1rem;
  font-weight:700;margin-bottom:0.25rem;
}
.skill-box-desc{font-size:0.76rem;color:var(--muted);line-height:1.6;}
.portfolio-grid{
  display:grid;grid-template-columns:1fr 1fr;
  gap:0.5rem;margin-bottom:0.8rem;
}
.port-item{
  background:var(--card);border:1px solid var(--border);
  border-radius:8px;padding:0.6rem 0.75rem;
}
.port-title{font-size:0.75rem;font-weight:600;color:var(--text2);margin-bottom:0.12rem;}
.port-desc{font-family:'JetBrains Mono',monospace;font-size:0.6rem;color:var(--muted);}
.skills-tags{display:flex;flex-wrap:wrap;gap:0.3rem;margin-top:0.4rem;}
.stag{
  font-family:'JetBrains Mono',monospace;font-size:0.6rem;
  padding:0.18rem 0.52rem;border-radius:4px;
  background:var(--surface);border:1px solid var(--border);
  color:var(--muted2);
}

/* ── OVERLAY / MODAL ── */
.overlay{
  position:fixed;inset:0;z-index:300;
  background:rgba(0,0,0,0.8);backdrop-filter:blur(8px);
  display:none;align-items:center;justify-content:center;padding:1rem;
}
.overlay.open{display:flex;}
.modal{
  background:var(--surface);border:1px solid var(--border2);
  border-radius:18px;padding:1.7rem;
  width:100%;max-width:500px;
  animation:modalIn 0.25s cubic-bezier(0.23,1,0.32,1);
  max-height:92vh;overflow-y:auto;
}
.modal.wide{max-width:640px;}
.modal.narrow{max-width:400px;}
@keyframes modalIn{from{opacity:0;transform:scale(0.95) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}
.modal-title{
  font-family:'Fraunces',serif;font-size:1.2rem;
  font-weight:700;margin-bottom:1.1rem;
}
.modal-footer{display:flex;gap:0.55rem;justify-content:flex-end;margin-top:1.3rem;}
.form-group{margin-bottom:0.85rem;}
.form-label{
  font-family:'JetBrains Mono',monospace;font-size:0.65rem;
  color:var(--muted);display:block;margin-bottom:0.32rem;
  letter-spacing:0.04em;
}
input,textarea,select{
  width:100%;background:var(--card);border:1px solid var(--border2);
  border-radius:9px;color:var(--text);
  font-family:'JetBrains Mono',monospace;
  font-size:0.78rem;padding:0.6rem 0.85rem;outline:none;
  transition:border-color 0.18s;resize:vertical;
}
input:focus,textarea:focus,select:focus{
  border-color:rgba(232,255,90,0.5);
  background:var(--card2);
}
select option{background:var(--card);}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:0.65rem;}

/* ── INBOX ── */
.inbox-wrap{
  display:grid;grid-template-columns:280px 1fr;
  border:1px solid var(--border);border-radius:var(--r);
  overflow:hidden;min-height:560px;
}
.tlist{background:var(--surface);border-right:1px solid var(--border);overflow-y:auto;}
.titem{
  padding:0.9rem 1rem;border-bottom:1px solid var(--border);
  cursor:pointer;transition:background 0.14s;
  display:flex;gap:0.58rem;align-items:flex-start;
}
.titem:hover{background:rgba(255,255,255,0.025);}
.titem.active{
  background:var(--accent-dim);
  border-left:2px solid var(--accent);
}
.tsender{font-size:0.78rem;color:var(--muted);margin-bottom:0.15rem;font-weight:500;}
.titem.unread .tsender{color:var(--text);font-weight:700;}
.tpreview{font-size:0.68rem;color:var(--muted2);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:170px;}
.ttime{font-family:'JetBrains Mono',monospace;font-size:0.58rem;color:var(--muted2);white-space:nowrap;}
.udot{width:7px;height:7px;border-radius:50%;background:var(--accent);flex-shrink:0;margin-top:5px;box-shadow:0 0 6px var(--accent);}

.chat{display:flex;flex-direction:column;background:var(--card);}
.chat-top{
  padding:0.9rem 1.2rem;border-bottom:1px solid var(--border);
  display:flex;align-items:center;gap:0.65rem;flex-shrink:0;
  background:var(--surface);
}
.chat-top-name{font-family:'Fraunces',serif;font-weight:700;font-size:0.95rem;}
.chat-top-skill{font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--muted);}
.chat-msgs{
  flex:1;overflow-y:auto;padding:1.2rem;
  display:flex;flex-direction:column;gap:0.65rem;
}
.msg{display:flex;flex-direction:column;max-width:75%;animation:riseIn 0.2s ease;}
.msg.me{align-self:flex-end;align-items:flex-end;}
.msg.them{align-self:flex-start;}
.msg.sys{align-self:center;max-width:90%;}
.mbubble{padding:0.55rem 0.9rem;border-radius:12px;font-size:0.78rem;line-height:1.55;}
.msg.me .mbubble{background:var(--accent);color:#0a0b0d;border-radius:12px 12px 3px 12px;font-weight:500;}
.msg.them .mbubble{background:var(--card2);border:1px solid var(--border);border-radius:12px 12px 12px 3px;}
.msg.sys .mbubble{
  background:var(--teal-dim);border:1px solid rgba(66,255,228,0.2);
  color:var(--teal);font-family:'JetBrains Mono',monospace;
  font-size:0.68rem;border-radius:8px;text-align:center;
}
.mtime{font-family:'JetBrains Mono',monospace;font-size:0.57rem;color:var(--muted2);margin-top:0.18rem;}
.chat-input{
  padding:0.9rem 1.2rem;border-top:1px solid var(--border);
  display:flex;gap:0.6rem;align-items:flex-end;flex-shrink:0;
  background:var(--surface);
}
.chat-input textarea{flex:1;resize:none;min-height:38px;max-height:100px;}
.no-chat{
  display:flex;flex-direction:column;align-items:center;
  justify-content:center;color:var(--muted);
  font-size:0.82rem;background:var(--card);gap:0.5rem;
}
.no-chat-icon{font-size:2.5rem;opacity:0.4;}

/* ── REQUESTS ── */
.req-list{display:flex;flex-direction:column;gap:0.75rem;}
.rcard{
  background:var(--card);border:1px solid var(--border);
  border-radius:12px;padding:1.1rem 1.3rem;
  display:flex;align-items:center;gap:1rem;
  animation:riseIn 0.25s ease;
}
.rcard.pending{border-left:3px solid var(--blue);}
.rcard.accepted{border-left:3px solid var(--accent);}
.rcard.declined{border-left:3px solid var(--red);opacity:0.5;}
.rcard-info{flex:1;min-width:0;}
.rcard-who{font-size:0.84rem;font-weight:600;margin-bottom:0.18rem;}
.rcard-skill{font-family:'JetBrains Mono',monospace;font-size:0.68rem;color:var(--muted);}
.rcard-msg{font-size:0.72rem;color:var(--muted2);margin-top:0.28rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-style:italic;}
.rstatus{
  font-family:'JetBrains Mono',monospace;font-size:0.63rem;
  padding:0.2rem 0.62rem;border-radius:999px;border:1px solid;white-space:nowrap;
}
.rstatus.pending{border-color:rgba(77,170,255,0.5);color:var(--blue);}
.rstatus.accepted{border-color:rgba(232,255,90,0.5);color:var(--accent);}
.rstatus.declined{border-color:rgba(255,77,77,0.4);color:var(--red);}

/* ── INCOMING BANNER ── */
.incoming-alert{
  display:flex;align-items:center;gap:1rem;
  background:var(--purple-dim);
  border:1px solid rgba(181,123,255,0.25);
  border-radius:12px;padding:1rem 1.2rem;
  margin-bottom:0.8rem;animation:riseIn 0.3s ease;
}
.ia-icon{font-size:1.5rem;flex-shrink:0;}
.ia-body{flex:1;}
.ia-title{font-family:'Fraunces',serif;font-size:0.9rem;font-weight:700;color:var(--purple);margin-bottom:0.18rem;}
.ia-sub{font-size:0.72rem;color:var(--muted);}
.ia-actions{display:flex;gap:0.4rem;}

/* ── CONNECT PREVIEW ── */
.cprev{
  background:var(--card);border:1px solid var(--border2);
  border-radius:10px;padding:0.85rem 1rem;
  margin-bottom:1rem;font-size:0.78rem;color:var(--muted);
  line-height:1.6;
}
.cprev strong{color:var(--text2);}

/* ── EMPTY ── */
.empty{
  text-align:center;padding:4rem 2rem;
  color:var(--muted);grid-column:1/-1;
}
.empty-icon{font-size:2.5rem;margin-bottom:0.7rem;opacity:0.5;}
.empty p{font-size:0.8rem;line-height:1.7;}
.empty a{color:var(--accent);text-decoration:none;}

/* ── TOAST ── */
.toast{
  position:fixed;bottom:2rem;right:2rem;
  font-family:'JetBrains Mono',monospace;font-size:0.72rem;
  padding:0.7rem 1.15rem;border-radius:10px;z-index:999;
  transform:translateY(80px);opacity:0;
  transition:all 0.35s cubic-bezier(0.34,1.56,0.64,1);
  pointer-events:none;max-width:320px;
  box-shadow:0 8px 32px rgba(0,0,0,0.5);
}
.toast.show{transform:translateY(0);opacity:1;}

/* ── SCROLLBAR ── */
::-webkit-scrollbar{width:4px;height:4px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:var(--border2);border-radius:99px;}

/* ── VERIFICATION BADGES ── */
.verified-badge{display:inline-flex;align-items:center;gap:0.28rem;font-family:'JetBrains Mono',monospace;font-size:0.58rem;padding:0.14rem 0.48rem;border-radius:4px;border:1px solid rgba(66,255,228,0.5);color:var(--teal);background:var(--teal-dim);letter-spacing:0.03em;}
.edu-badge{border-color:rgba(77,170,255,0.5);color:var(--blue);background:var(--blue-dim);}
.ai-badge{border-color:rgba(181,123,255,0.5);color:var(--purple);background:var(--purple-dim);}

/* ── TOKEN DISPLAY ── */
.token-bar{display:flex;align-items:center;gap:0.5rem;background:var(--surface);border:1px solid var(--border);border-radius:999px;padding:0.3rem 0.9rem;font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--muted);}
.token-bar span{color:var(--accent);font-weight:700;}

/* ── FREELANCE VIEW ── */
.freelance-hero{background:linear-gradient(135deg,rgba(232,255,90,0.06) 0%,rgba(181,123,255,0.06) 100%);border:1px solid var(--border);border-radius:16px;padding:2rem;margin-bottom:2rem;text-align:center;}
.freelance-hero h2{font-family:'Fraunces',serif;font-size:1.8rem;font-weight:900;letter-spacing:-0.5px;margin-bottom:0.5rem;}
.freelance-hero p{font-size:0.82rem;color:var(--muted);max-width:520px;margin:0 auto 1.2rem;line-height:1.7;}
.lock-banner{background:var(--orange-dim);border:1px solid rgba(255,140,66,0.3);border-radius:12px;padding:1rem 1.2rem;font-size:0.78rem;color:var(--orange);display:flex;align-items:center;gap:0.7rem;margin-bottom:1.5rem;}
.job-card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:1.3rem;transition:all 0.2s;animation:riseIn 0.3s ease;position:relative;}
.job-card:hover{border-color:var(--border2);transform:translateY(-3px);box-shadow:0 12px 40px rgba(0,0,0,0.4);}
.job-company{font-family:'JetBrains Mono',monospace;font-size:0.62rem;color:var(--muted);margin-bottom:0.35rem;text-transform:uppercase;letter-spacing:0.06em;}
.job-title{font-family:'Fraunces',serif;font-size:1.05rem;font-weight:700;margin-bottom:0.4rem;}
.job-desc{font-size:0.76rem;color:var(--muted);line-height:1.65;margin-bottom:0.9rem;}
.job-tags{display:flex;flex-wrap:wrap;gap:0.3rem;margin-bottom:0.9rem;}
.job-tag{font-family:'JetBrains Mono',monospace;font-size:0.58rem;padding:0.14rem 0.48rem;border-radius:4px;background:var(--surface);border:1px solid var(--border);color:var(--muted2);}
.job-footer{display:flex;align-items:center;justify-content:space-between;}
.job-rate{font-family:'JetBrains Mono',monospace;font-size:0.72rem;color:var(--accent);}
.job-type{font-family:'JetBrains Mono',monospace;font-size:0.6rem;padding:0.16rem 0.5rem;border-radius:4px;border:1px solid rgba(232,255,90,0.3);color:var(--accent);}
.pro-badge{position:absolute;top:1rem;right:1rem;font-family:'JetBrains Mono',monospace;font-size:0.58rem;padding:0.16rem 0.5rem;border-radius:4px;border:1px solid rgba(255,140,66,0.4);color:var(--orange);background:var(--orange-dim);}

/* ── CHATBOT ── */
.chatbot-btn{position:fixed;bottom:2rem;left:2rem;width:50px;height:50px;border-radius:50%;background:var(--accent);border:none;cursor:pointer;z-index:500;display:flex;align-items:center;justify-content:center;font-size:1.2rem;box-shadow:0 4px 20px var(--accent-glow);transition:all 0.2s;}
.chatbot-btn:hover{transform:scale(1.1);box-shadow:0 8px 30px var(--accent-glow);}
.chatbot-window{position:fixed;bottom:5.5rem;left:2rem;width:320px;background:var(--surface);border:1px solid var(--border2);border-radius:16px;z-index:499;display:none;flex-direction:column;box-shadow:0 20px 60px rgba(0,0,0,0.6);animation:modalIn 0.2s ease;}
.chatbot-window.open{display:flex;}
.chatbot-header{padding:0.9rem 1.1rem;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:0.6rem;background:var(--card);border-radius:16px 16px 0 0;}
.chatbot-header-name{font-family:'Fraunces',serif;font-weight:700;font-size:0.9rem;}
.chatbot-header-status{font-family:'JetBrains Mono',monospace;font-size:0.6rem;color:var(--teal);}
.chatbot-close{margin-left:auto;background:none;border:none;color:var(--muted);cursor:pointer;font-size:1rem;line-height:1;}
.chatbot-msgs{flex:1;overflow-y:auto;padding:0.9rem;display:flex;flex-direction:column;gap:0.55rem;max-height:280px;min-height:180px;}
.bot-msg,.user-msg{max-width:85%;padding:0.5rem 0.8rem;border-radius:10px;font-size:0.75rem;line-height:1.55;animation:riseIn 0.2s ease;}
.bot-msg{background:var(--card2);border:1px solid var(--border);align-self:flex-start;border-radius:10px 10px 10px 3px;}
.user-msg{background:var(--accent);color:#0a0b0d;align-self:flex-end;border-radius:10px 10px 3px 10px;font-weight:500;}
.chatbot-input{padding:0.7rem;border-top:1px solid var(--border);display:flex;gap:0.4rem;}
.chatbot-input input{flex:1;font-size:0.74rem;padding:0.45rem 0.7rem;}
.chatbot-input button{padding:0.45rem 0.8rem;font-size:0.68rem;}

/* ── VERIFY MODAL ── */
.verify-step{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:1rem;margin-bottom:0.8rem;}
.verify-step-title{font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--muted);margin-bottom:0.5rem;text-transform:uppercase;letter-spacing:0.06em;}
.upload-zone{border:1px dashed var(--border2);border-radius:10px;padding:1.5rem;text-align:center;cursor:pointer;transition:all 0.2s;background:var(--card);}
.upload-zone:hover{border-color:rgba(232,255,90,0.4);background:var(--accent-dim);}
.upload-zone-text{font-family:'JetBrains Mono',monospace;font-size:0.68rem;color:var(--muted);margin-top:0.4rem;}
.ai-analysis-bar{background:var(--purple-dim);border:1px solid rgba(181,123,255,0.2);border-radius:8px;padding:0.75rem;font-family:'JetBrains Mono',monospace;font-size:0.68rem;color:var(--purple);display:none;margin-top:0.7rem;}
.progress-fill{height:4px;background:var(--accent);border-radius:2px;transition:width 1s ease;}

/* ── TIER CARDS ── */
.tier-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:0.7rem;margin-bottom:1rem;}
.tier-card{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:0.9rem;text-align:center;}
.tier-card.active-tier{border-color:rgba(232,255,90,0.5);background:var(--accent-dim);}
.tier-name{font-family:'Fraunces',serif;font-weight:700;font-size:0.9rem;margin-bottom:0.2rem;}
.tier-rate{font-family:'JetBrains Mono',monospace;font-size:0.7rem;color:var(--accent);margin-bottom:0.2rem;}
.tier-req{font-family:'JetBrains Mono',monospace;font-size:0.58rem;color:var(--muted);}

/* ── ESCROW BANNER ── */
.escrow-info{background:var(--blue-dim);border:1px solid rgba(77,170,255,0.2);border-radius:10px;padding:0.9rem 1.1rem;font-size:0.76rem;color:var(--blue);margin-bottom:1rem;display:flex;gap:0.6rem;align-items:flex-start;}

/* ── CONTACT FOOTER ── */
.site-footer{border-top:1px solid var(--border);margin-top:4rem;padding:2.5rem;text-align:center;background:rgba(0,0,0,0.3);}
.contact-btn{display:inline-flex;align-items:center;gap:0.5rem;background:var(--surface);border:1px solid var(--border2);border-radius:999px;padding:0.6rem 1.4rem;font-family:'JetBrains Mono',monospace;font-size:0.72rem;color:var(--text2);cursor:pointer;transition:all 0.2s;text-decoration:none;margin-bottom:0.8rem;}
.contact-btn:hover{border-color:var(--accent);color:var(--accent);}
.footer-email{font-family:'JetBrains Mono',monospace;font-size:0.78rem;color:var(--blue);margin-bottom:0.5rem;}
.footer-tagline{font-size:0.72rem;color:var(--muted);}

/* ── WALLET VIEW ── */
.wallet-hero{background:linear-gradient(135deg,rgba(232,255,90,0.08) 0%,rgba(66,255,228,0.05) 100%);border:1px solid var(--border);border-radius:16px;padding:2rem;margin-bottom:1.5rem;text-align:center;}
.wallet-balance{font-family:'Fraunces',serif;font-size:3rem;font-weight:900;color:var(--accent);letter-spacing:-2px;}
.wallet-sub{font-family:'JetBrains Mono',monospace;font-size:0.68rem;color:var(--muted);margin-top:0.3rem;}
.tx-list{display:flex;flex-direction:column;gap:0.5rem;}
.tx-item{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:0.85rem 1.1rem;display:flex;align-items:center;justify-content:space-between;}
.tx-label{font-size:0.78rem;font-weight:500;}
.tx-meta{font-family:'JetBrains Mono',monospace;font-size:0.62rem;color:var(--muted);margin-top:0.12rem;}
.tx-amount{font-family:'JetBrains Mono',monospace;font-size:0.82rem;font-weight:700;}
.tx-amount.earn{color:var(--teal);}
.tx-amount.spend{color:var(--red);}

/* ── RESPONSIVE ── */
@media(max-width:768px){
  nav{padding:0.8rem 1.2rem;}
  .nav-center{display:none;}
  .hero{padding:4rem 1.2rem 2rem;}
  .section{padding:1rem 1.2rem 3rem;}
  .inbox-wrap{grid-template-columns:1fr;}
  .tlist{max-height:200px;}
  .grid{grid-template-columns:1fr;}
  .hero-stats{gap:1.2rem;}
  #cursor,#cursor-ring{display:none;}
  .tier-grid{grid-template-columns:1fr;}
  .chatbot-window{left:1rem;right:1rem;width:auto;}
  .chatbot-btn{left:1rem;bottom:1rem;}
}

/* ══════════════════════════════════════
   AUTH PAGES (Sign In / Sign Up) — Desktop Split Layout
══════════════════════════════════════ */
.auth-overlay{
  position:fixed;inset:0;z-index:9000;
  background:var(--bg);
  display:flex;align-items:stretch;
  min-height:100vh;overflow-y:auto;
}
/* Left brand panel */
.auth-brand{
  width:45%;min-width:380px;
  background:linear-gradient(145deg,#0a0c10 0%,#111520 60%,rgba(232,255,90,0.04) 100%);
  border-right:1px solid var(--border);
  display:flex;flex-direction:column;justify-content:space-between;
  padding:3rem;position:relative;overflow:hidden;
}
@media(max-width:900px){.auth-brand{display:none;}}
.auth-brand::before{
  content:'';position:absolute;inset:0;
  background:radial-gradient(ellipse at 20% 80%,rgba(232,255,90,0.08) 0%,transparent 60%),
             radial-gradient(ellipse at 80% 20%,rgba(77,170,255,0.06) 0%,transparent 50%);
  pointer-events:none;
}
.auth-brand-logo{
  font-family:'Fraunces',serif;font-weight:900;font-size:2.2rem;
  letter-spacing:-1px;position:relative;
}
.auth-brand-logo span{color:var(--accent);}
.auth-brand-tagline{
  font-family:'JetBrains Mono',monospace;font-size:0.65rem;
  color:var(--muted);letter-spacing:0.08em;margin-top:0.3rem;
}
.auth-brand-headline{
  font-family:'Fraunces',serif;font-size:2.6rem;font-weight:900;
  line-height:1.1;letter-spacing:-1.5px;color:var(--text);
  position:relative;
}
.auth-brand-headline .hl{color:var(--accent);text-shadow:0 0 40px rgba(232,255,90,0.2);}
.auth-brand-desc{
  font-size:0.85rem;color:var(--muted);line-height:1.75;
  margin-top:1rem;max-width:340px;position:relative;
}
.auth-trust-pills{display:flex;flex-direction:column;gap:0.6rem;margin-top:2rem;position:relative;}
.auth-trust-pill{
  display:flex;align-items:center;gap:0.75rem;
  background:rgba(255,255,255,0.03);border:1px solid var(--border);
  border-radius:10px;padding:0.65rem 1rem;
}
.auth-trust-icon{font-size:1.1rem;flex-shrink:0;}
.auth-trust-text{font-size:0.75rem;color:var(--text2);line-height:1.4;}
.auth-trust-text strong{color:var(--accent);display:block;font-size:0.72rem;}
.auth-brand-stats{display:flex;gap:2rem;position:relative;}
.abstat{text-align:center;}
.abstat-num{font-family:'Fraunces',serif;font-size:1.6rem;font-weight:900;color:var(--text);letter-spacing:-1px;}
.abstat-num span{color:var(--accent);}
.abstat-label{font-family:'JetBrains Mono',monospace;font-size:0.6rem;color:var(--muted);margin-top:0.1rem;}
/* Right form panel */
.auth-form-panel{
  flex:1;display:flex;align-items:center;justify-content:center;
  padding:3rem 2rem;background:var(--bg);overflow-y:auto;
}
.auth-box{
  width:100%;max-width:420px;
  animation:riseIn 0.4s cubic-bezier(0.23,1,0.32,1);
}
.auth-box-header{margin-bottom:2rem;}
.auth-mobile-logo{
  display:none;font-family:'Fraunces',serif;font-weight:900;
  font-size:1.8rem;letter-spacing:-0.5px;margin-bottom:0.2rem;
}
.auth-mobile-logo span{color:var(--accent);}
@media(max-width:900px){.auth-mobile-logo{display:block;}}
.auth-box-title{
  font-family:'Fraunces',serif;font-size:1.8rem;font-weight:900;
  letter-spacing:-0.8px;color:var(--text);margin-bottom:0.3rem;
}
.auth-box-sub{font-size:0.8rem;color:var(--muted);line-height:1.6;}
.auth-logo{display:none;} /* hide old logo */
.auth-tagline{display:none;}
.auth-security-bar{
  background:linear-gradient(90deg,rgba(66,255,228,0.06),rgba(77,170,255,0.06));
  border:1px solid rgba(66,255,228,0.18);border-radius:10px;
  padding:0.7rem 1rem;margin-bottom:1.4rem;
  font-family:'JetBrains Mono',monospace;font-size:0.63rem;
  color:var(--teal);line-height:1.6;
  display:flex;gap:0.5rem;align-items:flex-start;
}
.skill-toggle-wrap{
  display:flex;gap:0;margin-bottom:1.4rem;
  border:1px solid var(--border2);border-radius:10px;overflow:hidden;
  background:var(--surface);
}
.skill-toggle-btn{
  flex:1;padding:0.65rem;font-family:'JetBrains Mono',monospace;
  font-size:0.72rem;border:none;background:transparent;
  color:var(--muted);cursor:pointer;transition:all 0.2s;
}
.skill-toggle-btn.active{
  background:var(--accent);color:#0a0b0d;font-weight:700;
  box-shadow:0 2px 12px rgba(232,255,90,0.3);
}
.auth-tabs{
  display:flex;gap:0;margin-bottom:1.6rem;border-radius:10px;
  overflow:hidden;border:1px solid var(--border2);background:var(--surface);
}
.auth-tab-btn{
  flex:1;padding:0.65rem;font-family:'JetBrains Mono',monospace;font-size:0.72rem;
  border:none;background:transparent;color:var(--muted);cursor:pointer;transition:all 0.2s;
}
.auth-tab-btn.active{
  background:var(--card2);color:var(--text);font-weight:600;
  box-shadow:inset 0 1px 0 rgba(255,255,255,0.06);
}
.auth-input{
  background:var(--surface)!important;border:1px solid var(--border2)!important;
  border-radius:10px!important;color:var(--text)!important;
  font-family:'JetBrains Mono',monospace!important;font-size:0.76rem!important;
  padding:0.72rem 1rem!important;width:100%!important;outline:none!important;
  transition:all 0.18s!important;
}
.auth-input:focus{border-color:rgba(232,255,90,0.4)!important;background:var(--card)!important;}
.auth-input::placeholder{color:var(--muted2)!important;}
.liveness-box{
  border:1px dashed rgba(77,170,255,0.35);border-radius:12px;
  padding:1.3rem;text-align:center;margin-bottom:1rem;
  background:rgba(77,170,255,0.04);
}
.liveness-icon{font-size:2rem;margin-bottom:0.4rem;}
.liveness-text{font-family:'JetBrains Mono',monospace;font-size:0.68rem;color:var(--blue);line-height:1.7;}
.antiscam-box{
  background:rgba(255,77,77,0.05);border:1px solid rgba(255,77,77,0.18);
  border-radius:10px;padding:0.8rem 1rem;margin-bottom:1.2rem;
  font-size:0.72rem;color:var(--text2);line-height:1.65;
}
.antiscam-box label{display:flex;gap:0.5rem;align-items:flex-start;cursor:pointer;}
.antiscam-box input[type=checkbox]{margin-top:3px;accent-color:var(--accent);flex-shrink:0;}
.recruiter-portal-link{
  display:block;text-align:center;margin-top:1rem;
  font-family:'JetBrains Mono',monospace;font-size:0.68rem;
  color:var(--purple);text-decoration:none;
  padding:0.5rem;border:1px solid rgba(181,123,255,0.28);
  border-radius:8px;transition:all 0.2s;
}
.recruiter-portal-link:hover{background:var(--purple-dim);border-color:rgba(181,123,255,0.5);}
.device-lock-notice{
  font-family:'JetBrains Mono',monospace;font-size:0.6rem;
  color:var(--muted);text-align:center;margin-top:0.8rem;line-height:1.5;
}
.otp-renewals{
  font-family:'JetBrains Mono',monospace;font-size:0.6rem;
  color:var(--orange);text-align:center;margin-top:0.4rem;
}
.auth-divider{
  display:flex;align-items:center;gap:0.8rem;margin:1rem 0;
}
.auth-divider::before,.auth-divider::after{
  content:'';flex:1;height:1px;background:var(--border);
}
.auth-divider span{font-family:'JetBrains Mono',monospace;font-size:0.6rem;color:var(--muted);}

/* ══════════════════════════════════════
   MEMBERSHIP TIERS (Pro/Expert benefits)
══════════════════════════════════════ */
.membership-grid{
  display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;
  margin-bottom:2rem;
}
@media(max-width:768px){.membership-grid{grid-template-columns:1fr;}}
.membership-card{
  background:var(--card);border:1px solid var(--border);
  border-radius:16px;padding:1.5rem 1.2rem;
  position:relative;overflow:hidden;
  transition:all 0.3s cubic-bezier(0.23,1,0.32,1);
}
.membership-card:hover{transform:translateY(-4px);box-shadow:0 20px 60px rgba(0,0,0,0.5);}
.membership-card.pro{border-color:rgba(232,255,90,0.4);background:linear-gradient(135deg,rgba(232,255,90,0.06),var(--card));}
.membership-card.expert{border-color:rgba(181,123,255,0.4);background:linear-gradient(135deg,rgba(181,123,255,0.08),var(--card));}
.membership-card::after{
  content:'';position:absolute;top:-30px;right:-30px;
  width:100px;height:100px;border-radius:50%;
  opacity:0.06;
}
.membership-card.pro::after{background:var(--accent);}
.membership-card.expert::after{background:var(--purple);}
.plan-name{font-family:'Fraunces',serif;font-weight:900;font-size:1.3rem;margin-bottom:0.2rem;}
.plan-price{font-family:'JetBrains Mono',monospace;font-size:1.4rem;font-weight:700;margin-bottom:0.1rem;}
.plan-per{font-family:'JetBrains Mono',monospace;font-size:0.62rem;color:var(--muted);}
.plan-badge-row{display:flex;gap:0.4rem;flex-wrap:wrap;margin:0.8rem 0;}
.plan-badge{
  font-family:'JetBrains Mono',monospace;font-size:0.58rem;
  padding:0.18rem 0.55rem;border-radius:999px;border:1px solid;
}
.plan-features{list-style:none;margin-top:1rem;}
.plan-features li{
  font-size:0.76rem;color:var(--text2);padding:0.28rem 0;
  border-bottom:1px solid rgba(255,255,255,0.04);
  display:flex;gap:0.5rem;align-items:flex-start;
}
.plan-features li:before{content:'✓';color:var(--teal);font-size:0.7rem;margin-top:2px;flex-shrink:0;}
.plan-features li.con:before{content:'✗';color:var(--red);}
.free-limit-banner{
  background:rgba(255,77,77,0.07);border:1px solid rgba(255,77,77,0.25);
  border-radius:10px;padding:0.85rem 1.1rem;
  font-family:'JetBrains Mono',monospace;font-size:0.72rem;
  color:var(--red);margin-bottom:1.5rem;display:flex;gap:0.5rem;align-items:center;
}

/* ══════════════════════════════════════
   RECRUITER PORTAL
══════════════════════════════════════ */
.recruiter-hero{
  background:linear-gradient(135deg,rgba(181,123,255,0.12),rgba(77,170,255,0.08));
  border:1px solid rgba(181,123,255,0.3);border-radius:20px;
  padding:2.5rem;text-align:center;margin-bottom:2rem;
}
.recruiter-hero h2{
  font-family:'Fraunces',serif;font-size:2rem;font-weight:900;
  margin-bottom:0.6rem;letter-spacing:-1px;color:var(--purple);
}
.recruiter-stats{display:flex;gap:2rem;justify-content:center;flex-wrap:wrap;margin:1.5rem 0;}
.rstat-num{font-family:'Fraunces',serif;font-size:1.6rem;font-weight:900;color:var(--accent);}
.rstat-label{font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--muted);}
.leaderboard{display:flex;flex-direction:column;gap:0.6rem;margin-bottom:2rem;}
.lboard-item{
  background:var(--card);border:1px solid var(--border);
  border-radius:12px;padding:1rem 1.2rem;
  display:flex;align-items:center;gap:1rem;
  transition:all 0.2s;cursor:pointer;
}
.lboard-item:hover{border-color:var(--border2);transform:translateX(4px);}
.lboard-item.gold{border-color:rgba(232,255,90,0.5);background:linear-gradient(90deg,rgba(232,255,90,0.05),var(--card));}
.lboard-item.silver{border-color:rgba(77,170,255,0.3);background:linear-gradient(90deg,rgba(77,170,255,0.04),var(--card));}
.lboard-item.bronze{border-color:rgba(255,140,66,0.3);background:linear-gradient(90deg,rgba(255,140,66,0.04),var(--card));}
.lboard-rank{
  font-family:'Fraunces',serif;font-weight:900;font-size:1.2rem;
  width:28px;text-align:center;flex-shrink:0;
}
.lboard-info{flex:1;}
.lboard-name{font-weight:600;font-size:0.88rem;margin-bottom:0.15rem;}
.lboard-skill{font-family:'JetBrains Mono',monospace;font-size:0.64rem;color:var(--muted);}
.lboard-meta{display:flex;gap:0.4rem;flex-wrap:wrap;margin-top:0.3rem;}
.lboard-stat{
  font-family:'JetBrains Mono',monospace;font-size:0.6rem;
  padding:0.12rem 0.45rem;border-radius:4px;
  background:var(--surface);border:1px solid var(--border);color:var(--muted2);
}
.lboard-right{display:flex;flex-direction:column;align-items:flex-end;gap:0.3rem;}
.verified-star{
  font-family:'JetBrains Mono',monospace;font-size:0.58rem;
  padding:0.12rem 0.5rem;border-radius:999px;
}
.bounty-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem;margin-bottom:2rem;}
.bounty-card{
  background:var(--card);border:1px solid rgba(181,123,255,0.3);
  border-radius:14px;padding:1.3rem;transition:all 0.2s;
}
.bounty-card:hover{border-color:rgba(181,123,255,0.6);transform:translateY(-3px);}
.bounty-company{font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--purple);margin-bottom:0.3rem;}
.bounty-title{font-family:'Fraunces',serif;font-weight:700;font-size:1rem;margin-bottom:0.5rem;}
.bounty-reward{
  font-family:'JetBrains Mono',monospace;font-size:0.8rem;
  color:var(--accent);font-weight:700;
}
.bounty-tokens{font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--orange);margin-top:0.2rem;}
.bounty-tags{display:flex;gap:0.3rem;flex-wrap:wrap;margin:0.7rem 0;}
.btag{
  font-family:'JetBrains Mono',monospace;font-size:0.58rem;
  padding:0.15rem 0.45rem;border-radius:4px;
  background:rgba(181,123,255,0.08);border:1px solid rgba(181,123,255,0.25);
  color:var(--purple);
}
.recruiter-sub-plans{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:2rem;}
@media(max-width:768px){.recruiter-sub-plans{grid-template-columns:1fr;}}
.rsub-card{
  background:var(--card);border:1px solid var(--border);border-radius:14px;padding:1.2rem;
}
.rsub-card.featured{border-color:rgba(181,123,255,0.5);background:linear-gradient(135deg,rgba(181,123,255,0.06),var(--card));}
.commission-box{
  background:linear-gradient(135deg,rgba(232,255,90,0.08),rgba(66,255,228,0.05));
  border:1px solid rgba(232,255,90,0.25);border-radius:14px;
  padding:1.5rem;text-align:center;margin-bottom:2rem;
}

/* ══════════════════════════════════════
   SESSION COMMAND CENTER — COMPLETE REDESIGN
══════════════════════════════════════ */
.session-layout{display:grid;grid-template-columns:1fr 380px;gap:1.2rem;align-items:start;}
@media(max-width:1024px){.session-layout{grid-template-columns:1fr;}}
.session-main{}
.session-sidebar{}

/* Dual Status Check-in */
.dual-checkin-card{
  background:linear-gradient(135deg,rgba(66,255,228,0.06),rgba(77,170,255,0.04));
  border:1px solid rgba(66,255,228,0.25);border-radius:16px;
  padding:1.4rem;margin-bottom:1rem;
}
.dual-checkin-title{
  font-family:'JetBrains Mono',monospace;font-size:0.7rem;
  color:var(--teal);letter-spacing:0.06em;margin-bottom:1rem;
  display:flex;align-items:center;gap:0.5rem;
}
.dual-status-grid{display:grid;grid-template-columns:1fr auto 1fr;gap:0.8rem;align-items:center;margin-bottom:1.2rem;}
.status-user{background:var(--card);border:1px solid var(--border2);border-radius:12px;padding:0.9rem;text-align:center;}
.status-user.active-user{border-color:rgba(66,255,228,0.4);background:rgba(66,255,228,0.05);}
.status-user.waiting-user{border-color:rgba(255,140,66,0.3);background:rgba(255,140,66,0.04);}
.status-avatar{width:44px;height:44px;border-radius:50%;margin:0 auto 0.4rem;display:flex;align-items:center;justify-content:center;font-family:'Fraunces',serif;font-weight:900;font-size:1.1rem;}
.status-name{font-size:0.78rem;font-weight:600;color:var(--text);}
.status-role{font-family:'JetBrains Mono',monospace;font-size:0.6rem;color:var(--muted);margin-top:0.1rem;}
.status-indicator{font-family:'JetBrains Mono',monospace;font-size:0.62rem;margin-top:0.4rem;padding:0.2rem 0.5rem;border-radius:999px;display:inline-block;}
.status-indicator.online{background:rgba(66,255,228,0.1);color:var(--teal);border:1px solid rgba(66,255,228,0.3);}
.status-indicator.offline{background:rgba(255,140,66,0.1);color:var(--orange);border:1px solid rgba(255,140,66,0.3);}
.status-vs{font-family:'Fraunces',serif;font-size:1.2rem;font-weight:900;color:var(--muted);text-align:center;}
.start-session-btn{
  width:100%;padding:0.85rem;
  font-family:'JetBrains Mono',monospace;font-size:0.8rem;font-weight:700;
  background:var(--accent);color:#0a0b0d;border:none;border-radius:10px;
  cursor:pointer;transition:all 0.2s;letter-spacing:0.03em;
  box-shadow:0 0 24px rgba(232,255,90,0.2);
}
.start-session-btn:hover{background:#f0ff70;box-shadow:0 0 36px rgba(232,255,90,0.35);transform:translateY(-1px);}
.start-session-btn:disabled{background:var(--surface);color:var(--muted);border:1px solid var(--border);box-shadow:none;cursor:not-allowed;transform:none;}

/* Escrow Timer */
.escrow-timer-card{
  background:var(--card);border:1px solid var(--border2);
  border-radius:16px;padding:1.4rem;margin-bottom:1rem;
  position:relative;overflow:hidden;
}
.escrow-timer-card.locked{border-color:rgba(66,255,228,0.3);}
.escrow-timer-card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:2px;
  background:linear-gradient(90deg,var(--teal),var(--blue),var(--accent));
  opacity:0.5;
}
.escrow-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;}
.escrow-label{font-family:'JetBrains Mono',monospace;font-size:0.68rem;color:var(--teal);letter-spacing:0.06em;}
.escrow-locked-badge{
  font-family:'JetBrains Mono',monospace;font-size:0.6rem;
  padding:0.2rem 0.6rem;border-radius:999px;
  background:rgba(66,255,228,0.1);color:var(--teal);border:1px solid rgba(66,255,228,0.3);
}
.escrow-countdown-wrap{display:flex;align-items:baseline;gap:0.8rem;margin-bottom:0.8rem;}
.escrow-countdown{
  font-family:'Fraunces',serif;font-size:3.5rem;font-weight:900;
  color:var(--teal);letter-spacing:-3px;line-height:1;
  text-shadow:0 0 40px rgba(66,255,228,0.3);
}
.escrow-countdown.urgent{color:var(--orange);text-shadow:0 0 40px rgba(255,140,66,0.3);animation:timerPulse 1s ease-in-out infinite;}
@keyframes timerPulse{0%,100%{opacity:1}50%{opacity:0.7}}
.escrow-sub{font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--muted);}
.escrow-progress-bar{height:6px;background:var(--surface);border-radius:3px;overflow:hidden;margin-bottom:0.8rem;}
.escrow-progress-fill{
  height:100%;border-radius:3px;
  background:linear-gradient(90deg,var(--teal),var(--accent));
  transition:width 1s linear;
}
.escrow-meta{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:0.4rem;}
.escrow-amount{
  font-family:'JetBrains Mono',monospace;font-size:0.75rem;font-weight:700;color:var(--text);
}
.escrow-amount span{color:var(--accent);}
.escrow-note{font-family:'JetBrains Mono',monospace;font-size:0.6rem;color:var(--muted);}
.escrow-min-note{
  font-family:'JetBrains Mono',monospace;font-size:0.62rem;
  color:var(--orange);margin-top:0.4rem;
  display:flex;align-items:center;gap:0.3rem;
}

/* Proof of Work Upload */
.proof-upload-card{
  background:var(--card);border:1px solid var(--border2);
  border-radius:16px;padding:1.4rem;margin-bottom:1rem;
}
.proof-upload-title{
  font-family:'JetBrains Mono',monospace;font-size:0.68rem;
  color:var(--accent);letter-spacing:0.06em;margin-bottom:0.3rem;
}
.proof-upload-sub{font-size:0.74rem;color:var(--muted);margin-bottom:1rem;line-height:1.55;}
.proof-drop-zone{
  border:2px dashed var(--border2);border-radius:12px;
  padding:2rem 1rem;text-align:center;cursor:pointer;
  transition:all 0.2s;background:var(--surface);
  position:relative;
}
.proof-drop-zone:hover{border-color:rgba(232,255,90,0.4);background:var(--accent-dim);}
.proof-drop-zone.has-file{border-color:rgba(66,255,228,0.4);background:rgba(66,255,228,0.04);border-style:solid;}
.proof-drop-icon{font-size:2.2rem;margin-bottom:0.6rem;}
.proof-drop-text{font-family:'JetBrains Mono',monospace;font-size:0.7rem;color:var(--muted);line-height:1.6;}
.proof-drop-cta{font-family:'JetBrains Mono',monospace;font-size:0.68rem;color:var(--accent);margin-top:0.4rem;font-weight:600;}
.proof-thumbnails{display:grid;grid-template-columns:repeat(4,1fr);gap:0.5rem;margin-top:0.8rem;}
.proof-thumb{
  background:var(--surface);border:1px solid var(--border);
  border-radius:8px;aspect-ratio:1;display:flex;flex-direction:column;
  align-items:center;justify-content:center;cursor:pointer;
  transition:all 0.2s;font-size:1.4rem;
}
.proof-thumb:hover{border-color:var(--accent);background:var(--accent-dim);}
.proof-thumb.uploaded{border-color:rgba(66,255,228,0.4);background:rgba(66,255,228,0.06);}
.proof-thumb-label{font-family:'JetBrains Mono',monospace;font-size:0.55rem;color:var(--muted);margin-top:0.3rem;text-align:center;}
.proof-required-badge{
  display:inline-flex;align-items:center;gap:0.3rem;
  font-family:'JetBrains Mono',monospace;font-size:0.6rem;
  padding:0.2rem 0.6rem;border-radius:999px;
  background:rgba(255,77,77,0.1);color:var(--red);
  border:1px solid rgba(255,77,77,0.25);margin-bottom:0.7rem;
}
.proof-required-badge.satisfied{
  background:rgba(66,255,228,0.1);color:var(--teal);border-color:rgba(66,255,228,0.3);
}

/* Learning Summary / Key Takeaways */
.takeaways-card{
  background:var(--card);border:1px solid var(--border2);
  border-radius:16px;padding:1.4rem;margin-bottom:1rem;
}
.takeaways-title{
  font-family:'JetBrains Mono',monospace;font-size:0.68rem;
  color:var(--blue);letter-spacing:0.06em;margin-bottom:0.3rem;
}
.takeaways-sub{font-size:0.74rem;color:var(--muted);margin-bottom:1rem;line-height:1.55;}
.takeaway-item{margin-bottom:0.7rem;}
.takeaway-label{
  font-family:'JetBrains Mono',monospace;font-size:0.6rem;
  color:var(--muted);margin-bottom:0.3rem;
  display:flex;align-items:center;gap:0.4rem;
}
.takeaway-num{
  width:18px;height:18px;border-radius:50%;
  background:var(--blue-dim);border:1px solid rgba(77,170,255,0.3);
  color:var(--blue);font-size:0.6rem;font-weight:700;
  display:inline-flex;align-items:center;justify-content:center;flex-shrink:0;
}
.takeaway-num.filled{background:rgba(66,255,228,0.1);border-color:rgba(66,255,228,0.4);color:var(--teal);}
.takeaway-input{
  width:100%;background:var(--surface);border:1px solid var(--border2);
  border-radius:8px;color:var(--text);font-family:'Plus Jakarta Sans',sans-serif;
  font-size:0.78rem;padding:0.6rem 0.8rem;outline:none;resize:none;
  transition:all 0.18s;
}
.takeaway-input:focus{border-color:rgba(77,170,255,0.4);background:var(--card);}
.takeaway-input.filled{border-color:rgba(66,255,228,0.35);}
.complete-btn{
  width:100%;padding:0.85rem;margin-top:0.8rem;
  font-family:'JetBrains Mono',monospace;font-size:0.78rem;font-weight:700;
  background:var(--surface);color:var(--muted);
  border:1px solid var(--border2);border-radius:10px;
  cursor:not-allowed;transition:all 0.25s;letter-spacing:0.03em;
}
.complete-btn.ready{
  background:var(--accent);color:#0a0b0d;border-color:var(--accent);
  cursor:pointer;box-shadow:0 0 24px rgba(232,255,90,0.2);
}
.complete-btn.ready:hover{background:#f0ff70;box-shadow:0 0 36px rgba(232,255,90,0.35);transform:translateY(-1px);}

/* Resource Launch Button */
.resource-launch-card{
  background:linear-gradient(135deg,rgba(181,123,255,0.08),rgba(77,170,255,0.05));
  border:1px solid rgba(181,123,255,0.25);
  border-radius:16px;padding:1.4rem;margin-bottom:1rem;
}
.resource-btn-grid{display:grid;grid-template-columns:1fr 1fr;gap:0.6rem;margin-top:0.8rem;}
.resource-btn{
  display:flex;align-items:center;gap:0.6rem;
  padding:0.8rem 1rem;border-radius:10px;cursor:pointer;
  border:1px solid;transition:all 0.2s;font-family:'JetBrains Mono',monospace;
  font-size:0.7rem;font-weight:600;background:transparent;
}
.resource-btn.wb{border-color:rgba(181,123,255,0.4);color:var(--purple);}
.resource-btn.wb:hover{background:var(--purple-dim);border-color:rgba(181,123,255,0.7);}
.resource-btn.doc{border-color:rgba(77,170,255,0.4);color:var(--blue);}
.resource-btn.doc:hover{background:var(--blue-dim);border-color:rgba(77,170,255,0.7);}
.resource-btn.vid{border-color:rgba(66,255,228,0.4);color:var(--teal);}
.resource-btn.vid:hover{background:var(--teal-dim);border-color:rgba(66,255,228,0.7);}
.resource-btn.code{border-color:rgba(255,140,66,0.4);color:var(--orange);}
.resource-btn.code:hover{background:var(--orange-dim);border-color:rgba(255,140,66,0.7);}
.resource-btn-icon{font-size:1.2rem;flex-shrink:0;}

/* PANIC / Dispute Button */
.panic-btn-wrap{position:relative;margin-bottom:1rem;}
.panic-btn{
  width:100%;padding:0.9rem 1.4rem;
  font-family:'JetBrains Mono',monospace;font-size:0.78rem;font-weight:700;
  background:rgba(255,77,77,0.08);color:var(--red);
  border:2px solid rgba(255,77,77,0.4);border-radius:12px;
  cursor:pointer;transition:all 0.2s;letter-spacing:0.03em;
  display:flex;align-items:center;justify-content:center;gap:0.6rem;
  animation:panicPulse 4s ease-in-out infinite;
}
@keyframes panicPulse{0%,90%,100%{box-shadow:0 0 0 0 rgba(255,77,77,0)}40%{box-shadow:0 0 0 6px rgba(255,77,77,0.1)}}
.panic-btn:hover{background:rgba(255,77,77,0.15);border-color:var(--red);box-shadow:0 0 20px rgba(255,77,77,0.2);animation:none;}
.panic-btn-icon{font-size:1.1rem;}

/* Post-Session Feedback */
.feedback-card{
  background:var(--card);border:1px solid var(--border2);
  border-radius:16px;padding:1.4rem;margin-bottom:1rem;
}
.stars-row{display:flex;gap:0.3rem;margin:0.8rem 0;}
.star{
  font-size:1.6rem;cursor:pointer;transition:all 0.15s;
  filter:grayscale(1)opacity(0.4);
}
.star.lit{filter:none;transform:scale(1.1);}
.star:hover{filter:none;transform:scale(1.2);}
.impact-badges-grid{display:grid;grid-template-columns:1fr 1fr;gap:0.4rem;margin-top:0.8rem;}
.impact-badge-btn{
  padding:0.55rem 0.7rem;border-radius:8px;
  font-family:'JetBrains Mono',monospace;font-size:0.62rem;
  border:1px solid var(--border2);background:transparent;color:var(--muted);
  cursor:pointer;transition:all 0.15s;text-align:left;display:flex;align-items:center;gap:0.4rem;
}
.impact-badge-btn:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-dim);}
.impact-badge-btn.selected{border-color:var(--accent);color:#0a0b0d;background:var(--accent);}
.feedback-submit{
  width:100%;padding:0.75rem;margin-top:1rem;
  font-family:'JetBrains Mono',monospace;font-size:0.74rem;font-weight:700;
  background:var(--surface);color:var(--muted);border:1px solid var(--border2);
  border-radius:10px;cursor:not-allowed;transition:all 0.2s;
}
.feedback-submit.ready{
  background:var(--purple);color:#fff;border-color:var(--purple);
  cursor:pointer;box-shadow:0 0 20px rgba(181,123,255,0.2);
}
.feedback-submit.ready:hover{box-shadow:0 0 30px rgba(181,123,255,0.35);}

/* Session History */
.session-hist-item{
  background:var(--card);border:1px solid var(--border);
  border-radius:12px;padding:1rem 1.2rem;
  display:flex;align-items:center;gap:1rem;flex-wrap:wrap;
  transition:all 0.2s;
}
.session-hist-item:hover{border-color:var(--border2);}

/* Old session command — override */
.session-command{
  background:var(--card);border:1px solid var(--border2);
  border-radius:16px;padding:1.4rem;margin-bottom:1rem;
}
.session-live-card{
  background:linear-gradient(135deg,rgba(232,255,90,0.06),rgba(66,255,228,0.04));
  border:1px solid rgba(66,255,228,0.25);border-radius:12px;
  padding:1.2rem;margin-bottom:1rem;
  display:flex;align-items:center;gap:1rem;flex-wrap:wrap;
}
.session-countdown{
  font-family:'Fraunces',serif;font-size:2rem;font-weight:900;
  color:var(--teal);letter-spacing:-1px;min-width:80px;text-align:center;
}
.session-info{flex:1;}
.session-name{font-weight:600;font-size:0.9rem;margin-bottom:0.2rem;}
.session-sub{font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--muted);}
.escrow-status{
  font-family:'JetBrains Mono',monospace;font-size:0.65rem;
  padding:0.3rem 0.7rem;border-radius:999px;
  background:rgba(66,255,228,0.1);border:1px solid rgba(66,255,228,0.3);color:var(--teal);
}
.proof-gallery{
  display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:0.7rem;margin-top:1rem;
}
.proof-item{
  background:var(--surface);border:1px solid var(--border);border-radius:10px;
  padding:0.8rem;text-align:center;cursor:pointer;transition:all 0.2s;
}
.proof-item:hover{border-color:var(--accent);background:var(--accent-dim);}
.proof-icon{font-size:1.8rem;margin-bottom:0.3rem;}
.proof-label{font-family:'JetBrains Mono',monospace;font-size:0.62rem;color:var(--muted);}
.weighted-rep-box{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:1.2rem;margin-top:1rem;}
.rep-row{display:flex;align-items:center;justify-content:space-between;padding:0.4rem 0;border-bottom:1px solid rgba(255,255,255,0.04);}
.rep-label{font-size:0.76rem;color:var(--text2);}
.rep-val{font-family:'JetBrains Mono',monospace;font-size:0.72rem;color:var(--accent);}
.rep-val.warn{color:var(--orange);}
.rep-val.bad{color:var(--red);}

/* ══════════════════════════════════════
   PUBLIC BADGES
══════════════════════════════════════ */
.public-badge{
  display:inline-flex;align-items:center;gap:0.3rem;
  font-family:'JetBrains Mono',monospace;font-size:0.58rem;
  padding:0.16rem 0.55rem;border-radius:999px;
  letter-spacing:0.03em;
}
.badge-free{background:rgba(107,118,136,0.15);border:1px solid rgba(107,118,136,0.3);color:var(--muted);}
.badge-pro{background:rgba(232,255,90,0.12);border:1px solid rgba(232,255,90,0.4);color:var(--accent);}
.badge-expert{background:rgba(181,123,255,0.12);border:1px solid rgba(181,123,255,0.4);color:var(--purple);}
.badge-verified{background:rgba(66,255,228,0.1);border:1px solid rgba(66,255,228,0.35);color:var(--teal);}
.badge-recruiter{background:rgba(77,170,255,0.12);border:1px solid rgba(77,170,255,0.35);color:var(--blue);}

/* ══════════════════════════════════════
   IP/FRAUD WARNINGS
══════════════════════════════════════ */
.fraud-warning{
  background:rgba(255,77,77,0.08);border:1px solid rgba(255,77,77,0.3);
  border-radius:10px;padding:0.85rem 1rem;
  font-family:'JetBrains Mono',monospace;font-size:0.68rem;
  color:var(--red);margin-bottom:1rem;display:none;
}
.loop-penalty{
  background:rgba(255,140,66,0.08);border:1px solid rgba(255,140,66,0.3);
  border-radius:8px;padding:0.6rem 0.85rem;
  font-family:'JetBrains Mono',monospace;font-size:0.65rem;
  color:var(--orange);
}

/* ══════════════════════════════════════
   PRICING PAGE
══════════════════════════════════════ */
.pricing-toggle{
  display:flex;align-items:center;justify-content:center;
  gap:0.8rem;margin-bottom:2rem;
}
.pricing-toggle-slider{
  position:relative;width:46px;height:24px;
  background:var(--surface);border:1px solid var(--border2);
  border-radius:999px;cursor:pointer;transition:all 0.2s;
}
.pricing-toggle-slider.on{background:var(--accent);}
.pricing-toggle-knob{
  position:absolute;top:2px;left:2px;
  width:18px;height:18px;border-radius:50%;
  background:#fff;transition:left 0.2s;
}
.pricing-toggle-slider.on .pricing-toggle-knob{left:24px;background:#0a0b0d;}
.pricing-label{font-family:'JetBrains Mono',monospace;font-size:0.72rem;color:var(--text2);}

/* ══════════════════════════════════════
   SESSIONS PAGE (command center)
══════════════════════════════════════ */
.dispute-btn{
  background:rgba(255,77,77,0.1);border:1px solid rgba(255,77,77,0.4);
  color:var(--red);border-radius:8px;padding:0.45rem 0.9rem;
  font-family:'JetBrains Mono',monospace;font-size:0.68rem;cursor:pointer;
  transition:all 0.2s;
}
.dispute-btn:hover{background:rgba(255,77,77,0.2);}
.checkin-btn{
  background:rgba(66,255,228,0.1);border:1px solid rgba(66,255,228,0.4);
  color:var(--teal);border-radius:8px;padding:0.45rem 0.9rem;
  font-family:'JetBrains Mono',monospace;font-size:0.68rem;cursor:pointer;
  transition:all 0.2s;
}
.checkin-btn:hover{background:rgba(66,255,228,0.2);}
.summary-submit{
  background:rgba(232,255,90,0.1);border:1px solid rgba(232,255,90,0.4);
  color:var(--accent);border-radius:8px;padding:0.45rem 0.9rem;
  font-family:'JetBrains Mono',monospace;font-size:0.68rem;cursor:pointer;
  transition:all 0.2s;
}
.summary-submit:hover{background:var(--accent-dim);}

</style>
</head>
<body>

<canvas id="bg-canvas"></canvas>
<div id="cursor"></div>
<div id="cursor-ring"></div>

<div class="wrap">
<nav>
  <div class="logo" onclick="showView('browse')">
    <span class="logo-s">S</span>killit
  </div>
  <div class="nav-center">
    <button class="nav-tab active" id="tab-browse" onclick="showView('browse')">Browse</button>
    <button class="nav-tab" id="tab-sessions" onclick="showView('sessions')">Sessions<span class="ndot" id="sessionDot"></span></button>
    <button class="nav-tab" id="tab-freelance" onclick="showView('freelance')">Freelance</button>
    <button class="nav-tab" id="tab-recruiter" onclick="showView('recruiter')">🏢 Recruiter</button>
    <button class="nav-tab" id="tab-pricing" onclick="showView('pricing')">Plans</button>
    <button class="nav-tab" id="tab-wallet" onclick="showView('wallet')">Wallet</button>
    <button class="nav-tab" id="tab-requests" onclick="showView('requests')">
      Requests<span class="ndot" id="reqDot"></span>
    </button>
    <button class="nav-tab" id="tab-messages" onclick="showView('messages')">
      Messages<span class="ndot" id="msgDot"></span>
    </button>
  </div>
  <div class="nav-right">
    <span id="navPlanBadge" class="public-badge badge-free">● Free</span>
    <div class="token-bar">🪙 <span id="navTokens">100</span></div>
    <div class="nav-stats">Live: <span id="liveCount">0</span></div>
    <button class="btn btn-primary" onclick="openPostModal()">+ Post Skill</button>
    <button class="btn btn-ghost" onclick="logOut()" style="font-size:0.65rem;padding:0.38rem 0.7rem">Sign Out</button>
  </div>
</nav>

<!-- ═══ BROWSE VIEW ═══ -->
<div class="view active" id="view-browse">
  <div class="hero">
    <div class="hero-eyebrow">
      <span class="hero-eyebrow-dot"></span>
      India's Premier Skill Exchange Network
    </div>
    <h1>Teach what you know.<br>Learn what you <span class="highlight">crave.</span></h1>
    <p class="hero-sub">Post a skill you can teach, name what you want in return. Zero money changes hands — only knowledge, craft, and expertise shared between professionals.</p>
    <div class="hero-cta">
      <button class="btn btn-primary" onclick="openPostModal()">Share your skill →</button>
      <button class="btn btn-blue" onclick="openVerifyModal()">🛡 Verify Portfolio</button>
      <button class="btn btn-ghost" onclick="document.getElementById('grid').scrollIntoView({behavior:'smooth'})">Explore listings ↓</button>
    </div>
    <div class="hero-stats">
      <div><div class="hstat-num" id="hs1">0<span>+</span></div><div class="hstat-label">Active Members</div></div>
      <div><div class="hstat-num" id="hs2">0<span>+</span></div><div class="hstat-label">Skill Categories</div></div>
      <div><div class="hstat-num" id="hs3">0<span>+</span></div><div class="hstat-label">Exchanges Made</div></div>
    </div>
  </div>

  <div class="section">
    <div class="section-bar">
      <span class="section-title">All Exchanges</span>
      <span class="count-chip" id="countBadge">Loading…</span>
    </div>
    <div class="toolbar">
      <div class="search-wrap">
        <span class="search-icon">⌕</span>
        <input type="text" id="searchInput" placeholder="Search skills, names, expertise…" oninput="renderBrowse()">
      </div>
      <select id="sortSelect" onchange="renderBrowse()">
        <option value="newest">Newest first</option>
        <option value="oldest">Oldest first</option>
        <option value="name">Name A–Z</option>
        <option value="top">Top rated</option>
      </select>
    </div>
    <div class="filters" id="filters"></div>
    <div class="grid" id="grid"></div>
  </div>
</div>

<!-- ═══ REQUESTS VIEW ═══ -->
<div class="view" id="view-requests">
  <div class="section">
    <div class="section-bar">
      <span class="section-title">Exchange Requests</span>
      <span class="count-chip" id="reqBadge">0</span>
    </div>
    <div id="incomingAlerts"></div>
    <div class="filters" style="margin-bottom:1.3rem">
      <button class="fchip on" id="rt-all" onclick="setReqTab('all')">All</button>
      <button class="fchip" id="rt-incoming" onclick="setReqTab('incoming')">Incoming</button>
      <button class="fchip" id="rt-sent" onclick="setReqTab('sent')">Sent</button>
    </div>
    <div class="req-list" id="reqList"></div>
  </div>
</div>

<!-- ═══ MESSAGES VIEW ═══ -->
<div class="view" id="view-messages">
  <div class="section">
    <div class="section-bar">
      <span class="section-title">Messages</span>
      <span class="count-chip" id="msgBadge">0 conversations</span>
    </div>
    <div class="inbox-wrap">
      <div class="tlist" id="tlist"></div>
      <div class="no-chat" id="noChat">
        <div class="no-chat-icon">💬</div>
        <div>Select a conversation to begin</div>
      </div>
      <div class="chat" id="chatPane" style="display:none"></div>
    </div>
  </div>
</div>
<!-- ═══ FREELANCE VIEW ═══ -->
<div class="view" id="view-freelance">
  <div class="section">
    <div class="freelance-hero">
      <h2>💼 Freelance Opportunities</h2>
      <p>Top companies hire verified Skillit professionals. Unlock this section by completing 5+ successful peer sessions and spending tokens to apply.</p>
      <div style="display:flex;gap:0.6rem;justify-content:center;flex-wrap:wrap">
        <span class="verified-badge" style="font-size:0.66rem;padding:0.22rem 0.7rem">✓ Verified Members Only</span>
        <span class="verified-badge edu-badge" style="font-size:0.66rem;padding:0.22rem 0.7rem">🎓 .edu Preferred</span>
        <span class="verified-badge ai-badge" style="font-size:0.66rem;padding:0.22rem 0.7rem">🤖 AI Portfolio Verified</span>
      </div>
    </div>

    <div class="escrow-info">
      🔒 <div><strong>Escrow Protected Payments</strong> — All freelance contracts on Skillit use escrow. Funds are released only after you confirm work delivery. Zero risk for first-time freelancers.</div>
    </div>

    <div class="tier-grid">
      <div class="tier-card">
        <div class="tier-name">Starter</div>
        <div class="tier-rate">₹500–₹1,500/hr</div>
        <div class="tier-req">5+ sessions · 25 tokens/apply</div>
      </div>
      <div class="tier-card active-tier">
        <div class="tier-name">Pro ⭐</div>
        <div class="tier-rate">₹1,500–₹4,000/hr</div>
        <div class="tier-req">15+ sessions · 50 tokens/apply</div>
      </div>
      <div class="tier-card">
        <div class="tier-name">Expert 🚀</div>
        <div class="tier-rate">₹4,000+/hr</div>
        <div class="tier-req">30+ sessions · 75 tokens/apply</div>
      </div>
    </div>

    <div id="freelanceLockBanner" class="lock-banner" style="display:none">
      🔐 <div>You need <strong>5+ successful peer sessions</strong> to unlock freelancing. Keep teaching and learning — you're building toward it!</div>
    </div>

    <div class="section-bar" style="margin-top:1rem">
      <span class="section-title">Open Positions</span>
      <span class="count-chip" id="jobCount">6 listings</span>
    </div>
    <div class="grid" id="jobsGrid"></div>
  </div>
</div>

<!-- ═══ WALLET VIEW ═══ -->
<div class="view" id="view-wallet">
  <div class="section">
    <div class="section-bar">
      <span class="section-title">Token Wallet</span>
      <span class="count-chip">Skillit Economy</span>
    </div>

    <div class="wallet-hero">
      <div style="font-family:'JetBrains Mono',monospace;font-size:0.7rem;color:var(--muted);margin-bottom:0.4rem">YOUR BALANCE</div>
      <div class="wallet-balance" id="walletBalance">100</div>
      <div class="wallet-sub">🪙 Skillit Tokens · Earn by teaching, spend to unlock features</div>
      <div style="display:flex;gap:0.6rem;justify-content:center;margin-top:1.2rem;flex-wrap:wrap">
        <button class="btn btn-primary btn-sm" onclick="earnTokens()">+ Teach a Session (+25 tokens)</button>
        <button class="btn btn-blue btn-sm" onclick="openVerifyModal()">🛡 Get Verified (+50 bonus)</button>
      </div>
    </div>

    <div class="section-bar"><span class="section-title" style="font-size:1rem">How to Earn</span></div>
    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:0.7rem;margin-bottom:2rem">
      <div class="verify-step"><div class="verify-step-title">Teach a Session</div><div style="font-size:0.76rem;color:var(--muted)">Earn <strong style="color:var(--accent)">25 tokens</strong> per successful peer teaching session.</div></div>
      <div class="verify-step"><div class="verify-step-title">Get .edu Verified</div><div style="font-size:0.76rem;color:var(--muted)">Bonus <strong style="color:var(--accent)">50 tokens</strong> for verifying with a .edu email address.</div></div>
      <div class="verify-step"><div class="verify-step-title">AI Portfolio Check</div><div style="font-size:0.76rem;color:var(--muted)">Bonus <strong style="color:var(--accent)">30 tokens</strong> for uploading & AI-verifying your documents.</div></div>
      <div class="verify-step"><div class="verify-step-title">Pro Subscription</div><div style="font-size:0.76rem;color:var(--muted)">₹499/mo Pro plan gives unlimited applications & <strong style="color:var(--accent)">200 tokens/mo</strong>.</div></div>
    </div>

    <div class="section-bar"><span class="section-title" style="font-size:1rem">Transaction History</span></div>
    <div class="tx-list" id="txList"></div>
  </div>
</div>

<!-- ═══ SESSIONS COMMAND CENTER ═══ -->
<div class="view" id="view-sessions">
  <div class="section">
    <div class="section-bar" style="margin-bottom:1rem">
      <span class="section-title">⚡ Sessions Command Center</span>
      <span class="count-chip" id="sessionsBadge">0 active</span>
    </div>

    <div id="ipWarning" class="fraud-warning">
      ⚠ <strong>Fraud Alert:</strong> Shared IP or MAC address detected between you and your session partner. This session has been flagged for review. Credits will not be released.
    </div>

    <!-- PANIC BUTTON — always visible at top -->
    <div class="panic-btn-wrap">
      <button class="panic-btn" onclick="openDisputeModal()">
        <span class="panic-btn-icon">🚨</span>
        DISPUTE / SAFETY — Report No-Show, Harassment, or Poor Quality
        <span class="panic-btn-icon">🚨</span>
      </button>
    </div>

    <div class="session-layout">
      <!-- LEFT: MAIN WORKFLOW -->
      <div class="session-main">

        <!-- 1. DUAL STATUS CHECK-IN -->
        <div class="dual-checkin-card">
          <div class="dual-checkin-title">● STEP 1 — DUAL STATUS CHECK-IN</div>
          <div class="dual-status-grid">
            <div class="status-user active-user" id="myStatusCard">
              <div class="status-avatar" style="background:linear-gradient(135deg,rgba(232,255,90,0.2),rgba(66,255,228,0.1));border:2px solid rgba(232,255,90,0.4)">A</div>
              <div class="status-name">You (Arjun)</div>
              <div class="status-role">Tutor · React Dev</div>
              <div class="status-indicator online" id="myStatusBadge">● Online</div>
              <button class="btn btn-sm" style="margin-top:0.6rem;border-color:rgba(66,255,228,0.4);color:var(--teal);font-size:0.6rem" onclick="doCheckin()">📍 GPS Check-In</button>
            </div>
            <div class="status-vs">↔</div>
            <div class="status-user waiting-user" id="partnerStatusCard">
              <div class="status-avatar" style="background:linear-gradient(135deg,rgba(255,140,66,0.15),rgba(181,123,255,0.1));border:2px solid rgba(255,140,66,0.3)">R</div>
              <div class="status-name">Rahul Verma</div>
              <div class="status-role">Student · Figma</div>
              <div class="status-indicator offline" id="partnerStatusBadge">⏳ Pending</div>
            </div>
          </div>
          <button class="start-session-btn" id="startSessionBtn" onclick="startSession()" disabled>
            ⚡ Start Session — Waiting for Partner Check-In
          </button>
          <div style="font-family:'JetBrains Mono',monospace;font-size:0.6rem;color:var(--muted);text-align:center;margin-top:0.6rem">
            Both users must be active and checked in to start the timer & lock escrow
          </div>
        </div>

        <!-- 2. ESCROW TIMER -->
        <div class="escrow-timer-card locked">
          <div class="escrow-header">
            <div class="escrow-label">⏱ STEP 2 — ESCROW TIMER</div>
            <div class="escrow-locked-badge" id="escrowLockBadge">🔒 Sparks Locked</div>
          </div>
          <div class="escrow-countdown-wrap">
            <div class="escrow-countdown" id="sessionCountdown">45:00</div>
            <div class="escrow-sub">remaining<br><span style="color:var(--orange);font-size:0.6rem" id="escrowMinNote">⚠ Min 30 min required</span></div>
          </div>
          <div class="escrow-progress-bar">
            <div class="escrow-progress-fill" id="escrowProgressFill" style="width:0%"></div>
          </div>
          <div class="escrow-meta">
            <div class="escrow-amount">Escrowed: <span>₹1,200</span></div>
            <div class="escrow-note">Session with Rahul Verma · React ↔ Figma</div>
          </div>
          <div class="escrow-min-note" id="escrowMinMsg">
            ⚠ Credits will not release until minimum session time is met
          </div>
        </div>

        <!-- 3. PROOF OF WORK UPLOAD -->
        <div class="proof-upload-card">
          <div class="proof-upload-title">📸 STEP 3 — PROOF OF WORK (TUTOR)</div>
          <div style="display:flex;align-items:center;gap:0.5rem;margin-bottom:0.6rem">
            <div class="proof-required-badge" id="proofRequiredBadge">● Required before credit release</div>
          </div>
          <div class="proof-upload-sub">Upload a photo or file showing the work done — notes, code, whiteboard, diagram. This prevents ghost sessions and ensures real teaching.</div>

          <div class="proof-drop-zone" id="proofDropZone" onclick="triggerProofUpload()">
            <div class="proof-drop-icon">📎</div>
            <div class="proof-drop-text">Drag & drop files here<br>or click to browse</div>
            <div class="proof-drop-cta">Photos, PDFs, Code Files — max 10MB each</div>
            <input type="file" id="proofFileInput" style="display:none" multiple accept="image/*,.pdf,.txt,.py,.js,.html,.css,.md" onchange="handleProofUpload(event)">
          </div>

          <div class="proof-thumbnails" id="proofThumbnails">
            <div class="proof-thumb" onclick="triggerProofUpload()" title="Add handwritten notes photo">
              <span>📝</span>
              <div class="proof-thumb-label">Notes Photo</div>
            </div>
            <div class="proof-thumb" onclick="triggerProofUpload()" title="Code screenshot">
              <span>💻</span>
              <div class="proof-thumb-label">Code Screenshot</div>
            </div>
            <div class="proof-thumb" onclick="triggerProofUpload()" title="Whiteboard photo">
              <span>🖊</span>
              <div class="proof-thumb-label">Whiteboard</div>
            </div>
            <div class="proof-thumb" onclick="triggerProofUpload()" title="Document scan">
              <span>📄</span>
              <div class="proof-thumb-label">Doc Scan</div>
            </div>
          </div>
        </div>

        <!-- 4. LEARNING SUMMARY — KEY TAKEAWAYS (STUDENT) -->
        <div class="takeaways-card">
          <div class="takeaways-title">📋 STEP 4 — KEY TAKEAWAYS (STUDENT)</div>
          <div class="takeaways-sub">List 3 key things you learned this session. All 3 must be filled before you can mark the session complete. This verifies genuine learning occurred.</div>

          <div class="takeaway-item">
            <div class="takeaway-label"><span class="takeaway-num" id="t1num">1</span> First key takeaway</div>
            <input type="text" class="takeaway-input" id="takeaway1" placeholder="e.g. Understood useState vs useReducer for complex state…" oninput="checkTakeaways()">
          </div>
          <div class="takeaway-item">
            <div class="takeaway-label"><span class="takeaway-num" id="t2num">2</span> Second key takeaway</div>
            <input type="text" class="takeaway-input" id="takeaway2" placeholder="e.g. Learned how Figma auto-layout works with constraints…" oninput="checkTakeaways()">
          </div>
          <div class="takeaway-item">
            <div class="takeaway-label"><span class="takeaway-num" id="t3num">3</span> Third key takeaway</div>
            <input type="text" class="takeaway-input" id="takeaway3" placeholder="e.g. Practiced prop drilling vs Context API in React…" oninput="checkTakeaways()">
          </div>

          <button class="complete-btn" id="completeBtn" onclick="completeSession()">
            🔒 Complete Session (Fill all 3 takeaways first)
          </button>
        </div>

        <!-- SESSION HISTORY -->
        <div class="section-bar" style="margin-top:0.5rem"><span class="section-title" style="font-size:1rem">Session History</span></div>
        <div id="sessionHistory" style="display:flex;flex-direction:column;gap:0.6rem;margin-top:0.7rem"></div>

      </div><!-- /session-main -->

      <!-- RIGHT SIDEBAR -->
      <div class="session-sidebar">

        <!-- RESOURCE LAUNCH -->
        <div class="resource-launch-card">
          <div style="font-family:'JetBrains Mono',monospace;font-size:0.68rem;color:var(--purple);letter-spacing:0.06em;margin-bottom:0.3rem">🔗 LAUNCH TOOLS</div>
          <div style="font-size:0.78rem;color:var(--text2);margin-bottom:0.5rem;line-height:1.5">Open shared tools directly from here during your session.</div>
          <div class="resource-btn-grid">
            <button class="resource-btn wb" onclick="launchTool('whiteboard')">
              <span class="resource-btn-icon">🖊</span>Whiteboard
            </button>
            <button class="resource-btn doc" onclick="launchTool('doc')">
              <span class="resource-btn-icon">📄</span>Shared Doc
            </button>
            <button class="resource-btn vid" onclick="launchTool('video')">
              <span class="resource-btn-icon">📹</span>Video Call
            </button>
            <button class="resource-btn code" onclick="launchTool('code')">
              <span class="resource-btn-icon">💻</span>Code Editor
            </button>
          </div>
        </div>

        <!-- POST-SESSION FEEDBACK -->
        <div class="feedback-card">
          <div style="font-family:'JetBrains Mono',monospace;font-size:0.68rem;color:var(--accent);letter-spacing:0.06em;margin-bottom:0.3rem">⭐ POST-SESSION FEEDBACK</div>
          <div style="font-size:0.76rem;color:var(--muted);margin-bottom:0.5rem;line-height:1.5">Rate your session and award impact badges — updates tutor's profile instantly.</div>

          <div style="font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--muted);margin-bottom:0.3rem">Overall Rating</div>
          <div class="stars-row" id="starsRow">
            <span class="star" data-star="1" onclick="rateStar(1)">⭐</span>
            <span class="star" data-star="2" onclick="rateStar(2)">⭐</span>
            <span class="star" data-star="3" onclick="rateStar(3)">⭐</span>
            <span class="star" data-star="4" onclick="rateStar(4)">⭐</span>
            <span class="star" data-star="5" onclick="rateStar(5)">⭐</span>
          </div>

          <div style="font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--muted);margin-bottom:0.5rem">Award Impact Badges</div>
          <div class="impact-badges-grid" id="impactBadgesGrid">
            <button class="impact-badge-btn" data-badge="Great Communicator" onclick="toggleBadge(this)">🗣 Great Communicator</button>
            <button class="impact-badge-btn" data-badge="Tech Expert" onclick="toggleBadge(this)">💡 Tech Expert</button>
            <button class="impact-badge-btn" data-badge="Patient Teacher" onclick="toggleBadge(this)">🧘 Patient Teacher</button>
            <button class="impact-badge-btn" data-badge="Highly Prepared" onclick="toggleBadge(this)">📚 Highly Prepared</button>
            <button class="impact-badge-btn" data-badge="Creative Thinker" onclick="toggleBadge(this)">🎨 Creative Thinker</button>
            <button class="impact-badge-btn" data-badge="Problem Solver" onclick="toggleBadge(this)">🔧 Problem Solver</button>
          </div>

          <button class="feedback-submit" id="feedbackSubmit" onclick="submitFeedback()">
            Submit Feedback (Rate first)
          </button>
        </div>

        <!-- WEIGHTED REPUTATION SIDEBAR -->
        <div style="background:var(--card);border:1px solid var(--border);border-radius:14px;padding:1.2rem;margin-bottom:1rem">
          <div style="font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--muted);letter-spacing:0.06em;margin-bottom:0.8rem">⚖ REPUTATION ENGINE</div>
          <div class="weighted-rep-box" style="border:none;padding:0;margin-top:0;background:transparent">
            <div class="rep-row"><span class="rep-label">Weighted Rating</span><span class="rep-val">4.8 / 5.0</span></div>
            <div class="rep-row"><span class="rep-label">Teaching Weight</span><span class="rep-val">100% ✓</span></div>
            <div class="rep-row"><span class="rep-label">Loop Sessions (Rahul)</span><span class="rep-val warn">2/2 reached</span></div>
            <div class="rep-row" style="border-bottom:none"><span class="rep-label">Total Verified Sessions</span><span class="rep-val" id="sessionRepCount">0</span></div>
          </div>
        </div>

      </div><!-- /session-sidebar -->
    </div><!-- /session-layout -->

  </div>
</div>

<!-- ═══ PRICING VIEW ═══ -->
<div class="view" id="view-pricing">
  <div class="section">
    <div style="text-align:center;padding:2rem 0 2.5rem">
      <div class="hero-eyebrow" style="margin:0 auto 1rem">Transparent Pricing</div>
      <h2 style="font-family:'Fraunces',serif;font-size:2.5rem;font-weight:900;letter-spacing:-1.5px;margin-bottom:0.8rem">Choose Your Plan</h2>
      <p style="color:var(--muted);font-size:0.9rem;max-width:480px;margin:0 auto">Start free. Upgrade when you're ready to unlock the full power of Skillit.</p>
    </div>

    <div class="membership-grid">
      <!-- FREE -->
      <div class="membership-card">
        <div class="plan-name">Free</div>
        <div class="plan-price" style="color:var(--muted)">₹0</div>
        <div class="plan-per">forever</div>
        <div class="plan-badge-row">
          <span class="plan-badge badge-free">Standard</span>
        </div>
        <p style="font-size:0.73rem;color:var(--muted);line-height:1.65;margin-bottom:1rem">Get started with skill exchange. Limited to 2 active requests at a time.</p>
        <ul class="plan-features">
          <li>Browse all skill listings</li>
          <li class="con" style="color:var(--muted)"><span style="color:var(--red)">Max 2 active requests</span></li>
          <li>Basic search placement</li>
          <li class="con" style="color:var(--muted)">Ads shown</li>
          <li class="con" style="color:var(--muted)">No recruiter access</li>
          <li>100 welcome tokens</li>
          <li>Standard verification badges</li>
        </ul>
        <button class="btn btn-ghost" style="width:100%;margin-top:1.2rem" onclick="setCurrentPlan('free')">Current Plan</button>
      </div>

      <!-- PRO -->
      <div class="membership-card pro">
        <div class="plan-name" style="color:var(--accent)">Pro ⭐</div>
        <div class="plan-price" style="color:var(--accent)">₹499</div>
        <div class="plan-per">/month</div>
        <div class="plan-badge-row">
          <span class="plan-badge badge-pro">🚀 Pro</span>
          <span class="plan-badge badge-verified">No Ads</span>
        </div>
        <p style="font-size:0.73rem;color:var(--muted);line-height:1.65;margin-bottom:1rem">For serious learners and tutors who want priority access and no limits.</p>
        <ul class="plan-features">
          <li>Browse all skill listings</li>
          <li><strong style="color:var(--accent)">Unlimited active requests</strong></li>
          <li><strong style="color:var(--accent)">Priority search placement</strong></li>
          <li><strong style="color:var(--accent)">Zero ads — ever</strong></li>
          <li><strong style="color:var(--accent)">Public ⭐ Pro badge</strong></li>
          <li><strong style="color:var(--accent)">200 tokens/month</strong></li>
          <li>Recruiter portal access (view)</li>
          <li>Priority support</li>
        </ul>
        <button class="btn btn-primary" style="width:100%;margin-top:1.2rem" onclick="upgradePlan('pro')">Upgrade to Pro →</button>
      </div>

      <!-- EXPERT -->
      <div class="membership-card expert">
        <div class="plan-name" style="color:var(--purple)">Expert 🔮</div>
        <div class="plan-price" style="color:var(--purple)">₹999</div>
        <div class="plan-per">/month</div>
        <div class="plan-badge-row">
          <span class="plan-badge badge-expert">🔮 Expert</span>
          <span class="plan-badge badge-verified">No Ads</span>
          <span class="plan-badge badge-recruiter">Recruiter Access</span>
        </div>
        <p style="font-size:0.73rem;color:var(--muted);line-height:1.65;margin-bottom:1rem">For professional tutors ready to work with recruiters and top companies.</p>
        <ul class="plan-features">
          <li>Everything in Pro</li>
          <li><strong style="color:var(--purple)">Public 🔮 Expert badge</strong></li>
          <li><strong style="color:var(--purple)">Recruiter leaderboard eligibility</strong></li>
          <li><strong style="color:var(--purple)">Bounty applications</strong></li>
          <li><strong style="color:var(--purple)">Expert-tier job access (₹4K+/hr)</strong></li>
          <li><strong style="color:var(--purple)">500 tokens/month</strong></li>
          <li><strong style="color:var(--purple)">Featured in search top-3</strong></li>
          <li>Dedicated account manager</li>
        </ul>
        <button class="btn btn-purple" style="width:100%;margin-top:1.2rem" onclick="upgradePlan('expert')">Upgrade to Expert →</button>
      </div>
    </div>

    <!-- Free user request limit banner -->
    <div class="free-limit-banner" id="freeLimitBanner">
      ⚠ <strong>Free Plan:</strong> You can only have 2 active requests at a time. Upgrade to Pro for unlimited requests, no ads, and priority placement.
      <button class="btn btn-primary btn-sm" style="margin-left:auto;flex-shrink:0" onclick="upgradePlan('pro')">Upgrade Now →</button>
    </div>

    <!-- Monetization breakdown -->
    <div class="commission-box">
      <div style="font-family:'Fraunces',serif;font-size:1.4rem;font-weight:700;margin-bottom:0.4rem">How Skillit Stays Free (Mostly)</div>
      <p style="font-size:0.78rem;color:var(--muted);margin-bottom:1.2rem">We believe in transparent monetization. Here's how we fund the platform:</p>
      <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1rem;text-align:left">
        <div style="background:var(--card);border:1px solid var(--border);border-radius:10px;padding:0.9rem">
          <div style="font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--accent);margin-bottom:0.3rem">SUBSCRIPTIONS</div>
          <div style="font-size:0.78rem;color:var(--text2)">Pro (₹499/mo) and Expert (₹999/mo) plans fund platform infrastructure.</div>
        </div>
        <div style="background:var(--card);border:1px solid var(--border);border-radius:10px;padding:0.9rem">
          <div style="font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--purple);margin-bottom:0.3rem">JOB POSTING FEES</div>
          <div style="font-size:0.78rem;color:var(--text2)">Companies pay ₹2,000–₹10,000 to post jobs or bounties in our Recruiter Portal.</div>
        </div>
        <div style="background:var(--card);border:1px solid var(--border);border-radius:10px;padding:0.9rem">
          <div style="font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--teal);margin-bottom:0.3rem">10% SUCCESS COMMISSION</div>
          <div style="font-size:0.78rem;color:var(--text2)">We take a 10% commission on every freelance contract signed through our platform.</div>
        </div>
        <div style="background:var(--card);border:1px solid var(--border);border-radius:10px;padding:0.9rem">
          <div style="font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--orange);margin-bottom:0.3rem">RECRUITER SUBSCRIPTIONS</div>
          <div style="font-size:0.78rem;color:var(--text2)">Talent teams subscribe for leaderboard access, advanced search, and direct outreach.</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ═══ RECRUITER PORTAL ═══ -->
<div class="view" id="view-recruiter">
  <div class="section">
    <div class="recruiter-hero">
      <div class="hero-eyebrow" style="margin:0 auto 1rem;display:inline-flex">🏢 For Companies & Talent Teams</div>
      <h2>Recruiter Portal</h2>
      <p style="color:var(--muted);font-size:0.88rem;max-width:560px;margin:0 auto;line-height:1.75">
        Access India's most verified student tutor leaderboard. Every profile is liveness-verified, device-locked, and session-authenticated. Post bounties, search by token expertise, and hire with confidence.
      </p>
      <div class="recruiter-stats">
        <div><div class="rstat-num">2,400+</div><div class="rstat-label">Verified Tutors</div></div>
        <div><div class="rstat-num">98.4%</div><div class="rstat-label">Identity Verified</div></div>
        <div><div class="rstat-num">₹0</div><div class="rstat-label">Until Contract Signed</div></div>
        <div><div class="rstat-num">10%</div><div class="rstat-label">Success Commission</div></div>
      </div>
      <div style="display:flex;gap:0.6rem;justify-content:center;flex-wrap:wrap">
        <button class="btn btn-purple" onclick="openRecruiterSignup()">🏢 Create Recruiter Account</button>
        <button class="btn btn-blue" onclick="openPostBounty()">💰 Post a Bounty</button>
      </div>
    </div>

    <!-- Recruiter subscription plans -->
    <div class="section-bar"><span class="section-title">Recruiter Plans</span></div>
    <div class="recruiter-sub-plans" style="margin-bottom:2rem">
      <div class="rsub-card">
        <div style="font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--muted);margin-bottom:0.3rem">STARTER</div>
        <div style="font-family:'Fraunces',serif;font-size:1.4rem;font-weight:900;color:var(--text)">₹4,999<span style="font-size:0.8rem;color:var(--muted)">/mo</span></div>
        <ul class="plan-features" style="margin-top:0.8rem">
          <li>View top-50 leaderboard</li>
          <li>5 direct outreach messages/mo</li>
          <li>Post 1 bounty/month</li>
          <li>Token-based search filters</li>
        </ul>
        <button class="btn btn-ghost" style="width:100%;margin-top:1rem" onclick="toast('Recruiter Starter plan selected!')">Get Started</button>
      </div>
      <div class="rsub-card featured">
        <div style="font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--purple);margin-bottom:0.3rem">GROWTH ⭐ POPULAR</div>
        <div style="font-family:'Fraunces',serif;font-size:1.4rem;font-weight:900;color:var(--purple)">₹12,999<span style="font-size:0.8rem;color:var(--muted)">/mo</span></div>
        <ul class="plan-features" style="margin-top:0.8rem">
          <li>Full leaderboard access (all 2,400+)</li>
          <li>Unlimited direct outreach</li>
          <li>Post unlimited bounties</li>
          <li>Advanced token & skill search</li>
          <li>ATS integration (CSV export)</li>
          <li>10% commission on placements</li>
        </ul>
        <button class="btn btn-purple" style="width:100%;margin-top:1rem" onclick="toast('Growth plan selected! Our team will contact you.')">Contact Sales</button>
      </div>
    </div>

    <!-- Top Tutor Leaderboard -->
    <div class="section-bar">
      <span class="section-title">🏆 Verified Tutor Leaderboard</span>
      <div style="display:flex;gap:0.5rem;align-items:center">
        <input type="text" id="leaderboardSearch" placeholder="Search by token/skill…" style="background:var(--surface);border:1px solid var(--border2);border-radius:8px;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.7rem;padding:0.4rem 0.7rem;outline:none;width:180px" oninput="renderLeaderboard()">
        <span class="count-chip">Top Rated · Verified</span>
      </div>
    </div>
    <div class="leaderboard" id="leaderboardList"></div>

    <!-- Active Bounties -->
    <div class="section-bar" style="margin-top:2rem">
      <span class="section-title">💰 Active Bounties</span>
      <button class="btn btn-purple btn-sm" onclick="openPostBounty()">+ Post Bounty</button>
    </div>
    <p style="font-size:0.76rem;color:var(--muted);margin-bottom:1.2rem">Companies post "Skill Bounties" — specific expertise needs. Expert-tier Skillit users can apply. We charge ₹2,000–₹10,000 per posting plus 10% on successful hires.</p>
    <div class="bounty-grid" id="bountyGrid"></div>
  </div>
</div>

</div><!-- /wrap -->

<!-- ═══ AUTH OVERLAY ═══ -->
<div class="auth-overlay" id="authOverlay">
  <!-- LEFT BRAND PANEL -->
  <div class="auth-brand">
    <div>
      <div class="auth-brand-logo"><span>S</span>killit</div>
      <div class="auth-brand-tagline">● India's Most Verified Skill Exchange</div>
    </div>
    <div>
      <div class="auth-brand-headline">Trade Skills.<br>Build <span class="hl">Futures.</span><br>Get Hired.</div>
      <div class="auth-brand-desc">The only peer-learning platform where every session is liveness-verified, escrow-protected, and connected to real hiring pipelines.</div>
      <div class="auth-trust-pills" style="margin-top:1.5rem">
        <div class="auth-trust-pill">
          <div class="auth-trust-icon">🛡</div>
          <div class="auth-trust-text"><strong>Device-Locked Identity</strong>One account per verified human. No fakes, no farms.</div>
        </div>
        <div class="auth-trust-pill">
          <div class="auth-trust-icon">🔒</div>
          <div class="auth-trust-text"><strong>Escrow-Protected Sessions</strong>Credits only release after proof of work & summaries.</div>
        </div>
        <div class="auth-trust-pill">
          <div class="auth-trust-icon">🏢</div>
          <div class="auth-trust-text"><strong>Recruiter Portal Access</strong>Top tutors get hired by Razorpay, Swiggy, CRED & more.</div>
        </div>
      </div>
    </div>
    <div class="auth-brand-stats">
      <div class="abstat"><div class="abstat-num">2,<span>400</span>+</div><div class="abstat-label">Verified tutors</div></div>
      <div class="abstat"><div class="abstat-num">98.<span>4</span>%</div><div class="abstat-label">Identity verified</div></div>
      <div class="abstat"><div class="abstat-num">₹<span>0</span></div><div class="abstat-label">Until hired</div></div>
    </div>
  </div>

  <!-- RIGHT FORM PANEL -->
  <div class="auth-form-panel">
  <div class="auth-box">
    <div class="auth-mobile-logo"><span>S</span>killit</div>
    <div class="auth-box-header">
      <div class="auth-box-title" id="authBoxTitle">Welcome back</div>
      <div class="auth-box-sub" id="authBoxSub">Sign in with your institutional email to continue.</div>
    </div>

    <div class="auth-security-bar">
      🛡 <div><strong>Zero-Knowledge Auth</strong> — Passwordless OTP to .edu emails. Liveness scan on new devices. Device fingerprint prevents multi-account fraud.</div>
    </div>

    <div class="auth-tabs">
      <button class="auth-tab-btn active" id="authTabSignIn" onclick="switchAuthTab('signin')">Sign In</button>
      <button class="auth-tab-btn" id="authTabSignUp" onclick="switchAuthTab('signup')">Create Account</button>
    </div>

    <!-- SIGN IN FORM -->
    <div id="authSignIn">
      <div class="form-group" style="margin-bottom:1rem">
        <label class="form-label">Institutional / .edu Email</label>
        <input id="authEmail" type="email" placeholder="yourname@iit.ac.in or yourname@university.edu" class="auth-input" style="background:var(--surface);border:1px solid var(--border2);border-radius:10px;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.76rem;padding:0.72rem 1rem;width:100%;outline:none;transition:all 0.18s">
        <div style="font-family:'JetBrains Mono',monospace;font-size:0.6rem;color:var(--muted);margin-top:0.3rem">✉ Passwordless OTP will be sent to this email</div>
      </div>

      <div id="authOtpGroup" style="display:none;margin-bottom:1rem">
        <label class="form-label">Enter OTP</label>
        <input id="authOtp" type="text" placeholder="6-digit code" maxlength="6" style="background:var(--surface);border:1px solid rgba(66,255,228,0.4);border-radius:10px;color:var(--teal);font-family:'JetBrains Mono',monospace;font-size:1.1rem;padding:0.72rem 1rem;width:100%;outline:none;text-align:center;letter-spacing:0.35em">
        <div style="font-family:'JetBrains Mono',monospace;font-size:0.6rem;color:var(--muted);margin-top:0.3rem" id="authOtpHint"></div>
      </div>

      <div id="authLivenessBox" class="liveness-box" style="display:none">
        <div class="liveness-icon">👁</div>
        <div class="liveness-text">
          <strong>Security Check — New Device Detected</strong><br>
          Biometric/Liveness verification required.<br>
          This prevents stolen ID usage and ensures you are the account holder.
        </div>
        <button class="btn btn-blue btn-sm" style="margin-top:0.8rem" onclick="simulateLiveness()">Start Face Scan →</button>
        <div id="livenessResult" style="margin-top:0.5rem;font-family:'JetBrains Mono',monospace;font-size:0.65rem"></div>
      </div>

      <div id="authSignInBtns">
        <button class="btn btn-primary" style="width:100%;margin-bottom:0.7rem;padding:0.8rem 1.1rem;font-size:0.8rem" onclick="authSendOtp()">Send OTP →</button>
        <div id="authConfirmBtn" style="display:none">
          <button class="btn btn-primary" style="width:100%;padding:0.8rem 1.1rem;font-size:0.8rem" onclick="authConfirmOtp()">Verify & Sign In →</button>
        </div>
      </div>

      <!-- Skill Toggle -->
      <div style="margin-top:1rem">
        <div class="auth-divider"><span>I want to</span></div>
        <div class="skill-toggle-wrap">
          <button class="skill-toggle-btn active" id="modeLearn" onclick="setSkillMode('learn')">🎓 Learn</button>
          <button class="skill-toggle-btn" id="modeTeach" onclick="setSkillMode('teach')">📚 Teach</button>
          <button class="skill-toggle-btn" id="modeBoth" onclick="setSkillMode('both')">⚡ Both</button>
        </div>
      </div>
    </div>

    <!-- SIGN UP FORM -->
    <div id="authSignUp" style="display:none">
      <div class="form-group" style="margin-bottom:0.8rem">
        <label class="form-label">Full Name</label>
        <input id="signupName" type="text" placeholder="Your full name" style="background:var(--surface);border:1px solid var(--border2);border-radius:10px;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.76rem;padding:0.72rem 1rem;width:100%;outline:none">
      </div>
      <div class="form-group" style="margin-bottom:0.8rem">
        <label class="form-label">Institutional Email (.edu preferred)</label>
        <input id="signupEmail" type="email" placeholder="yourname@university.edu" style="background:var(--surface);border:1px solid var(--border2);border-radius:10px;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.76rem;padding:0.72rem 1rem;width:100%;outline:none">
      </div>

      <div class="liveness-box" style="margin-bottom:0.8rem">
        <div class="liveness-icon">🔬</div>
        <div class="liveness-text">
          <strong>Liveness Verification (Required for New Accounts)</strong><br>
          Facial scan confirms you're a real, active student. Renews every 30 days.<br>
          Your face data is never stored — only a verification hash.
        </div>
        <button class="btn btn-blue btn-sm" style="margin-top:0.8rem" onclick="simulateLiveness()" id="signupLivenessBtn">Start Liveness Check →</button>
        <div id="signupLivenessResult" style="margin-top:0.5rem;font-family:'JetBrains Mono',monospace;font-size:0.65rem"></div>
      </div>

      <div class="antiscam-box">
        <label>
          <input type="checkbox" id="antiscamCheck">
          <span>I agree to the <strong>Anti-Scam Agreement</strong>. I understand that sharing accounts, using fake IDs, IP manipulation, or circular session farming will result in <strong>permanent ban</strong> with full legal consequences. This account is locked to my device.</span>
        </label>
      </div>

      <button class="btn btn-primary" style="width:100%;margin-bottom:0.5rem;padding:0.8rem 1.1rem;font-size:0.8rem" onclick="authSignUp()">Create Account & Verify →</button>
      <div class="device-lock-notice">🔒 This account will be locked to Device ID: <span style="color:var(--accent)" id="deviceIdDisplay">FP-</span></div>
      <div class="otp-renewals">⟳ Identity refresh required every 30 days via .edu OTP</div>
    </div>

    <a href="#" class="recruiter-portal-link" onclick="switchToRecruiterAuth()">🏢 I'm a Recruiter / Company — Access Talent Portal →</a>
  </div>
  </div><!-- /auth-form-panel -->
</div>

<!-- DISPUTE MODAL -->
<div class="overlay" id="disputeOverlay" onclick="closeBg(event,'disputeOverlay')">
  <div class="modal">
    <div class="modal-title">⚠ Raise a Dispute</div>
    <p style="font-size:0.78rem;color:var(--muted);margin-bottom:1rem;line-height:1.65">Our mediation team will review within 2 hours. Credits are frozen until resolved.</p>
    <div class="form-group">
      <label class="form-label">Reason for Dispute</label>
      <select style="width:100%;background:var(--surface);border:1px solid var(--border2);border-radius:10px;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.72rem;padding:0.62rem 0.9rem;outline:none">
        <option>Tutor did not show up</option>
        <option>Session quality was inadequate</option>
        <option>Learning summary not submitted</option>
        <option>Suspected IP manipulation / fraud</option>
        <option>Circular session farming suspected</option>
        <option>Other</option>
      </select>
    </div>
    <div class="form-group">
      <label class="form-label">Evidence / Description</label>
      <textarea rows="3" placeholder="Describe what happened in detail…" style="width:100%;background:var(--surface);border:1px solid var(--border2);border-radius:10px;color:var(--text);font-family:'Plus Jakarta Sans',sans-serif;font-size:0.78rem;padding:0.7rem 0.9rem;outline:none;resize:vertical"></textarea>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('disputeOverlay')">Cancel</button>
      <button class="btn btn-danger" onclick="submitDispute()">Submit Dispute →</button>
    </div>
  </div>
</div>

<!-- LEARNING SUMMARY MODAL -->
<div class="overlay" id="summaryOverlay" onclick="closeBg(event,'summaryOverlay')">
  <div class="modal">
    <div class="modal-title">📝 Session Learning Summary</div>
    <div style="background:var(--blue-dim);border:1px solid rgba(77,170,255,0.2);border-radius:10px;padding:0.85rem;margin-bottom:1rem;font-family:'JetBrains Mono',monospace;font-size:0.68rem;color:var(--blue)">
      ⓘ Both parties must submit a summary (min 100 characters) before credits are released. This prevents lazy fraud and ensures genuine learning occurred.
    </div>
    <div class="form-group">
      <label class="form-label">What did you learn / teach today? (min 100 chars)</label>
      <textarea id="summaryText" rows="5" placeholder="Describe the topics covered, skills practiced, any breakthroughs or challenges, and what you plan to study next session…" style="width:100%;background:var(--surface);border:1px solid var(--border2);border-radius:10px;color:var(--text);font-family:'Plus Jakarta Sans',sans-serif;font-size:0.78rem;padding:0.7rem 0.9rem;outline:none;resize:vertical"></textarea>
      <div id="summaryCharCount" style="font-family:'JetBrains Mono',monospace;font-size:0.62rem;color:var(--muted);margin-top:0.3rem;text-align:right">0 / 100 min characters</div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('summaryOverlay')">Cancel</button>
      <button class="btn btn-primary" onclick="submitSummary()">Submit & Release Credits →</button>
    </div>
  </div>
</div>

<!-- POST BOUNTY MODAL -->
<div class="overlay" id="bountyOverlay" onclick="closeBg(event,'bountyOverlay')">
  <div class="modal wide">
    <div class="modal-title">💰 Post a Skill Bounty</div>
    <div style="background:var(--purple-dim);border:1px solid rgba(181,123,255,0.2);border-radius:10px;padding:0.85rem;margin-bottom:1rem;font-family:'JetBrains Mono',monospace;font-size:0.68rem;color:var(--purple)">
      💡 Job posting fee: ₹2,000–₹10,000 based on bounty size. +10% success commission on hire. Expert-tier Skillit users can apply using their tokens.
    </div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Company Name</label>
        <input type="text" id="bountyCompany" placeholder="e.g. Razorpay, Swiggy, Your Startup">
      </div>
      <div class="form-group">
        <label class="form-label">Role / Title</label>
        <input type="text" id="bountyTitle" placeholder="e.g. Freelance React Developer">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Reward / Budget</label>
        <input type="text" id="bountyReward" placeholder="e.g. ₹50,000 project or ₹2,000/hr">
      </div>
      <div class="form-group">
        <label class="form-label">Token Skill Requirements</label>
        <input type="text" id="bountyTokens" placeholder="e.g. React, TypeScript, Node.js">
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Description</label>
      <textarea id="bountyDesc" rows="3" placeholder="Describe the project, required expertise, timeline, and deliverables…"></textarea>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('bountyOverlay')">Cancel</button>
      <button class="btn btn-purple" onclick="submitBounty()">Post Bounty (₹2,000 fee) →</button>
    </div>
  </div>
</div>

<!-- ═══ CHATBOT ═══ -->
<button class="chatbot-btn" id="chatbotToggle" onclick="toggleChatbot()" title="Skillit AI Assistant">🤖</button>
<div class="chatbot-window" id="chatbotWindow">
  <div class="chatbot-header">
    <div style="width:28px;height:28px;border-radius:50%;background:var(--accent);display:flex;align-items:center;justify-content:center;font-size:0.9rem">🤖</div>
    <div>
      <div class="chatbot-header-name">Skillit AI</div>
      <div class="chatbot-header-status">● Online · Here to help</div>
    </div>
    <button class="chatbot-close" onclick="toggleChatbot()">✕</button>
  </div>
  <div class="chatbot-msgs" id="chatbotMsgs"></div>
  <div class="chatbot-input">
    <input id="chatbotIn" type="text" placeholder="Ask anything…" onkeydown="chatbotKey(event)">
    <button class="btn btn-primary" onclick="sendChatbot()">→</button>
  </div>
</div>

<!-- ═══ SITE FOOTER ═══ -->
<footer class="site-footer">
  <div style="font-family:'Fraunces',serif;font-size:1rem;font-weight:700;margin-bottom:0.8rem;opacity:0.6">Skillit</div>
  <p style="font-size:0.75rem;color:var(--muted);margin-bottom:1.2rem">Are you a company looking to hire verified talent from our platform?</p>
  <a href="/cdn-cgi/l/email-protection#f49c9198989bb4879f9d98989d80da979b99" class="contact-btn">📧 Contact Us</a>
  <div class="footer-email"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2f474a4343406f5c44464343465b014c4042">[email&#160;protected]</a></div>
  <div class="footer-tagline">We partner with companies to bring curated freelance opportunities to our verified members.</div>
</footer>

<!-- ═══ MODALS ═══ -->

<!-- POST SKILL -->
<div class="overlay" id="postOverlay" onclick="closeBg(event,'postOverlay')">
  <div class="modal">
    <div class="modal-title" id="postTitle">Post a Skill Exchange</div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Full Name</label>
        <input id="fName" type="text" placeholder="e.g. Aarav Sharma">
      </div>
      <div class="form-group">
        <label class="form-label">Contact Email</label>
        <input id="fEmail" type="email" placeholder="aarav@email.com">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Category</label>
        <select id="fCat">
          <option>Technology</option><option>Design</option><option>Music</option>
          <option>Languages</option><option>Fitness</option><option>Business</option>
          <option>Culinary</option><option>Writing</option><option>Arts & Crafts</option>
          <option>Finance</option><option>Science</option><option>Photography</option>
          <option>Performing Arts</option><option>Sports</option><option>Wellness</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Expertise Level</label>
        <select id="fLevel">
          <option>Beginner</option><option>Intermediate</option><option>Advanced</option><option>Expert</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">I Can Teach</label>
      <input id="fOffer" type="text" placeholder="e.g. React Development, Classical Guitar, Yoga…">
    </div>
    <div class="form-group">
      <label class="form-label">I Want to Learn</label>
      <input id="fWant" type="text" placeholder="e.g. Machine Learning, Photography, Cooking…">
    </div>
    <div class="form-group">
      <label class="form-label">Your Portfolio / Notable Work</label>
      <input id="fPortfolio" type="text" placeholder="e.g. Built 3 apps at Google, 10 years at ISRO…">
    </div>
    <div class="form-group">
      <label class="form-label">Bio & Availability</label>
      <textarea id="fDesc" rows="3" placeholder="Describe your experience, teaching style, and when you're available…"></textarea>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('postOverlay')">Cancel</button>
      <button class="btn btn-primary" onclick="submitSkill()">Post Exchange</button>
    </div>
  </div>
</div>

<!-- CONNECT -->
<div class="overlay" id="connectOverlay" onclick="closeBg(event,'connectOverlay')">
  <div class="modal">
    <div class="modal-title">Send Exchange Request</div>
    <div class="cprev" id="cprev"></div>
    <div class="form-group">
      <label class="form-label">Your Name</label>
      <input id="cName" type="text" placeholder="Your full name">
    </div>
    <div class="form-group">
      <label class="form-label">Your Email</label>
      <input id="cEmail" type="email" placeholder="your@email.com">
    </div>
    <div class="form-group">
      <label class="form-label">What You Offer in Return</label>
      <input id="cSkill" type="text" placeholder="e.g. I can teach Advanced Python">
    </div>
    <div class="form-group">
      <label class="form-label">Your Message</label>
      <textarea id="cMsg" rows="3" placeholder="Introduce yourself, propose a schedule, share your background…"></textarea>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('connectOverlay')">Cancel</button>
      <button class="btn btn-primary" onclick="sendRequest()">Send Request</button>
    </div>
  </div>
</div>

<!-- PROFILE -->
<div class="overlay" id="profileOverlay" onclick="closeBg(event,'profileOverlay')">
  <div class="modal wide" id="profileModal"></div>
</div>

<!-- INCOMING DETAIL -->
<div class="overlay" id="incomingOverlay" onclick="closeBg(event,'incomingOverlay')">
  <div class="modal" id="incomingModal"></div>
</div>

<!-- CONFIRM DELETE -->
<div class="overlay" id="delOverlay">
  <div class="modal narrow">
    <div class="modal-title">Remove listing?</div>
    <p style="font-size:0.8rem;color:var(--muted);line-height:1.65;margin-bottom:1rem">This will permanently delete your skill exchange listing and cannot be undone.</p>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('delOverlay')">Keep it</button>
      <button class="btn btn-danger" onclick="confirmDelete()">Yes, Delete</button>
    </div>
  </div>
</div>

<!-- VERIFY PORTFOLIO -->
<div class="overlay" id="verifyOverlay" onclick="closeBg(event,'verifyOverlay')">
  <div class="modal wide">
    <div class="modal-title">🛡 Verify Your Portfolio</div>
    <p style="font-size:0.78rem;color:var(--muted);margin-bottom:1.2rem;line-height:1.65">Build trust with other users. Verified profiles get more connections, unlock freelancing, and earn bonus tokens.</p>

    <!-- Step 1: .edu email -->
    <div class="verify-step">
      <div class="verify-step-title">Step 1 — Academic Verification (.edu email)</div>
      <div class="form-group" style="margin-bottom:0.5rem">
        <label class="form-label">Enter Your .edu Email Address</label>
        <input id="vEduEmail" type="email" placeholder="yourname@university.edu">
      </div>
      <div id="eduStatus" style="font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--muted);margin-bottom:0.4rem"></div>
      <button class="btn btn-blue btn-sm" onclick="verifyEdu()">Send Verification Code</button>
      <div class="form-group" style="margin-top:0.7rem;display:none" id="eduCodeGroup">
        <label class="form-label">Enter 6-digit Code Sent to Your Email</label>
        <input id="vEduCode" type="text" placeholder="e.g. 482930" maxlength="6">
        <button class="btn btn-blue btn-sm" style="margin-top:0.4rem" onclick="confirmEduCode()">Confirm Code</button>
      </div>
    </div>

    <!-- Step 2: Document Upload -->
    <div class="verify-step">
      <div class="verify-step-title">Step 2 — AI Document Verification</div>
      <p style="font-size:0.73rem;color:var(--muted);margin-bottom:0.7rem;line-height:1.6">Upload certificates, diplomas, portfolio screenshots, or professional IDs. Our AI will analyze authenticity and skill credibility.</p>
      <div class="upload-zone" onclick="document.getElementById('docUpload').click()">
        <div style="font-size:2rem">📎</div>
        <div class="upload-zone-text" id="uploadLabel">Click to upload documents (PDF, PNG, JPG — max 5MB each)</div>
        <input type="file" id="docUpload" style="display:none" multiple accept=".pdf,.png,.jpg,.jpeg" onchange="handleDocUpload(event)">
      </div>
      <div class="ai-analysis-bar" id="aiAnalysis">
        <div style="margin-bottom:0.4rem">🤖 AI Analysis in progress…</div>
        <div style="background:rgba(181,123,255,0.1);border-radius:2px;height:4px;overflow:hidden">
          <div class="progress-fill" id="progressFill" style="width:0%"></div>
        </div>
        <div id="aiResult" style="margin-top:0.5rem"></div>
      </div>
      <div id="uploadedDocs" style="margin-top:0.6rem;display:flex;flex-direction:column;gap:0.35rem"></div>
    </div>

    <div id="verifyBonus" style="display:none;background:var(--teal-dim);border:1px solid rgba(66,255,228,0.25);border-radius:10px;padding:0.85rem;font-family:'JetBrains Mono',monospace;font-size:0.7rem;color:var(--teal);margin-top:0.8rem">
      ✓ Verification complete! <strong>+50 bonus tokens</strong> have been added to your wallet. Your profile now shows verified badges.
    </div>

    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('verifyOverlay')">Close</button>
      <button class="btn btn-primary" onclick="finalizeVerify()">Complete Verification</button>
    </div>
  </div>
</div>

<!-- APPLY FOR JOB -->
<div class="overlay" id="applyOverlay" onclick="closeBg(event,'applyOverlay')">
  <div class="modal">
    <div class="modal-title" id="applyTitle">Apply for Position</div>
    <div id="applyJobPreview" style="background:var(--card);border:1px solid var(--border2);border-radius:10px;padding:0.85rem;margin-bottom:1rem;font-size:0.78rem;color:var(--muted);line-height:1.6"></div>
    <div style="background:var(--orange-dim);border:1px solid rgba(255,140,66,0.3);border-radius:10px;padding:0.75rem;font-family:'JetBrains Mono',monospace;font-size:0.68rem;color:var(--orange);margin-bottom:1rem" id="applyCostBanner"></div>
    <div class="form-group">
      <label class="form-label">Cover Letter</label>
      <textarea id="applyCover" rows="4" placeholder="Tell the company about your relevant skills, projects, and why you're a great fit…"></textarea>
    </div>
    <div class="form-group">
      <label class="form-label">Portfolio / GitHub / Behance Link</label>
      <input id="applyPortfolioLink" type="url" placeholder="https://…">
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('applyOverlay')">Cancel</button>
      <button class="btn btn-primary" id="applySubmitBtn" onclick="submitJobApplication()">Apply & Spend Tokens →</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
// ═══════════════════════════════════════════════════
// CANVAS BACKGROUND — fluid gravity particles
// ═══════════════════════════════════════════════════
(()=>{
  const C=document.getElementById('bg-canvas');
  const X=C.getContext('2d');
  let W,H,mx=-999,my=-999;
  const resize=()=>{W=C.width=innerWidth;H=C.height=innerHeight;};
  resize();addEventListener('resize',resize);
  addEventListener('mousemove',e=>{mx=e.clientX;my=e.clientY;});
  addEventListener('mouseleave',()=>{mx=-999;my=-999;});
  addEventListener('touchmove',e=>{mx=e.touches[0].clientX;my=e.touches[0].clientY;},{passive:true});

  const PAL=[
    [232,255,90],[255,77,77],[77,170,255],
    [181,123,255],[255,140,66],[66,255,228]
  ];

  class P{
    constructor(){this.init(true);}
    init(rand){
      this.x=rand?Math.random()*W:Math.random()*W;
      this.y=rand?Math.random()*H:H+10;
      this.vx=(Math.random()-.5)*.5;
      this.vy=-(Math.random()*.6+.15);
      this.r=Math.random()*1.8+.4;
      this.a=Math.random()*.45+.05;
      this.c=PAL[~~(Math.random()*PAL.length)];
      this.life=rand?~~(Math.random()*600):0;
      this.maxLife=350+~~(Math.random()*450);
    }
    tick(){
      const dx=mx-this.x,dy=my-this.y;
      const d=Math.hypot(dx,dy);
      if(d<200&&d>0){
        const f=(200-d)/200*.9;
        this.vx+=dx/d*f*.09;
        this.vy+=dy/d*f*.09;
      }
      this.vx+=(Math.random()-.5)*.018;
      this.vy+=-.06+Math.random()*.025;
      this.vx*=.982;this.vy*=.982;
      this.x+=this.vx;this.y+=this.vy;
      this.life++;
      if(this.x<-8)this.x=W+8;
      if(this.x>W+8)this.x=-8;
      if(this.y<-15||this.life>this.maxLife)this.init(false);
    }
    draw(){
      const fade=Math.min(1,this.life/50)*Math.min(1,(this.maxLife-this.life)/50);
      X.beginPath();
      X.arc(this.x,this.y,this.r,0,Math.PI*2);
      X.fillStyle=`rgba(${this.c},${this.a*fade})`;
      X.fill();
    }
  }

  const pts=[];for(let i=0;i<150;i++)pts.push(new P());

  const loop=()=>{
    X.clearRect(0,0,W,H);
    // draw lines
    for(let i=0;i<pts.length;i++){
      for(let j=i+1;j<pts.length;j++){
        const a=pts[i],b=pts[j];
        const d=Math.hypot(a.x-b.x,a.y-b.y);
        if(d<85){
          X.beginPath();X.moveTo(a.x,a.y);X.lineTo(b.x,b.y);
          X.strokeStyle=`rgba(77,170,255,${(1-d/85)*.08})`;
          X.lineWidth=.5;X.stroke();
        }
      }
    }
    pts.forEach(p=>{p.tick();p.draw();});
    requestAnimationFrame(loop);
  };loop();
})();

// ═══════════════════════════════════════════════════
// CUSTOM CURSOR
// ═══════════════════════════════════════════════════
(()=>{
  const cur=document.getElementById('cursor');
  const ring=document.getElementById('cursor-ring');
  let rx=0,ry=0;
  document.addEventListener('mousemove',e=>{
    cur.style.left=e.clientX+'px';cur.style.top=e.clientY+'px';
    rx+=(e.clientX-rx)*.14;ry+=(e.clientY-ry)*.14;
    ring.style.left=rx+'px';ring.style.top=ry+'px';
  });
  const expand=()=>{ring.style.width='60px';ring.style.height='60px';ring.style.opacity='.5';};
  const shrink=()=>{ring.style.width='36px';ring.style.height='36px';ring.style.opacity='1';};
  document.querySelectorAll('button,a,.card,.avatar,.user-pill').forEach(el=>{
    el.addEventListener('mouseenter',expand);
    el.addEventListener('mouseleave',shrink);
  });
  const tick=()=>{
    rx+=(parseFloat(cur.style.left||0)-rx)*.14;
    ry+=(parseFloat(cur.style.top||0)-ry)*.14;
    ring.style.left=rx+'px';ring.style.top=ry+'px';
    requestAnimationFrame(tick);
  };tick();
})();

// ═══════════════════════════════════════════════════
// CARD MOUSE GLOW
// ═══════════════════════════════════════════════════
document.addEventListener('mousemove',e=>{
  document.querySelectorAll('.card').forEach(card=>{
    const r=card.getBoundingClientRect();
    const x=((e.clientX-r.left)/r.width*100).toFixed(1);
    const y=((e.clientY-r.top)/r.height*100).toFixed(1);
    card.style.setProperty('--mx',x+'%');
    card.style.setProperty('--my',y+'%');
  });
});

// ═══════════════════════════════════════════════════
// DATA LAYER
// ═══════════════════════════════════════════════════
const PALETTE=[
  ['#e8ff5a','#0a0b0d'],['#ff4d4d','#fff'],['#4daaff','#0a0b0d'],
  ['#b57bff','#fff'],['#ff8c42','#0a0b0d'],['#42ffe4','#0a0b0d'],
  ['#ff6eb4','#0a0b0d'],['#a3ff6e','#0a0b0d'],['#ffd166','#0a0b0d'],['#6effd5','#0a0b0d']
];
const ME='You';

const store={
  get(k){try{return JSON.parse(localStorage.getItem(k));}catch{return null;}},
  set(k,v){localStorage.setItem(k,JSON.stringify(v));}
};

let skills  = store.get('sk2_skills')   || buildSkills();
let requests= store.get('sk2_reqs')     || buildRequests();
let msgs    = store.get('sk2_msgs')     || {};
let threads = store.get('sk2_threads')  || [];

let editId=null,delTarget=null,connTarget=null;
let activeCat='All',activeReqTab='all',activeThread=null;

function saveAll(){
  store.set('sk2_skills',skills);
  store.set('sk2_reqs',requests);
  store.set('sk2_msgs',msgs);
  store.set('sk2_threads',threads);
}

function buildSkills(){
  const n=Date.now();
  const d=(days)=>n-86400000*days;
  return [
{id:1,name:'Aarav Sharma',email:'aarav.sharma@gmail.com',category:'Technology',level:'Expert',offer:'Full-Stack Development (React, Node.js, AWS)',want:'Carnatic Classical Violin',desc:'8 years building production web apps. Led engineering at two Bengaluru startups. Expert in system design, microservices, and cloud architecture.',portfolio:['Built SaaS platform serving 200k users','AWS Solutions Architect certified','Open-source contributor (4k GitHub stars)','Mentored 50+ junior developers at Thoughtworks'],skills:['React','Node.js','PostgreSQL','AWS','Docker','GraphQL'],top:true,color:0,ts:d(18)},
{id:2,name:'Priya Iyer',email:'priya.iyer@gmail.com',category:'Music',level:'Expert',offer:'Carnatic Classical Violin & Music Theory',want:'Machine Learning & Deep Learning',desc:'Performing Carnatic violinist trained under the Lalgudi school. 18 years of practice. Teaches beginners to advanced students, ragas, kritis, and improvisation.',portfolio:['AIR (All India Radio) Grade A artist','Performed at Margazhi Music Festival, Chennai','Trained under Lalgudi G.J.R. Krishnan','Accompanist to leading vocalists'],skills:['Carnatic Ragas','Violin Technique','Music Theory','Improvisation','Kritis'],top:true,color:1,ts:d(17)},
{id:3,name:'Rohan Mehta',email:'rohan.mehta@gmail.com',category:'Finance',level:'Expert',offer:'Stock Markets, Options Trading & Technical Analysis',want:'Digital Photography & Post-processing',desc:'SEBI-registered investment analyst with 9 years experience. Specializes in equity research, F&O strategies, and portfolio management for Indian markets.',portfolio:['SEBI-registered Research Analyst (INH000006789)','Managed ₹50 Cr AUM portfolio','Published research on NSE/BSE-listed companies','YouTube channel: 200k subscribers on market analysis'],skills:['Equity Research','Options Strategies','Technical Analysis','Portfolio Management','NSE/BSE'],top:false,color:2,ts:d(16)},
{id:4,name:'Sneha Patel',email:'sneha.patel@gmail.com',category:'Design',level:'Expert',offer:'Product Design, UI/UX & Design Systems',want:'Bharatanatyam & Indian Classical Dance',desc:'Lead product designer at a Series-B Bengaluru startup. 10 years designing apps for 5M+ users. Expert in Figma, user research, and building scalable design systems.',portfolio:['Led design for Meesho seller dashboard (5M users)','Created design system adopted by 3 product teams','Speaker at DesignUp 2023, Bangalore','Mentored 30 designers through UXcel program'],skills:['Figma','User Research','Prototyping','Design Systems','Usability Testing'],top:true,color:3,ts:d(16)},
{id:5,name:'Vikram Nair',email:'vikram.nair@gmail.com',category:'Fitness',level:'Expert',offer:'Ashtanga & Iyengar Yoga, Pranayama',want:'Web Development Fundamentals',desc:'RYT-500 certified yoga instructor with 14 years of practice. Teaches therapeutic yoga, advanced asanas, breath-work, and meditation. Online and in-person sessions.',portfolio:['RYT-500 certified by Yoga Alliance International','Trained at KPJAYI, Mysore under Sharath Jois','Taught 2,000+ students across 15 countries','Certified Yoga Therapist (C-IAYT)'],skills:['Ashtanga Yoga','Iyengar Method','Pranayama','Meditation','Yoga Therapy'],top:false,color:4,ts:d(15)},
{id:6,name:'Ananya Krishnan',email:'ananya.k@gmail.com',category:'Languages',level:'Expert',offer:'Sanskrit Grammar, Vedic Texts & Tamil Literature',want:'Data Science & Business Analytics',desc:'PhD in Sanskrit from JNU Delhi. Teaches Sanskrit grammar (Paninian system), Vedic chanting, Upanishads, and classical Tamil Sangam literature.',portfolio:['PhD Sanskrit, JNU Delhi (Gold Medalist)','Published 3 academic papers on Vedic phonology','Translator for Penguin Classics India','Teaches at Rashtriya Sanskrit Sansthan'],skills:['Sanskrit Grammar','Vedic Chanting','Tamil Poetry','Upanishads','Paninian System'],top:false,color:5,ts:d(15)},
{id:7,name:'Kabir Singh',email:'kabir.singh@gmail.com',category:'Music',level:'Expert',offer:'Tabla & Hindustani Rhythm (Taals & Improvisation)',want:'Motion Graphics & 3D Animation',desc:'Disciple of Pt. Swapan Chaudhuri. Teaches tabla from beginner to advanced — taal theory, theka, kaida, rela, and improvisation for all styles of Hindustani music.',portfolio:['Disciple of Pt. Swapan Chaudhuri (SF State)','Performed at Sawai Gandharva Bhimsen Mahotsav','Accompanist to Ustad Rashid Khan','Faculty at SaPa Music Academy, Pune'],skills:['Tabla','Hindustani Taals','Rhythm Theory','Improvisation','Percussion'],top:false,color:6,ts:d(14)},
{id:8,name:'Divya Reddy',email:'divya.reddy@gmail.com',category:'Culinary',level:'Expert',offer:'Hyderabadi Dum Biryani, Andhra & Telangana Cuisine',want:'Video Production & Film Editing',desc:'Professional chef with 12 years of experience. Trained at IHM Hyderabad. Expert in Hyderabadi dum cooking, traditional Andhra curries, haleem, and South Indian sweets.',portfolio:['Trained at IHM Hyderabad (Gold Medalist)','Head Chef at Taj Falaknuma Palace (2015-2019)','Food columnist for The Hindu Sunday Magazine','Catered for 5,000+ guest events'],skills:['Dum Biryani','Andhra Curries','Haleem','South Indian Cuisine','Pastry'],top:true,color:7,ts:d(14)},
{id:9,name:'Arjun Bose',email:'arjun.bose@gmail.com',category:'Technology',level:'Expert',offer:'Machine Learning, NLP & MLOps (PyTorch, Transformers)',want:'Hindustani Classical Vocal Training',desc:'Senior ML Engineer at Flipkart AI Lab. 7 years in production ML. Expert in LLMs, NLP, computer vision, and deploying ML at scale. Can guide research projects.',portfolio:['Senior ML Engineer, Flipkart AI Lab','3 papers published at NeurIPS & ACL','Built recommendation engine serving 100M users','MS Computer Science, IIT Bombay'],skills:['PyTorch','NLP','Computer Vision','MLOps','LLMs','Transformers'],top:true,color:8,ts:d(13)},
{id:10,name:'Meera Pillai',email:'meera.pillai@gmail.com',category:'Arts & Crafts',level:'Expert',offer:'Kerala Mural Painting & Traditional Temple Art',want:'Python Programming & Automation',desc:'Traditional Kerala mural artist trained under the classical gurukul system. 20 years of practice. Teaches iconography, natural pigments, brush technique, and temple art forms.',portfolio:['Trained under Mammiyoor Krishnankutty Nair','Murals commissioned for 3 Kerala temples','National Award for Traditional Arts (2019)','Artist-in-residence at Kochi Biennale 2022'],skills:['Kerala Murals','Natural Pigments','Iconography','Temple Art','Traditional Brush'],top:false,color:9,ts:d(13)},
{id:11,name:'Rahul Gupta',email:'rahul.gupta@gmail.com',category:'Business',level:'Expert',offer:'Startup Strategy, Fundraising & Product-Market Fit',want:'4K Video Production & Colour Grading',desc:'Serial entrepreneur who founded 2 startups, raised Series A. Mentor at IIM Bangalore incubator and NSRCEL. Helps founders with pitch decks, VC conversations, and GTM.',portfolio:['Co-founder, Healthkart (acquired 2021)','Raised $4.2M Series A from Sequoia India','Mentor, NSRCEL IIM Bangalore','Angel investor in 12 startups'],skills:['Startup Strategy','Fundraising','Pitch Decks','GTM','VC Relations'],top:true,color:0,ts:d(12)},
{id:12,name:'Kavya Menon',email:'kavya.menon@gmail.com',category:'Writing',level:'Expert',offer:'Creative Writing, Screenwriting & Story Structure',want:'Wheel-thrown Pottery & Ceramics',desc:'Published author with HarperCollins India and a screenwriter with 4 produced films including one at MAMI Film Festival. Teaches storytelling, dialogue, and narrative arc.',portfolio:['Author of "Monsoon Season" (HarperCollins, 2021)','Screenplay for "Last Train" (MAMI 2022)','Writer-in-residence, Sangam House','Shortlisted for DSC Prize for South Asian Literature'],skills:['Story Structure','Screenplay','Dialogue','Literary Fiction','Script Development'],top:false,color:1,ts:d(12)},
{id:13,name:'Siddharth Joshi',email:'sid.joshi@gmail.com',category:'Technology',level:'Advanced',offer:'Cybersecurity, Ethical Hacking & CTF Challenges',want:'Jazz Guitar & Western Music Theory',desc:'CEH and OSCP certified security researcher with 6 years in InfoSec. Teaches penetration testing, web security, and CTF problem-solving from beginner to advanced.',portfolio:['OSCP & CEH certified','Security researcher, Razorpay (2020-present)','Found 40+ CVEs in major platforms','Speaker at null community & c0c0n conference'],skills:['Penetration Testing','Web Security','CTF','Malware Analysis','Network Security'],top:false,color:2,ts:d(11)},
{id:14,name:'Lakshmi Venkat',email:'lakshmi.venkat@gmail.com',category:'Fitness',level:'Expert',offer:'Kalaripayattu — Southern & Northern Styles',want:'Personal Finance & Wealth Management',desc:'Certified Kalari instructor from Thiruvananthapuram with 16 years of practice. Teaches both CVN (southern) and northern styles, weapons training, and Kalari healing techniques.',portfolio:['Certified under CVN Kalari, Thiruvananthapuram','Demonstrated at Kerala Tourism events globally','Trained national-level athletes in agility & flexibility','Film stunt coordinator for 3 Malayalam films'],skills:['Kalaripayattu','Weapons Training','Flexibility','Martial Arts','Kalari Healing'],top:true,color:3,ts:d(11)},
{id:15,name:'Aditya Chopra',email:'aditya.chopra@gmail.com',category:'Design',level:'Expert',offer:'Motion Graphics, After Effects & 3D Motion Design',want:'Vipassana Meditation & Mindfulness',desc:'Motion designer with 9 years at leading Mumbai and Delhi ad agencies. Expert in logo animations, title sequences, broadcast design, and 3D compositing in Cinema 4D.',portfolio:['Senior motion designer, Ogilvy Mumbai','Title sequence for Amazon Prime original series','Won ABBY at Goafest 2023 for motion design','Clients: Google India, Swiggy, HDFC Bank'],skills:['After Effects','Cinema 4D','Motion Design','3D Compositing','Broadcast Design'],top:false,color:4,ts:d(10)},
{id:16,name:'Nisha Agarwal',email:'nisha.agarwal@gmail.com',category:'Science',level:'Expert',offer:'Organic Chemistry, JEE Advanced & NEET Preparation',want:'Kathak & North Indian Classical Dance',desc:'IIT-Bombay chemistry graduate with 12 years of teaching. Specializes in organic mechanisms, problem-solving strategies, and advanced prep for JEE and NEET aspirants.',portfolio:['B.Tech Chemistry, IIT Bombay (Rank 247, JEE)','Co-authored NCERT supplementary chemistry guide','12 students selected for IChO (International Chemistry Olympiad)','Faculty at FIITJEE, Delhi (2012-2020)'],skills:['Organic Chemistry','JEE Advanced','NEET','Chemical Mechanisms','Problem Solving'],top:false,color:5,ts:d(10)},
{id:17,name:'Parth Shah',email:'parth.shah@gmail.com',category:'Technology',level:'Expert',offer:'Android Development (Kotlin, Jetpack Compose, Architecture)',want:'North Indian & Rajasthani Cuisine',desc:'Senior Android engineer at Ola with 8 years building high-performance apps. Expert in modern Android architecture, Compose, performance optimization, and Play Store publishing.',portfolio:['Senior Android Engineer, Ola Electric','Ola app: 50M+ downloads, 4.6 Play Store rating','Speaker at Droidcon India 2022 & 2023','Open-source: Kotlin library with 2.3k stars'],skills:['Kotlin','Jetpack Compose','Android Architecture','MVVM','Performance Optimization'],top:false,color:6,ts:d(9)},
{id:18,name:'Ritika Sharma',email:'ritika.sharma@gmail.com',category:'Arts & Crafts',level:'Expert',offer:'Madhubani Painting & Mithila Folk Art',want:'Functional Fitness & Strength Training',desc:'20+ years practitioner of Madhubani art. Student of national award-winning artist Sita Devi tradition. Teaches traditional motifs, natural colors, and the Kachni and Bharni styles.',portfolio:['Student of Ganga Devi & Sita Devi tradition','Work exhibited at Crafts Museum, New Delhi','Padmashri awardee program participant','Exported artworks to USA, Germany, Japan'],skills:['Madhubani Painting','Kachni Style','Bharni Style','Natural Colors','Folk Motifs'],top:false,color:7,ts:d(9)},
{id:19,name:'Suresh Kumar',email:'suresh.kumar@gmail.com',category:'Music',level:'Expert',offer:'Saraswati Veena & Carnatic Classical Music',want:'Full-Stack Web Development',desc:'AIR Grade A artist and performing Veena player with 22 years experience. Faculty at a leading music institution. Teaches kritis, ragas, and the complete Carnatic curriculum.',portfolio:['AIR (All India Radio) Grade A artist','Faculty, SASTRA University Music Department','Performed at Cleveland Thyagaraja Festival, USA','Trained 200+ students, 15 in professional careers'],skills:['Saraswati Veena','Carnatic Ragas','Kritis','Music Theory','Finger Technique'],top:false,color:8,ts:d(8)},
{id:20,name:'Isha Malhotra',email:'isha.malhotra@gmail.com',category:'Languages',level:'Advanced',offer:'French (B2-C1) & Spanish (B1) — Business & Conversational',want:'Investment Banking & Corporate Finance',desc:'Alliance Française certified language trainer with 7 years corporate experience. Taught at Airbus India and Capgemini. Prepares for DELF, DALF, and DELE examinations.',portfolio:['Alliance Française Certified Trainer (DELF/DALF)','Corporate trainer for Airbus India, Capgemini','Masters in French Literature, Pondicherry University','120+ students certified at DELF B2 and above'],skills:['French B2-C1','Spanish B1-B2','Business French','DELF/DALF Prep','Translation'],top:false,color:9,ts:d(8)},
{id:21,name:'Gaurav Tiwari',email:'gaurav.tiwari@gmail.com',category:'Fitness',level:'Expert',offer:'CrossFit, Olympic Weightlifting & Strength Programming',want:'UI/UX Design & Product Thinking',desc:'CrossFit Level-2 Trainer with 600+ athletes coached over 7 years. National-level powerlifter. Teaches movement mechanics, programming, and competition preparation.',portfolio:['CrossFit Level-2 Trainer (CF-L2)','National Powerlifting Championship — Bronze 2021','Head Coach, CrossFit Indiranagar, Bengaluru','Strength coach for 3 Ranji cricket players'],skills:['CrossFit','Olympic Weightlifting','Strength Programming','Mobility','Competition Prep'],top:false,color:0,ts:d(7)},
{id:22,name:'Pooja Desai',email:'pooja.desai@gmail.com',category:'Business',level:'Expert',offer:'Performance Marketing, D2C Growth & Marketing Analytics',want:'Carnatic Classical Vocal Music',desc:'10 years in digital marketing leading growth for D2C brands. Meta Blueprint certified, Google certified. Teaches campaign strategy, analytics, SEO, and CRO.',portfolio:['VP Marketing, Nykaa (2019-2022)','Scaled MyGlamm from ₹10 Cr to ₹200 Cr revenue','Meta Blueprint & Google Analytics certified','Speaker at India Digital Summit 2022, 2023'],skills:['Meta Ads','Google Ads','SEO','Analytics','CRO','D2C Growth'],top:true,color:1,ts:d(7)},
{id:23,name:'Nikhil Rao',email:'nikhil.rao@gmail.com',category:'Technology',level:'Expert',offer:'DevOps, Cloud Architecture (AWS/GCP) & Kubernetes',want:'Literary Fiction Writing & Storytelling',desc:'AWS Solutions Architect Pro with 10 years in cloud infrastructure. Built cloud systems for fintech at scale. Expert in Kubernetes, Terraform, CI/CD, and cost optimization.',portfolio:['AWS Solutions Architect — Professional certified','Staff SRE, Razorpay (infrastructure for 10M txn/day)','GCP Professional Cloud Architect','Open-source Kubernetes operator: 1.2k GitHub stars'],skills:['AWS','GCP','Kubernetes','Terraform','CI/CD','SRE'],top:false,color:2,ts:d(6)},
{id:24,name:'Saanvi Choudhary',email:'saanvi.c@gmail.com',category:'Arts & Crafts',level:'Expert',offer:'Rajput & Mughal Miniature Painting',want:'Data Visualization & Tableau',desc:'NIFT graduate specializing in miniature painting. 15 years of practice in Rajasthani, Pahari, and Mughal styles with natural mineral pigments on paper and ivory.',portfolio:['NIFT New Delhi (Gold Medalist, 2008)','Exhibited at National Museum, New Delhi','Work acquired by NGMA collection','Residency at Maharaja Sawai Madhopur trust'],skills:['Rajput Miniature','Mughal Painting','Pahari Style','Mineral Pigments','Ivory Painting'],top:false,color:3,ts:d(6)},
{id:25,name:'Aryan Kapoor',email:'aryan.kapoor@gmail.com',category:'Science',level:'Expert',offer:'Astrophysics, Space Science & Telescope Operation',want:'Dhrupad & North Indian Classical Singing',desc:'Research scientist at ISRO Satellite Centre with a PhD in astrophysics. Makes space science accessible — cosmology, planetary science, radio astronomy, career in space tech.',portfolio:['PhD Astrophysics, IIA Bengaluru','Scientist, ISRO Satellite Centre (ISAC)','Contributed to Chandrayaan-3 mission orbit design','Columbian lecture series speaker, 2023'],skills:['Astrophysics','Telescope Operation','Radio Astronomy','Orbital Mechanics','Cosmology'],top:true,color:4,ts:d(5)},
{id:26,name:'Tanvi Bhatt',email:'tanvi.bhatt@gmail.com',category:'Culinary',level:'Expert',offer:'Gujarati Cuisine, Jain Cooking & Traditional Sweets',want:'Cybersecurity & Ethical Hacking Basics',desc:'Catering professional with 16 years of experience in Gujarati and Jain cuisine. Teaches authentic dal baati churma, Jain alternatives, Navratri specials, and traditional sweets.',portfolio:['Featured in Saveur Magazine — Gujarati Special Edition','Catered for Gujarat CM\'s official state dinners','Cookbook: "A Gujarati Kitchen" (2020, Westland)','Runs 3-day Ahmedabad culinary workshops'],skills:['Gujarati Cuisine','Jain Cooking','Traditional Sweets','Fermentation','Pickling'],top:false,color:5,ts:d(5)},
{id:27,name:'Varun Sinha',email:'varun.sinha@gmail.com',category:'Finance',level:'Expert',offer:'Chartered Accountancy, GST, Tax Planning & Company Law',want:'Motion Design & Visual Storytelling',desc:'Chartered Accountant with Big4 experience (Deloitte, PwC). Expert in income tax, GST, startup compliance, company incorporation, and financial planning for founders.',portfolio:['Chartered Accountant — ICAI Rank 24 (Final)','Ex-Manager, Deloitte India Tax Advisory','CFO advisory for 8 Series A startups','Faculty, ICAI continuing education program'],skills:['Income Tax','GST','Company Law','Financial Planning','Startup Compliance'],top:false,color:6,ts:d(4)},
{id:28,name:'Riya Malviya',email:'riya.malviya@gmail.com',category:'Design',level:'Expert',offer:'Fashion Design, Draping, Textile Dyeing & Sustainable Fashion',want:'Machine Learning & Generative AI',desc:'NID Ahmedabad graduate with 11 years in fashion. Expert in draping, pattern-making, natural fabric dyeing (batik, tie-dye, shibori), and sustainable fashion design.',portfolio:['B.Des Fashion, NID Ahmedabad (2012)','Shown at Lakme Fashion Week 2020 & 2021','Collaborated with FabIndia on handloom revival','Sustainable fashion brand: "Mati" (3,000 customers)'],skills:['Draping','Pattern Making','Batik','Shibori','Sustainable Fashion','Textile Design'],top:false,color:7,ts:d(4)},
{id:29,name:'Harsh Vardhan',email:'harsh.v@gmail.com',category:'Technology',level:'Advanced',offer:'Blockchain, Web3 & Smart Contract Development',want:'Tabla & Indian Percussion',desc:'Solidity developer with 4 years experience building on Ethereum, Polygon, and Solana. Teaches smart contracts, DeFi protocol design, NFT development, and Web3 architecture.',portfolio:['Lead Solidity Dev, CoinSwitch Kuber','Audited 15 smart contracts (0 critical vulnerabilities found)','ETHIndia 2022 Hackathon Winner','Total TVL secured: $12M across deployed contracts'],skills:['Solidity','Ethereum','Polygon','DeFi','NFT','Web3 Architecture'],top:false,color:8,ts:d(3)},
{id:30,name:'Simran Kaur',email:'simran.kaur@gmail.com',category:'Fitness',level:'Expert',offer:'Gatka (Sikh Martial Art), Sword Fighting & Weapons Forms',want:'Documentary Photography & Storytelling',desc:'National-level Gatka champion and certified instructor. Teaches traditional Sikh martial art including weapons forms, conditioning, spiritual practice, and tournament preparation.',portfolio:['National Gatka Championship — Gold (2018, 2020)','Certified Gatka Instructor (SGPC approved)','Demonstrated at Baisakhi celebrations, London 2022','Trained Punjab Police commando unit'],skills:['Gatka Weapons','Sword Fighting','Martial Conditioning','Stick Fighting','Nihangi Forms'],top:false,color:9,ts:d(3)},
{id:31,name:'Dhruv Patel',email:'dhruv.patel@gmail.com',category:'Music',level:'Expert',offer:'Dhol, Bhangra Rhythms & Punjabi Folk Percussion',want:'Stock Market Trading & Derivatives',desc:'Professional Bhangra dhol player with 14 years of experience. Teaches traditional dhol beats, Bhangra and Giddha rhythms, folk compositions, and percussion for stage performance.',portfolio:['Lead dhol player, Bhangra Champions UK tour','Performed at Lollapalooza India 2023','Studio session musician for 20+ Punjabi film scores','YouTube: 400k subscribers on dhol tutorials'],skills:['Dhol','Bhangra Rhythms','Giddha Beats','Folk Percussion','Stage Performance'],top:false,color:0,ts:d(2.5)},
{id:32,name:'Chandni Verma',email:'chandni.verma@gmail.com',category:'Languages',level:'Expert',offer:'Urdu Poetry (Ghazal, Nazm), Shayari & Nastaliq Calligraphy',want:'Natural Language Processing & Text Analytics',desc:'Published Urdu poet and calligraphy teacher. Teaches Urdu script (Nastaliq), ghazal composition, shayari writing, and traditional kalam-based calligraphy.',portfolio:['Published poet — "Raat Ki Roshni" (Rajpal & Sons)','Urdu calligraphy featured in BBC Urdu documentary','Residency at Jamia Millia Islamia','Poetry translated into 4 languages'],skills:['Ghazal Writing','Urdu Nastaliq','Shayari','Nazm','Kalam Calligraphy'],top:false,color:1,ts:d(2)},
{id:33,name:'Yash Kulkarni',email:'yash.kulkarni@gmail.com',category:'Business',level:'Expert',offer:'Product Management, OKRs & Agile for Tech Companies',want:'Ashtanga Yoga & Pranayama',desc:'Senior Product Manager at Swiggy with 9 years in product. Teaches product strategy, PRDs, sprint planning, OKRs, stakeholder management, and roadmap development.',portfolio:['Senior PM, Swiggy (Instamart launch, 50 cities)','Grew DAU from 200k to 3.2M in 18 months','Speaker at ProductCon Bangalore 2022, 2023','MBA IIM Calcutta (Gold Medalist)'],skills:['Product Strategy','OKRs','Sprint Planning','PRD Writing','Stakeholder Management'],top:true,color:2,ts:d(2)},
{id:34,name:'Namrata Singh',email:'namrata.singh@gmail.com',category:'Arts & Crafts',level:'Expert',offer:'Dhokra (Lost-wax) Metal Casting & Tribal Art',want:'Python & Data Analysis',desc:'Practitioner of the ancient Bastar Dhokra craft. 15 years of practice using the traditional lost-wax technique. Teaches sculpting, mold creation, brass casting, and tribal motifs.',portfolio:['National Craft Award (Dhokra Category, 2020)','Work in permanent collection, National Crafts Museum','Exhibited at Dilli Haat and World Craft Council','Trained 40 tribal artisans in Chhattisgarh'],skills:['Lost-wax Casting','Dhokra Sculpture','Mold Making','Brass Casting','Tribal Motifs'],top:false,color:3,ts:d(1.5)},
{id:35,name:'Kiran Bhatia',email:'kiran.bhatia@gmail.com',category:'Writing',level:'Expert',offer:'Technical Writing, API Documentation & Developer Experience',want:'Carnatic Vocal Music & Kritis',desc:'10 years writing technical documentation for Microsoft, Infosys, and Atlassian. Expert in API docs, user manuals, docs-as-code, and building developer portals.',portfolio:['Principal Technical Writer, Atlassian India','API docs for 3 Microsoft Azure services','Built developer portal with 2M monthly visits','Author: "The Art of API Documentation" (Leanpub)'],skills:['API Documentation','Docs-as-Code','DITA','MkDocs','Developer Experience'],top:false,color:4,ts:d(1)},
{id:36,name:'Aditi Nair',email:'aditi.nair@gmail.com',category:'Photography',level:'Expert',offer:'Portrait & Documentary Photography, Lightroom & Color Science',want:'Front-End Development & CSS Animation',desc:'Editorial and documentary photographer published in National Geographic India, The Hindu, and Vogue India. Expert in natural light, composition, and complete post-processing workflow.',portfolio:['Nat Geo India — "Faces of the Ghats" photo essay','Vogue India portrait series, 2022','Winner, Sony World Photography Award (Regional, 2021)','PhotoShelter top 100 photographers in India'],skills:['Portrait Photography','Documentary','Lightroom','Color Grading','Composition'],top:false,color:5,ts:d(1)},
{id:37,name:'Ronak Jain',email:'ronak.jain@gmail.com',category:'Technology',level:'Expert',offer:'iOS Development (Swift, SwiftUI) & App Store Optimization',want:'Dhrupad Singing & North Indian Classical Music',desc:'Senior iOS engineer who built apps with 5M+ downloads. 8 years specializing in SwiftUI, performance tuning, App Store optimization, and subscription model implementation.',portfolio:['Senior iOS Dev, CRED (app: 5M+ downloads)','Featured App on Indian App Store twice','Speaker at SwiftIndia conference 2022','Built medical app for AIIMS Delhi diagnostics team'],skills:['Swift','SwiftUI','Core Data','App Store Optimization','In-App Purchases'],top:false,color:6,ts:d(0.8)},
{id:38,name:'Preethi Rajan',email:'preethi.rajan@gmail.com',category:'Performing Arts',level:'Expert',offer:'Bharatanatyam — Margam, Abhinaya & Theory',want:'Graphic Design & Branding',desc:'Bharatanatyam performer and teacher trained under Guru Chitra Visweswaran, Chennai. 20 years of practice. Teaches the complete Kalakshetra syllabus from basic adavus to full Margam.',portfolio:['Trained under Guru Chitra Visweswaran, Kalakshetra','Arangetram staged at Music Academy, Chennai','National scholarship from Ministry of Culture (2014)','Performed at Khajuraho Dance Festival 2022'],skills:['Bharatanatyam','Abhinaya','Nritta','Margam','Natya Shastra'],top:true,color:7,ts:d(0.7)},
{id:39,name:'Sameer Kulkarni',email:'sameer.k@gmail.com',category:'Finance',level:'Advanced',offer:'Personal Finance, Mutual Funds & Retirement Planning',want:'Video Game Design & Unity Development',desc:'CFPCM certified financial planner with 8 years experience. Specializes in goal-based financial planning, MF portfolios, tax-efficient investing, and retirement corpus building.',portfolio:['CFP (Certified Financial Planner) — FPSB India','Managed 500+ client portfolios (AUM ₹85 Cr)','Author: "The Indian Investor\'s Playbook" (2022)','Weekly finance column, Mint newspaper'],skills:['Mutual Funds','Goal-based Planning','Tax Planning','Retirement Corpus','Insurance'],top:false,color:8,ts:d(0.6)},
{id:40,name:'Megha Sharma',email:'megha.sharma@gmail.com',category:'Wellness',level:'Expert',offer:'Ayurveda, Herbal Medicine & Holistic Nutrition',want:'iOS App Development & Swift',desc:'Ayurvedic physician (BAMS, MD Ayurveda) with 11 years of clinical practice. Teaches Ayurvedic principles, herbal formulations, dosha analysis, and therapeutic diet planning.',portfolio:['BAMS + MD Ayurveda, BHU Varanasi','Consulting Ayurvedic physician, Apollo Wellness','Research paper: Adaptogenic herbs in modern stress management','Appeared on NDTV Ayurveda series'],skills:['Ayurvedic Medicine','Herbal Formulations','Dosha Analysis','Panchakarma','Therapeutic Nutrition'],top:false,color:9,ts:d(0.5)},
{id:41,name:'Vijay Anand',email:'vijay.anand@gmail.com',category:'Music',level:'Expert',offer:'Mridangam & South Indian Classical Percussion',want:'Data Engineering & Apache Spark',desc:'Professional mridangam player trained under Mannargudi Easwaran. Teaches from basic strokes to advanced tani avartanam, thani playing techniques, and rhythm theory.',portfolio:['Trained under Mannargudi A. Easwaran','Accompanist to M.S. Subbalakshmi memorial concerts','AIR Grade A Artist (Mridangam)','Faculty at Brhaddhvani Music Research Centre'],skills:['Mridangam','South Indian Percussion','Tala Theory','Thani Avartanam','Konnakol'],top:false,color:0,ts:d(0.4)},
{id:42,name:'Shruti Agarwal',email:'shruti.agarwal@gmail.com',category:'Technology',level:'Expert',offer:'Data Science, Python & Statistical Modelling',want:'Pottery, Wheel-throwing & Kiln Work',desc:'Data scientist at Amazon India with 7 years experience. Teaches Python for data science, statistics, machine learning fundamentals, A/B testing, and SQL for analysts.',portfolio:['Senior Data Scientist, Amazon India (Alexa team)','MS Statistics, IIT Kanpur','Kaggle Grandmaster (Top 50 globally)','Built NLP model used in 3 Amazon India products'],skills:['Python','Pandas','Scikit-learn','SQL','A/B Testing','Statistical Modelling'],top:true,color:1,ts:d(0.3)},
{id:43,name:'Ravi Shankar Pillai',email:'ravi.pillai@gmail.com',category:'Performing Arts',level:'Expert',offer:'Kathakali — Makeup, Costume & Performance Technique',want:'Android App Development',desc:'Kathakali artist trained at Kerala Kalamandalam. 25 years of performance experience. Teaches Kathakali makeup (chutti), costume, facial expressions (navarasas), and basic performance.',portfolio:['Trained at Kerala Kalamandalam (7-year residential program)','Performed in 26 countries across Europe & Americas','National Award for Traditional Arts Performance','Director, Natanam Kathakali Academy, Thrissur'],skills:['Kathakali Makeup','Navarasas','Chutti Technique','Mudras','Performance'],top:false,color:2,ts:d(0.25)},
{id:44,name:'Pallavi Reddy',email:'pallavi.r@gmail.com',category:'Sports',level:'Expert',offer:'Badminton Coaching — Technique, Tactics & Tournament Prep',want:'Financial Modeling & Excel Advanced',desc:'Former national-level badminton player (doubles specialist). 10 years of coaching experience. Teaches footwork, stroke mechanics, match tactics, and physical conditioning for all ages.',portfolio:['National Badminton Championship — Doubles Runner-up (2013)','Coached Hyderabad team in State Shuttle League','Certified BAI Level-2 Coach','3 students qualified for national sub-junior championship'],skills:['Badminton Technique','Footwork','Match Tactics','Physical Conditioning','Tournament Strategy'],top:false,color:3,ts:d(0.2)},
{id:45,name:'Karthik Subramanian',email:'karthik.s@gmail.com',category:'Technology',level:'Expert',offer:'Game Development with Unity & C# (2D & 3D)',want:'Carnatic Flute & Wind Instruments',desc:'Indie game developer with 6 published titles on Steam and Google Play. Expert in Unity game engine, C#, physics systems, multiplayer with Photon, and monetization.',portfolio:['6 games published on Steam (avg 87% positive reviews)','Ludum Dare 47 — 1st place overall','Lead developer, Rarimobi Games (Hyderabad)','Unity Certified Expert Gameplay Programmer'],skills:['Unity','C#','Game Physics','Multiplayer (Photon)','Mobile Game Dev'],top:false,color:4,ts:d(0.15)},
{id:46,name:'Jasleen Kaur',email:'jasleen.k@gmail.com',category:'Arts & Crafts',level:'Expert',offer:'Phulkari Embroidery & Punjab Folk Textile Art',want:'Spoken English & Public Speaking',desc:'Master craftsperson in traditional Phulkari embroidery from Patiala. 18 years of practice. Teaches traditional and contemporary Phulkari patterns, silk thread work, and dupatta design.',portfolio:['National Award for Phulkari Crafts (2018)','Work exhibited at Indian Craft Gallery, London','Supplied to FabIndia, Anokhi, and Jaypore','Trained 80 women artisans in Patiala district'],skills:['Phulkari','Silk Thread Work','Folk Textile','Pattern Design','Embroidery'],top:false,color:5,ts:d(0.1)},
{id:47,name:'Arjun Menon',email:'arjun.menon@gmail.com',category:'Business',level:'Advanced',offer:'Supply Chain Management & Logistics Optimization',want:'Machine Learning for Operations Research',desc:'Supply chain leader at Amazon India with 8 years of experience. Expert in inventory optimization, vendor management, last-mile logistics, and 3PL partnerships at scale.',portfolio:['Head of Logistics, Amazon India (South Region)','Reduced fulfillment costs by 18% via route optimization','MBA Operations, IIM Kozhikode','Implemented India\'s first drone delivery pilot (DGCA approved)'],skills:['Supply Chain','Inventory Optimization','Logistics','Vendor Management','S&OP'],top:false,color:6,ts:d(0.08)},
{id:48,name:'Zara Ahmed',email:'zara.ahmed@gmail.com',category:'Languages',level:'Expert',offer:'Arabic (Modern Standard & Gulf Dialect) & Persian',want:'Illustration & Digital Art',desc:'Bilingual in Arabic and Persian. MA Arabic from Jamia Millia. Teaches Modern Standard Arabic, Gulf dialect for business, and classical Persian poetry (Rumi, Hafez).',portfolio:['MA Arabic Literature, Jamia Millia Islamia','Interpreter for MEA (Ministry of External Affairs) delegations','Translator: 4 Arabic novels into English/Hindi','Teaches at Indian Institute of Arabic, Hyderabad'],skills:['Modern Standard Arabic','Gulf Arabic','Persian','Quranic Arabic','Literary Translation'],top:false,color:7,ts:d(0.07)},
{id:49,name:'Dev Sharma',email:'dev.sharma@gmail.com',category:'Photography',level:'Advanced',offer:'Wildlife Photography, Camera Trapping & Ethical Wildlife Tracking',want:'React Native & Mobile App Development',desc:'Wildlife photographer and conservationist. Has photographed tigers in 14 Indian reserves. Expert in camera trapping, jungle craft, ethical photography, and editing for wildlife.',portfolio:['Photos in Sanctuary Asia, BBC Wildlife Magazine','Camera trap led to rediscovery of Malabar civet (2021)','Collaborated with WWF India on Bengal tiger census','National Geographic nature photography grant recipient'],skills:['Wildlife Photography','Camera Trapping','Field Craft','Nature Editing','Conservation'],top:false,color:8,ts:d(0.06)},
{id:50,name:'Aditi Chandra',email:'aditi.chandra@gmail.com',category:'Wellness',level:'Expert',offer:'Clinical Psychology, CBT & Mindfulness-Based Therapy',want:'Video Production & YouTube Channel Building',desc:'Licensed clinical psychologist (RCI registered) with 10 years of practice. Teaches evidence-based CBT, mindfulness techniques, stress management, and mental wellness practices.',portfolio:['RCI registered Clinical Psychologist (CRR No. A30291)','PhD Clinical Psychology, NIMHANS Bangalore','Seen 2,000+ clients (private practice + hospital)','Author: "Rewire Your Anxiety" (Penguin India, 2023)'],skills:['CBT','Mindfulness','Stress Management','Trauma-Informed Care','ACT Therapy'],top:true,color:9,ts:d(0.05)},
{id:51,name:'Manish Tiwari',email:'manish.tiwari@gmail.com',category:'Technology',level:'Expert',offer:'Embedded Systems, Arduino, Raspberry Pi & IoT Development',want:'North Indian Classical Singing & Thumri',desc:'Electronics engineer and maker with 11 years experience. Teaches embedded C/C++, Arduino, Raspberry Pi, PCB design, and building IoT systems from concept to prototype.',portfolio:['Principal Hardware Engineer, Bosch India','25 IoT projects shipped to production','Speaker at MakerFaire Mumbai 2022','Patents: 3 granted (IoT sensor fusion)'],skills:['Arduino','Raspberry Pi','Embedded C','PCB Design','IoT Protocols'],top:false,color:0,ts:d(0.04)},
{id:52,name:'Sanya Khanna',email:'sanya.khanna@gmail.com',category:'Design',level:'Advanced',offer:'Brand Identity, Logo Design & Visual Communication',want:'Pilates & Core Rehabilitation',desc:'Independent brand designer with 8 years experience. Created brand identities for 60+ startups and established businesses. Expert in strategic positioning, visual identity, and guidelines.',portfolio:['Rebranded Lenskart (2021, visual identity overhaul)','60+ brand identities — from logo to brand book','D&AD New Blood Award — Shortlisted (2020)','Brand design faculty, School of Visual Arts, Noida'],skills:['Brand Identity','Logo Design','Typography','Visual Guidelines','Packaging Design'],top:false,color:1,ts:d(0.03)},
{id:53,name:'Farhan Qureshi',email:'farhan.q@gmail.com',category:'Performing Arts',level:'Expert',offer:'Hindustani Classical Vocal — Khayal, Thumri & Ghazal',want:'iOS Development & SwiftUI',desc:'Vocalist trained in the Patiala gharana under Ustad Dilshad Khan. 17 years of practice. Teaches Khayal, Thumri, and Ghazal singing with complete raga grammar and bandish.',portfolio:['Trained under Ustad Dilshad Khan, Patiala gharana','AIR Grade-B artist (shortlisted for Grade-A)','Performed at Dover Lane Music Conference, Kolkata','SPIC-MACAY touring artist, universities across India'],skills:['Khayal Singing','Thumri','Ghazal','Raga Grammar','Bandish'],top:false,color:2,ts:d(0.025)},
{id:54,name:'Tara Joshi',email:'tara.joshi@gmail.com',category:'Culinary',level:'Expert',offer:'Artisan Bread Baking, Sourdough & Pastry Arts',want:'Machine Learning & Computer Vision',desc:'Pastry chef and bread baker trained at Le Cordon Bleu London. 9 years experience in 5-star hotels. Teaches sourdough from starter to scoring, croissants, and artisan pastry techniques.',portfolio:['Diploma Pâtisserie, Le Cordon Bleu London (Distinction)','Head Pastry Chef, Taj Hotels New Delhi','Featured in Food & Wine Magazine, India edition','500-member Bangalore Bread Bakers community founder'],skills:['Sourdough','Laminated Dough','Croissants','French Pastry','Bread Scoring'],top:false,color:3,ts:d(0.02)},
{id:55,name:'Ranjit Deshmukh',email:'ranjit.d@gmail.com',category:'Sports',level:'Expert',offer:'Chess — Opening Theory, Endgame Technique & Tournament Strategy',want:'Illustration & Character Design',desc:'FIDE-rated chess coach (Elo 2180) with 12 years of coaching experience. Trained 4 National Junior Champions. Expert in opening systems, middle-game plans, and endgame conversion.',portfolio:['FIDE Rated 2180, National Master title','Coached 4 National Junior Championship winners','Head coach, Maharashtra Chess Federation U-20 team','Online students across 30 countries (Chess.com)'],skills:['Opening Theory','Endgame Technique','Middlegame Plans','Tournament Prep','Tactics Training'],top:true,color:4,ts:d(0.01)},
  ];
}

function buildRequests(){
  return [
    {id:9001,from:'Incoming',fromName:'Rahul Verma',fromEmail:'rahul.verma@gmail.com',fromSkill:'Advanced Figma & Design Systems',toId:1,toName:'Aarav Sharma',toSkill:'Full-Stack Development (React, Node.js, AWS)',message:"Hi Aarav, I've been wanting to learn React properly for a startup I'm building. I have 7 years of product design experience and can teach you advanced Figma, design systems, and component libraries in return. Would love a weekly 90-minute skill swap!",status:'pending',ts:Date.now()-3600000*3},
    {id:9002,from:'Incoming',fromName:'Poornima Iyengar',fromEmail:'poornima.i@gmail.com',fromSkill:'Carnatic Classical Singing & Kritis',toId:1,toName:'Aarav Sharma',toSkill:'Full-Stack Development (React, Node.js, AWS)',message:"Hello! I'm a Carnatic vocalist (Grade B AIR) and would love to learn web development to build my own music school website. I can teach you Carnatic singing from beginner level. Would a 2-hours-per-week swap work?",status:'pending',ts:Date.now()-3600000*8},
  ];
}

// ═══════════════════════════════════════════════════
// COUNTER ANIMATION
// ═══════════════════════════════════════════════════
function animCount(el,target,suffix=''){
  let cur=0;const step=target/60;
  const t=setInterval(()=>{
    cur+=step;if(cur>=target){cur=target;clearInterval(t);}
    el.innerHTML=Math.floor(cur)+'<span>'+suffix+'</span>';
  },20);
}
setTimeout(()=>{
  animCount(document.getElementById('hs1'),skills.length,'+');
  animCount(document.getElementById('hs2'),[...new Set(skills.map(s=>s.category))].length,'+');
  animCount(document.getElementById('hs3'),skills.length*3+12,'+');
  document.getElementById('liveCount').textContent=skills.length;
},300);

// ═══════════════════════════════════════════════════
// VIEWS (handled by new showView below)
// ═══════════════════════════════════════════════════

// ═══════════════════════════════════════════════════
// BROWSE
// ═══════════════════════════════════════════════════
function renderBrowse(){
  const q=(document.getElementById('searchInput').value||'').toLowerCase();
  const sort=document.getElementById('sortSelect').value;

  let list=skills.filter(s=>{
    const catOk=activeCat==='All'||s.category===activeCat;
    const qOk=!q||[s.offer,s.want,s.name,s.desc||'',...(s.skills||[])].some(x=>x.toLowerCase().includes(q));
    return catOk&&qOk;
  });
  if(sort==='newest') list.sort((a,b)=>b.ts-a.ts);
  if(sort==='oldest') list.sort((a,b)=>a.ts-b.ts);
  if(sort==='name')   list.sort((a,b)=>a.name.localeCompare(b.name));
  if(sort==='top')    list.sort((a,b)=>(b.top?1:0)-(a.top?1:0));

  const cats=['All',...new Set(skills.map(s=>s.category))];
  document.getElementById('filters').innerHTML=cats.map(c=>
    `<button class="fchip ${c===activeCat?'on':''}" onclick="setCat('${c}')">${c}</button>`
  ).join('');
  document.getElementById('countBadge').textContent=`${list.length} listing${list.length!==1?'s':''}`;

  const myListings=skills.filter(s=>s._mine);
  const grid=document.getElementById('grid');
  if(!list.length){
    grid.innerHTML=`<div class="empty"><div class="empty-icon">🔍</div><p>No results found.<br><a href="#" onclick="openPostModal()">Post your skill</a> to get the ball rolling!</p></div>`;
    return;
  }

  grid.innerHTML=list.map((s,i)=>{
    const [bg,fg]=PALETTE[s.color%PALETTE.length];
    const isMine=!!s._mine;
    const sentReq=requests.find(r=>r.toId===s.id&&r.from===ME);
    const isMatch=myListings.some(m=>
      (s.want||'').toLowerCase().split(/[\s,&\/]+/).some(w=>w.length>3&&(m.offer||'').toLowerCase().includes(w))||
      (m.want||'').toLowerCase().split(/[\s,&\/]+/).some(w=>w.length>3&&(s.offer||'').toLowerCase().includes(w))
    );
    const portItems=(s.portfolio||[]).slice(0,2);
    const skillTags=(s.skills||[]).slice(0,4);

    return `
    <div class="card" style="animation-delay:${i*0.025}s">
      ${isMatch&&!isMine?`<div class="match-strip">⚡ Skills match detected!</div>`:''}
      <div class="card-header">
        <div class="user-pill" onclick="openProfile(${s.id})">
          <div class="avatar" style="background:${bg};color:${fg}">${s.name[0]}</div>
          <div class="user-info">
            <div class="user-name">${esc(s.name)}</div>
            <div class="user-meta">${s.category} · ${ago(s.ts)}</div>
          </div>
        </div>
        <div class="card-badges">
          ${s.top?`<span class="cbadge cbadge-top">⭐ Top</span>`:''}
          ${s.top?`<span class="verified-badge" style="font-size:0.54rem;padding:0.1rem 0.38rem">✓ Verified</span>`:''}
          <span class="cbadge cbadge-lvl">${s.level}</span>
        </div>
      </div>

      <div class="skill-divider"></div>

      <div class="offer-label">Can Teach</div>
      <div class="offer-text">${esc(s.offer)}</div>
      <div class="want-row">
        <span class="want-label">Wants:</span>
        <span class="want-text">${esc(s.want)}</span>
      </div>

      ${s.desc?`<div class="card-bio">${esc(s.desc)}</div>`:''}

      ${portItems.length?`
      <div class="portfolio-chips">
        ${portItems.map(p=>`<span class="pchip">→ ${esc(p)}</span>`).join('')}
      </div>`:''}

      ${skillTags.length?`
      <div style="display:flex;gap:0.28rem;flex-wrap:wrap;margin-bottom:0.9rem">
        ${skillTags.map(t=>`<span class="stag">${esc(t)}</span>`).join('')}
      </div>`:''}

      <div class="card-footer">
        <div class="footer-left">
          <span class="cbadge cbadge-cat">${s.category}</span>
        </div>
        <div>
          ${isMine?`
            <div style="display:flex;gap:0.3rem">
              <button class="btn btn-ghost btn-sm" onclick="openPostModal(${s.id})">Edit</button>
              <button class="btn btn-danger btn-sm" onclick="askDelete(${s.id})">✕</button>
            </div>`
          :sentReq?`<span class="req-chip ${sentReq.status}">Request ${sentReq.status}</span>`
          :`<button class="btn btn-primary btn-sm" onclick="openConnect(${s.id})">Connect →</button>`}
        </div>
      </div>
    </div>`;
  }).join('');
}

function setCat(c){activeCat=c;renderBrowse();}
function ago(ts){const d=Date.now()-ts;if(d<3600000)return Math.max(1,~~(d/60000))+'m ago';if(d<86400000)return ~~(d/3600000)+'h ago';return ~~(d/86400000)+'d ago';}
function esc(s){return(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}

// ═══════════════════════════════════════════════════
// POST MODAL
// ═══════════════════════════════════════════════════
function openPostModal(id=null){
  editId=id;
  document.getElementById('postTitle').textContent=id?'Edit Your Listing':'Post a Skill Exchange';
  if(id){
    const s=skills.find(x=>x.id===id);
    document.getElementById('fName').value=s.name;
    document.getElementById('fEmail').value=s.email||'';
    document.getElementById('fOffer').value=s.offer;
    document.getElementById('fWant').value=s.want;
    document.getElementById('fPortfolio').value=(s.portfolio||[]).join(', ');
    document.getElementById('fDesc').value=s.desc||'';
    document.getElementById('fCat').value=s.category;
    document.getElementById('fLevel').value=s.level||'Intermediate';
  } else {
    ['fName','fEmail','fOffer','fWant','fPortfolio','fDesc'].forEach(i=>document.getElementById(i).value='');
  }
  document.getElementById('postOverlay').classList.add('open');
}

function submitSkill(){
  const name=gv('fName'),email=gv('fEmail'),offer=gv('fOffer'),want=gv('fWant');
  const portfolio=gv('fPortfolio').split(',').map(x=>x.trim()).filter(Boolean);
  const desc=gv('fDesc');
  const category=document.getElementById('fCat').value;
  const level=document.getElementById('fLevel').value;
  if(!name||!offer||!want){toast('Please fill Name, Can Teach, and Want to Learn.',true);return;}
  if(editId){
    const s=skills.find(x=>x.id===editId);
    Object.assign(s,{name,email,offer,want,portfolio,desc,category,level});
    toast('Listing updated ✓');
  } else {
    skills.unshift({id:Date.now(),name,email,offer,want,portfolio,desc,category,level,skills:[],top:false,color:~~(Math.random()*PALETTE.length),ts:Date.now(),_mine:true});
    toast('Skill posted successfully! 🎉');
  }
  saveAll();closeModal('postOverlay');renderBrowse();
}
function gv(id){return document.getElementById(id).value.trim();}

// ═══════════════════════════════════════════════════
// DELETE
// ═══════════════════════════════════════════════════
function askDelete(id){delTarget=id;document.getElementById('delOverlay').classList.add('open');}
function confirmDelete(){skills=skills.filter(s=>s.id!==delTarget);delTarget=null;saveAll();closeModal('delOverlay');renderBrowse();toast('Listing removed.');}

// ═══════════════════════════════════════════════════
// PROFILE
// ═══════════════════════════════════════════════════
function openProfile(id){
  const s=skills.find(x=>x.id===id);
  if(!s) return;
  const [bg,fg]=PALETTE[s.color%PALETTE.length];
  const isMine=!!s._mine;
  const sentReq=requests.find(r=>r.toId===s.id&&r.from===ME);
  const reqCount=requests.filter(r=>r.toId===s.id).length;
  const portItems=s.portfolio||[];
  const skillTags=s.skills||[];

  document.getElementById('profileModal').innerHTML=`
    <div class="profile-hero">
      <div class="profile-hero-bg"></div>
    </div>
    <div class="profile-avatar-wrap">
      <div class="profile-avatar-lg" style="background:${bg};color:${fg}">${s.name[0]}</div>
    </div>
    <div class="profile-name">${esc(s.name)}</div>
    <div class="profile-tagline">${s.category} · ${s.level} Professional</div>
    <div style="display:flex;gap:0.4rem;flex-wrap:wrap;margin-top:0.4rem">
      ${(s.top||isMine&&isEduVerified)?`<span class="verified-badge edu-badge">🎓 .edu Verified</span>`:''}
      ${(s.top&&s.id%3===0||isMine&&isAiVerified)?`<span class="verified-badge ai-badge">🤖 AI Verified</span>`:''}
      ${(s.top)?`<span class="verified-badge">✓ Trusted Member</span>`:''}
    </div>
    ${s.email?`<div class="profile-email">📧 <a href="mailto:${s.email}" style="text-decoration:none;color:var(--blue)">${s.email}</a></div>`:''}

    <div class="profile-stats-row">
      <div class="pstat"><div class="pstat-num">${reqCount}</div><div class="pstat-lbl">Requests</div></div>
      <div class="pstat"><div class="pstat-num">${portItems.length}</div><div class="pstat-lbl">Portfolio Items</div></div>
      <div class="pstat"><div class="pstat-num">${skillTags.length}</div><div class="pstat-lbl">Skills Listed</div></div>
      <div class="pstat"><div class="pstat-num">${ago(s.ts)}</div><div class="pstat-lbl">Posted</div></div>
    </div>

    <div class="section-lbl">Can Teach</div>
    <div class="skill-box">
      <div class="skill-box-title">${esc(s.offer)}</div>
      ${s.desc?`<div class="skill-box-desc">${esc(s.desc)}</div>`:''}
    </div>

    <div class="section-lbl">Wants to Learn</div>
    <div class="skill-box" style="border-color:rgba(255,77,77,0.3)">
      <div class="skill-box-title" style="color:var(--red)">${esc(s.want)}</div>
    </div>

    ${portItems.length?`
    <div class="section-lbl">Portfolio Highlights</div>
    <div class="portfolio-grid">
      ${portItems.map(p=>`
      <div class="port-item">
        <div class="port-title">→ ${esc(p)}</div>
      </div>`).join('')}
    </div>`:''}

    ${skillTags.length?`
    <div class="section-lbl">Skills & Tools</div>
    <div class="skills-tags">
      ${skillTags.map(t=>`<span class="stag">${esc(t)}</span>`).join('')}
    </div>`:''}

    <div class="modal-footer" style="margin-top:1.2rem">
      <button class="btn btn-ghost" onclick="closeModal('profileOverlay')">Close</button>
      ${isMine?`<button class="btn btn-blue" onclick="closeModal('profileOverlay');openVerifyModal()">🛡 Verify Profile</button>`:''}
      ${s.email&&!isMine?`<button class="btn btn-blue" onclick="window.open('mailto:${s.email}?subject=Skillit%3A%20Skill%20Exchange%20Interest')">Email Directly</button>`:''}
      ${!isMine?sentReq?`<span class="req-chip ${sentReq.status}" style="align-self:center">Request ${sentReq.status}</span>`:`<button class="btn btn-primary" onclick="closeModal('profileOverlay');openConnect(${s.id})">Send Request →</button>`:''}
    </div>
  `;
  document.getElementById('profileOverlay').classList.add('open');
}

// ═══════════════════════════════════════════════════
// CONNECT
// ═══════════════════════════════════════════════════
function openConnect(id){
  const s=skills.find(x=>x.id===id);
  if(!s) return;
  connTarget=id;
  document.getElementById('cprev').innerHTML=
    `Sending exchange request to <strong>${s.name}</strong><br>
     They offer: <strong>${s.offer}</strong><br>
     They want to learn: <strong style="color:var(--red)">${s.want}</strong>`;
  const mine=skills.find(x=>x._mine);
  if(mine){
    document.getElementById('cName').value=mine.name;
    document.getElementById('cEmail').value=mine.email||'';
    document.getElementById('cSkill').value=mine.offer;
  }
  document.getElementById('connectOverlay').classList.add('open');
}

function sendRequest(){
  const name=gv('cName'),email=gv('cEmail'),skill=gv('cSkill'),msg=gv('cMsg');
  if(!name||!skill){toast('Your name and skill are required.',true);return;}
  const target=skills.find(s=>s.id===connTarget);
  const req={id:Date.now(),from:ME,fromName:name,fromEmail:email,fromSkill:skill,
    toId:connTarget,toName:target.name,toSkill:target.offer,
    message:msg,status:'pending',ts:Date.now()};
  requests.push(req);
  const tid='t_'+req.id;
  threads.push({id:tid,reqId:req.id,name:target.name,skillId:connTarget,
    color:target.color,lastMsg:msg||'Request sent',time:Date.now(),unread:false});
  msgs[tid]=[];
  if(msg) msgs[tid].push({from:ME,text:msg,time:Date.now()});
  saveAll();
  closeModal('connectOverlay');
  ['cName','cEmail','cSkill','cMsg'].forEach(i=>document.getElementById(i).value='');
  toast(`Request sent to ${target.name}! ✓`);
  renderBrowse();updateDots();
  if(msg) setTimeout(()=>simReply(tid,target,req),2200+Math.random()*1000);
}

function simReply(tid,target,req){
  const pool=[
    `Hi ${req.fromName}! This sounds like a great exchange. When are you available?`,
    `Hello! I've been looking for someone who knows ${req.fromSkill}. Let's make this work!`,
    `Wonderful! Exchanging ${req.fromSkill} for ${target.offer} is exactly what I need. Let's connect!`,
    `Thanks for reaching out! Would love to do this swap. What days work for you?`,
    `Great initiative! Want to start with a 45-minute intro call this week?`
  ];
  const reply=pool[~~(Math.random()*pool.length)];
  msgs[tid].push({from:target.name,text:reply,time:Date.now()});
  const t=threads.find(x=>x.id===tid);
  if(t){t.lastMsg=reply;t.time=Date.now();t.unread=true;}
  saveAll();updateDots();
  if(document.getElementById('view-messages').classList.contains('active')&&activeThread===tid) renderChatPane(tid);
  else toast(`${target.name} replied to your request! 💬`);
}

// ═══════════════════════════════════════════════════
// INCOMING REQUESTS
// ═══════════════════════════════════════════════════
function openIncomingRequest(reqId){
  const r=requests.find(x=>x.id===reqId);
  if(!r) return;
  const [bg,fg]=PALETTE[Math.abs(reqId)%PALETTE.length];
  document.getElementById('incomingModal').innerHTML=`
    <div class="modal-title">📨 Incoming Exchange Request</div>
    <div style="display:flex;gap:0.9rem;align-items:center;padding:1rem;background:var(--card);border:1px solid var(--border2);border-radius:10px;margin-bottom:1.1rem">
      <div class="avatar" style="background:${bg};color:${fg};width:44px;height:44px;font-size:1.1rem">${(r.fromName||'?')[0]}</div>
      <div>
        <div style="font-family:'Fraunces',serif;font-weight:700;font-size:1rem;margin-bottom:0.18rem">${esc(r.fromName)}</div>
        ${r.fromEmail?`<div style="font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--blue)">📧 ${r.fromEmail}</div>`:''}
        <div style="font-size:0.7rem;color:var(--muted);margin-top:0.1rem">${ago(r.ts)}</div>
      </div>
    </div>
    <div class="section-lbl">They Offer in Exchange</div>
    <div style="background:var(--accent-dim);border:1px solid rgba(232,255,90,0.2);border-radius:9px;padding:0.75rem 0.95rem;margin-bottom:0.8rem">
      <div style="font-family:'Fraunces',serif;font-weight:700;color:var(--accent);font-size:0.95rem">${esc(r.fromSkill)}</div>
    </div>
    <div class="section-lbl">They Want to Learn From You</div>
    <div style="background:var(--red-dim);border:1px solid rgba(255,77,77,0.2);border-radius:9px;padding:0.75rem 0.95rem;margin-bottom:0.8rem">
      <div style="font-family:'Fraunces',serif;font-weight:700;color:var(--red);font-size:0.95rem">${esc(r.toSkill)}</div>
    </div>
    ${r.message?`
    <div class="section-lbl">Their Message</div>
    <div style="background:var(--card);border:1px solid var(--border2);border-radius:9px;padding:0.85rem 1rem;margin-bottom:0.8rem;font-size:0.78rem;color:var(--text2);line-height:1.7;font-style:italic">"${esc(r.message)}"</div>`:''}
    <div class="modal-footer" style="flex-wrap:wrap;gap:0.5rem">
      <button class="btn btn-ghost" onclick="closeModal('incomingOverlay')">Later</button>
      ${r.fromEmail?`<button class="btn btn-blue" onclick="window.open('mailto:${r.fromEmail}?subject=Re%3A%20Your%20Skillit%20Exchange%20Request')">Reply via Email</button>`:''}
      <button class="btn btn-danger" onclick="respondReq(${r.id},'declined');closeModal('incomingOverlay')">Decline</button>
      <button class="btn btn-primary" onclick="respondReq(${r.id},'accepted');closeModal('incomingOverlay')">Accept & Start Chat →</button>
    </div>
  `;
  document.getElementById('incomingOverlay').classList.add('open');
}

// ═══════════════════════════════════════════════════
// REQUESTS VIEW
// ═══════════════════════════════════════════════════
function setReqTab(tab){
  activeReqTab=tab;
  ['all','incoming','sent'].forEach(t=>document.getElementById('rt-'+t).classList.toggle('on',t===tab));
  renderRequests();
}

function renderRequests(){
  const pendingIn=requests.filter(r=>r.from==='Incoming'&&r.status==='pending');
  const alertsEl=document.getElementById('incomingAlerts');
  alertsEl.innerHTML=pendingIn.map(r=>`
    <div class="incoming-alert">
      <div class="ia-icon">📬</div>
      <div class="ia-body">
        <div class="ia-title">${esc(r.fromName)} wants to exchange skills!</div>
        <div class="ia-sub">Offers: <strong>${esc(r.fromSkill)}</strong> · Wants your: <strong>${esc(r.toSkill)}</strong></div>
      </div>
      <div class="ia-actions">
        <button class="btn btn-purple btn-sm" onclick="openIncomingRequest(${r.id})">View Request</button>
      </div>
    </div>`).join('');

  let list=[...requests].sort((a,b)=>b.ts-a.ts);
  if(activeReqTab==='sent') list=list.filter(r=>r.from===ME);
  if(activeReqTab==='incoming') list=list.filter(r=>r.from!==ME);
  document.getElementById('reqBadge').textContent=list.length;

  const el=document.getElementById('reqList');
  if(!list.length){
    el.innerHTML=`<div class="empty"><div class="empty-icon">📬</div><p>No requests here yet.<br>Browse skills and hit <strong>Connect</strong> to send your first exchange request.</p></div>`;
    return;
  }

  el.innerHTML=list.map(r=>{
    const isSent=r.from===ME;
    const isIncoming=r.from==='Incoming';
    const thrd=threads.find(t=>t.reqId===r.id);
    const letter=(isSent?r.toName:r.fromName||'?')[0];
    const [bg,fg]=PALETTE[Math.abs(r.id)%PALETTE.length];
    return `
    <div class="rcard ${r.status}">
      <div class="avatar" style="background:${bg};color:${fg};width:36px;height:36px;cursor:default;flex-shrink:0">${letter}</div>
      <div class="rcard-info">
        <div class="rcard-who">${isSent?`To: <strong>${esc(r.toName)}</strong>`:`From: <strong>${esc(r.fromName||'?')}</strong>`}</div>
        <div class="rcard-skill">${isSent?`Their skill: ${esc(r.toSkill)}`:`Offers: ${esc(r.fromSkill)} · wants: ${esc(r.toSkill)}`}</div>
        ${r.message?`<div class="rcard-msg">"${esc(r.message)}"</div>`:''}
        <div style="font-family:'JetBrains Mono',monospace;font-size:0.58rem;color:var(--muted2);margin-top:0.22rem">${ago(r.ts)}</div>
      </div>
      <div style="display:flex;flex-direction:column;gap:0.35rem;align-items:flex-end;flex-shrink:0">
        <span class="rstatus ${r.status}">${r.status}</span>
        ${isIncoming&&r.status==='pending'?`<button class="btn btn-purple btn-xs" onclick="openIncomingRequest(${r.id})">View</button>`:''}
        ${!isSent&&!isIncoming&&r.status==='pending'?`
          <button class="btn btn-blue btn-xs" onclick="respondReq(${r.id},'accepted')">Accept</button>
          <button class="btn btn-danger btn-xs" onclick="respondReq(${r.id},'declined')">Decline</button>`:''}
        ${thrd?`<button class="btn btn-ghost btn-xs" onclick="openThread('${thrd.id}')">Message →</button>`:''}
      </div>
    </div>`;
  }).join('');
}

function respondReq(id,status){
  const r=requests.find(x=>x.id===id);
  if(!r) return;
  r.status=status;
  if(status==='accepted'){
    const tid='t_'+id;
    if(!threads.find(t=>t.id===tid)){
      const col=~~(Math.random()*PALETTE.length);
      threads.push({id:tid,reqId:id,name:r.fromName,skillId:r.toId,color:col,lastMsg:'Exchange accepted!',time:Date.now(),unread:false});
      msgs[tid]=[{from:'System',text:`Exchange accepted! You can now message ${r.fromName} directly.`,time:Date.now()}];
    }
    toast(`Accepted! Opening chat with ${r.fromName}…`);
    setTimeout(()=>openThread('t_'+id),300);
  } else {
    toast('Request declined.');
  }
  saveAll();renderRequests();updateDots();
}

function openThread(tid){
  showView('messages');
  setTimeout(()=>selectThread(tid),80);
}

// ═══════════════════════════════════════════════════
// MESSAGES
// ═══════════════════════════════════════════════════
function renderMessages(){
  const list=[...threads].sort((a,b)=>b.time-a.time);
  document.getElementById('msgBadge').textContent=`${list.length} conversation${list.length!==1?'s':''}`;
  const tl=document.getElementById('tlist');

  if(!list.length){
    tl.innerHTML=`<div style="padding:1.5rem;text-align:center;color:var(--muted);font-size:0.72rem;line-height:1.65;font-family:'JetBrains Mono',monospace">No conversations yet.<br><br>Send a Connect request to start chatting with someone.</div>`;
    return;
  }

  tl.innerHTML=list.map(t=>{
    const [bg,fg]=PALETTE[(t.color||0)%PALETTE.length];
    return `
    <div class="titem ${t.id===activeThread?'active':''} ${t.unread?'unread':''}" onclick="selectThread('${t.id}')">
      <div class="avatar" style="width:32px;height:32px;font-size:0.78rem;flex-shrink:0;background:${bg};color:${fg}">${t.name[0]}</div>
      <div style="flex:1;min-width:0">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div class="tsender">${esc(t.name)}</div>
          <div class="ttime">${ago(t.time)}</div>
        </div>
        <div class="tpreview">${esc(t.lastMsg)}</div>
      </div>
      ${t.unread?'<div class="udot"></div>':''}
    </div>`;
  }).join('');

  if(activeThread) renderChatPane(activeThread);
}

function selectThread(id){
  activeThread=id;
  const t=threads.find(x=>x.id===id);
  if(t){t.unread=false;saveAll();}
  document.getElementById('noChat').style.display='none';
  document.getElementById('chatPane').style.display='flex';
  renderChatPane(id);renderMessages();updateDots();
}

function renderChatPane(tid){
  const t=threads.find(x=>x.id===tid);
  if(!t) return;
  const ms=msgs[tid]||[];
  const skill=skills.find(s=>s.id===t.skillId);
  const [bg,fg]=PALETTE[(t.color||0)%PALETTE.length];
  const pane=document.getElementById('chatPane');

  pane.innerHTML=`
    <div class="chat-top">
      <div class="avatar" style="width:32px;height:32px;font-size:0.78rem;background:${bg};color:${fg}">${t.name[0]}</div>
      <div style="flex:1">
        <div class="chat-top-name">${esc(t.name)}</div>
        <div class="chat-top-skill">${skill?esc(skill.offer):'Skill Exchange'}</div>
      </div>
      ${skill&&skill.email?`<a href="mailto:${skill.email}" class="btn btn-blue btn-sm">Email →</a>`:''}
      ${skill?`<button class="btn btn-ghost btn-sm" onclick="openProfile(${skill.id})">Profile</button>`:''}
    </div>
    <div class="chat-msgs" id="chatMsgs">
      ${ms.length?ms.map(m=>`
        <div class="msg ${m.from===ME?'me':m.from==='System'?'sys':'them'}">
          <div class="mbubble">${esc(m.text)}</div>
          <div class="mtime">${m.from==='System'?'System':esc(m.from)} · ${ago(m.time)}</div>
        </div>`).join('')
      :`<div style="flex:1;display:flex;align-items:center;justify-content:center;color:var(--muted);font-family:'JetBrains Mono',monospace;font-size:0.72rem">No messages yet — say hello! 👋</div>`}
    </div>
    <div class="chat-input">
      <textarea id="chatIn" placeholder="Type your message…" rows="1" onkeydown="chatKey(event,'${tid}')"></textarea>
      <button class="btn btn-ghost btn-sm" onclick="toggleChatbot()" title="Ask Skillit AI for help" style="flex-shrink:0">🤖</button>
      <button class="btn btn-primary" onclick="sendMsg('${tid}')">Send</button>
    </div>
  `;
  setTimeout(()=>{const el=document.getElementById('chatMsgs');if(el)el.scrollTop=el.scrollHeight;},30);
}

function chatKey(e,tid){if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMsg(tid);}}

function sendMsg(tid){
  const inp=document.getElementById('chatIn');
  const text=(inp.value||'').trim();
  if(!text) return;
  if(!msgs[tid]) msgs[tid]=[];
  msgs[tid].push({from:ME,text,time:Date.now()});
  const t=threads.find(x=>x.id===tid);
  if(t){t.lastMsg=text;t.time=Date.now();}
  inp.value='';
  saveAll();renderChatPane(tid);renderMessages();

  const target=skills.find(s=>s.id===t?.skillId)||{name:t?.name};
  if(target){
    setTimeout(()=>{
      const pool=[
        'Sounds great! Let me know what works for your schedule.',
        'Perfect. Shall we do a 45-minute intro session on Google Meet first?',
        'That works for me. I can do weekday evenings or Saturday mornings.',
        'Wonderful! What time zone are you in? Let\'s find a good slot.',
        'Looking forward to it! I\'ll send you a calendar invite shortly.',
        'Excellent! How often were you thinking we meet — once or twice a week?',
        'Happy to do this. Do you prefer video call or in-person if you\'re in Bengaluru?'
      ];
      const reply=pool[~~(Math.random()*pool.length)];
      msgs[tid].push({from:target.name,text:reply,time:Date.now()});
      if(t){t.lastMsg=reply;t.time=Date.now();t.unread=activeThread!==tid;}
      saveAll();
      if(activeThread===tid) renderChatPane(tid);
      renderMessages();updateDots();
    },1400+Math.random()*1800);
  }
}

// ═══════════════════════════════════════════════════
// DOTS & HELPERS
// ═══════════════════════════════════════════════════
function updateDots(){
  document.getElementById('msgDot').style.display=threads.some(t=>t.unread)?'block':'none';
  document.getElementById('reqDot').style.display=requests.some(r=>r.status==='pending'&&r.from!==ME)?'block':'none';
  const sessionDotEl=document.getElementById('sessionDot');
  if(sessionDotEl) sessionDotEl.style.display='block';
}

function closeModal(id){
  document.getElementById(id).classList.remove('open');
  if(id==='postOverlay') editId=null;
  if(id==='connectOverlay') connTarget=null;
}
function closeBg(e,id){if(e.target===document.getElementById(id))closeModal(id);}

let _tt;
function toast(msg,err=false){
  const el=document.getElementById('toast');
  el.textContent=msg;
  el.style.background=err?'var(--red)':'var(--accent)';
  el.style.color=err?'#fff':'#0a0b0d';
  el.classList.add('show');
  clearTimeout(_tt);
  _tt=setTimeout(()=>el.classList.remove('show'),3800);
}

// ═══════════════════════════════════════════════════
// SHOW VIEW (extended)
// ═══════════════════════════════════════════════════
function showView(name){
  document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(t=>t.classList.remove('active'));
  const el=document.getElementById('view-'+name);
  const tab=document.getElementById('tab-'+name);
  if(el) el.classList.add('active');
  if(tab) tab.classList.add('active');
  if(name==='browse') renderBrowse();
  if(name==='requests'){renderRequests();updateDots();}
  if(name==='messages') renderMessages();
  if(name==='freelance') renderJobs();
  if(name==='wallet') renderWallet();
}

// ═══════════════════════════════════════════════════
// TOKEN SYSTEM
// ═══════════════════════════════════════════════════
let tokens = store.get('sk2_tokens') || 100;
let txHistory = store.get('sk2_tx') || [
  {label:'Welcome bonus',type:'earn',amount:100,ts:Date.now()-86400000*2},
];
let sessionCount = parseInt(store.get('sk2_sessions') || '0');
let isEduVerified = store.get('sk2_edu_verified') || false;
let isAiVerified = store.get('sk2_ai_verified') || false;

function saveTokens(){
  store.set('sk2_tokens',tokens);
  store.set('sk2_tx',txHistory);
  store.set('sk2_sessions',sessionCount);
  store.set('sk2_edu_verified',isEduVerified);
  store.set('sk2_ai_verified',isAiVerified);
  document.getElementById('navTokens').textContent=tokens;
  document.getElementById('walletBalance').textContent=tokens;
}

function spendTokens(amount,label){
  if(tokens<amount){toast(`Not enough tokens! Need ${amount} tokens.`,true);return false;}
  tokens-=amount;
  txHistory.unshift({label,type:'spend',amount,ts:Date.now()});
  saveTokens();return true;
}

function addTokens(amount,label){
  tokens+=amount;
  txHistory.unshift({label,type:'earn',amount,ts:Date.now()});
  saveTokens();
  toast(`+${amount} tokens earned! 🎉`);
}

function earnTokens(){
  sessionCount++;
  addTokens(25,'Teaching session completed');
  store.set('sk2_sessions',sessionCount);
  toast(`Session recorded! +25 tokens. You now have ${sessionCount} sessions.`);
  renderWallet();
}

// ═══════════════════════════════════════════════════
// VERIFICATION
// ═══════════════════════════════════════════════════
let pendingEduCode = null;

function openVerifyModal(){
  document.getElementById('verifyOverlay').classList.add('open');
  document.getElementById('eduStatus').textContent = isEduVerified?'✓ .edu email already verified!':'';
  document.getElementById('verifyBonus').style.display = (isEduVerified||isAiVerified)?'block':'none';
}

function verifyEdu(){
  const email = document.getElementById('vEduEmail').value.trim();
  if(!email.endsWith('.edu')){toast('Please enter a valid .edu email address.',true);return;}
  if(isEduVerified){toast('You are already .edu verified!');return;}
  pendingEduCode = Math.floor(100000+Math.random()*900000).toString();
  document.getElementById('eduStatus').textContent = `📧 Code "sent" to ${email} (demo: ${pendingEduCode})`;
  document.getElementById('eduCodeGroup').style.display='block';
  toast('Verification code sent to your .edu email!');
}

function confirmEduCode(){
  const code = document.getElementById('vEduCode').value.trim();
  if(code === pendingEduCode){
    isEduVerified=true;
    document.getElementById('eduStatus').textContent='✓ .edu email verified successfully!';
    document.getElementById('eduCodeGroup').style.display='none';
    if(!store.get('sk2_edu_bonus_given')){
      addTokens(50,'.edu Verification Bonus');
      store.set('sk2_edu_bonus_given',true);
    }
    document.getElementById('verifyBonus').style.display='block';
    saveTokens();
  } else {
    toast('Incorrect code. Try again.',true);
  }
}

function handleDocUpload(e){
  const files=[...e.target.files];
  if(!files.length) return;
  document.getElementById('uploadLabel').textContent=`${files.length} file(s) selected`;
  const docsEl=document.getElementById('uploadedDocs');
  docsEl.innerHTML=files.map(f=>`<div style="background:var(--card2);border:1px solid var(--border);border-radius:6px;padding:0.5rem 0.75rem;font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--muted)">📄 ${f.name} <span style="color:var(--teal)">Uploaded</span></div>`).join('');
  
  // Simulate AI analysis
  const bar = document.getElementById('aiAnalysis');
  bar.style.display='block';
  let prog=0;
  const fill=document.getElementById('progressFill');
  const interval=setInterval(()=>{
    prog+=8;fill.style.width=Math.min(prog,100)+'%';
    if(prog>=100){
      clearInterval(interval);
      const results=['Portfolio documents appear authentic.','Skill claims match uploaded certificates.','Professional credentials verified.','Document metadata consistent with claims.'];
      document.getElementById('aiResult').innerHTML=results.map(r=>`✓ ${r}`).join('<br>');
      document.getElementById('aiAnalysis').style.color='var(--teal)';
      if(!isAiVerified && !store.get('sk2_ai_bonus_given')){
        isAiVerified=true;
        addTokens(30,'AI Document Verification Bonus');
        store.set('sk2_ai_bonus_given',true);
        saveTokens();
      }
      document.getElementById('verifyBonus').style.display='block';
    }
  },120);
}

function finalizeVerify(){
  if(!isEduVerified&&!isAiVerified){toast('Please complete at least one verification step.',true);return;}
  toast('✓ Profile verified! Your badges are now live.');
  closeModal('verifyOverlay');
}

// ═══════════════════════════════════════════════════
// WALLET RENDER
// ═══════════════════════════════════════════════════
function renderWallet(){
  document.getElementById('walletBalance').textContent=tokens;
  const txEl=document.getElementById('txList');
  if(!txHistory.length){txEl.innerHTML='<div style="color:var(--muted);font-size:0.78rem;padding:1rem">No transactions yet.</div>';return;}
  txEl.innerHTML=txHistory.slice(0,20).map(t=>`
    <div class="tx-item">
      <div>
        <div class="tx-label">${t.label}</div>
        <div class="tx-meta">${ago(t.ts)}</div>
      </div>
      <div class="tx-amount ${t.type}">${t.type==='earn'?'+':'-'}${t.amount} 🪙</div>
    </div>`).join('');
}

// ═══════════════════════════════════════════════════
// FREELANCE / JOBS
// ═══════════════════════════════════════════════════
const JOBS=[
  {id:1,company:'Razorpay',title:'Freelance React Developer',desc:'Build payment UI components for our merchant dashboard. Remote-friendly, milestone-based contract.',tags:['React','TypeScript','REST APIs'],rate:'₹2,000–₹3,500/hr',type:'Contract',cost:50,minSessions:5},
  {id:2,company:'Zomato',title:'UX/Product Designer — Food Tech',desc:'Redesign the restaurant onboarding flow. 3-month contract, 20hrs/week. Figma expert required.',tags:['Figma','UX Research','Prototyping'],rate:'₹1,800–₹2,800/hr',type:'Part-time',cost:50,minSessions:5},
  {id:3,company:'PhonePe',title:'Machine Learning Engineer',desc:'Build recommendation models for our UPI transaction categorization system.',tags:['Python','PyTorch','MLOps'],rate:'₹3,500–₹5,500/hr',type:'Contract',cost:75,minSessions:15},
  {id:4,company:'BYJU\'S',title:'Carnatic Music Content Creator',desc:'Create 20 structured video lessons on Carnatic music theory for our edtech platform.',tags:['Carnatic Music','Video Production','Curriculum Design'],rate:'₹800–₹1,500/hr',type:'Project',cost:25,minSessions:5},
  {id:5,company:'Swiggy',title:'Data Analyst — Growth',desc:'Analyze cohort retention data and build dashboards for our growth experiments team.',tags:['SQL','Python','Tableau','A/B Testing'],rate:'₹1,500–₹2,500/hr',type:'Contract',cost:50,minSessions:5},
  {id:6,company:'Meesho',title:'Creative Writing — Brand Storytelling',desc:'Craft compelling seller success stories and social media narratives for our brand campaigns.',tags:['Copywriting','Brand Voice','Social Media'],rate:'₹600–₹1,200/hr',type:'Freelance',cost:25,minSessions:5},
];

let currentApplyJob = null;

function renderJobs(){
  const unlocked = sessionCount>=5;
  document.getElementById('freelanceLockBanner').style.display=unlocked?'none':'flex';
  document.getElementById('jobCount').textContent=`${JOBS.length} listings`;
  const grid=document.getElementById('jobsGrid');
  grid.innerHTML=JOBS.map((j,i)=>{
    const hasAccess=sessionCount>=j.minSessions;
    return `
    <div class="job-card" style="animation-delay:${i*0.03}s;${!hasAccess?'opacity:0.55':''}">
      ${j.type==='Contract'?`<span class="pro-badge">${j.type}</span>`:'<span class="pro-badge" style="border-color:rgba(66,255,228,0.3);color:var(--teal)">${j.type}</span>'}
      <div class="job-company">${j.company}</div>
      <div class="job-title">${j.title}</div>
      <div class="job-desc">${j.desc}</div>
      <div class="job-tags">${j.tags.map(t=>`<span class="job-tag">${t}</span>`).join('')}</div>
      <div class="job-footer">
        <div>
          <div class="job-rate">${j.rate}</div>
          <div style="font-family:'JetBrains Mono',monospace;font-size:0.58rem;color:var(--orange);margin-top:0.2rem">🪙 ${j.cost} tokens to apply · ${j.minSessions}+ sessions required</div>
        </div>
        ${hasAccess
          ?`<button class="btn btn-primary btn-sm" onclick="openApply(${j.id})">Apply →</button>`
          :`<button class="btn btn-ghost btn-sm" disabled style="opacity:0.5;cursor:not-allowed">🔒 Locked</button>`}
      </div>
    </div>`;
  }).join('');
}

function openApply(jobId){
  const job=JOBS.find(j=>j.id===jobId);
  if(!job) return;
  if(sessionCount<job.minSessions){toast(`Need ${job.minSessions}+ sessions to apply for this role.`,true);return;}
  currentApplyJob=jobId;
  document.getElementById('applyTitle').textContent=`Apply: ${job.title} @ ${job.company}`;
  document.getElementById('applyJobPreview').innerHTML=`<strong>${job.company}</strong> · ${job.title}<br>${job.desc}<br><br>Rate: <strong style="color:var(--accent)">${job.rate}</strong>`;
  document.getElementById('applyCostBanner').textContent=`This application costs ${job.cost} tokens. Your balance: ${tokens} tokens.`;
  document.getElementById('applySubmitBtn').textContent=`Apply & Spend ${job.cost} Tokens →`;
  document.getElementById('applyOverlay').classList.add('open');
}

function submitJobApplication(){
  const job=JOBS.find(j=>j.id===currentApplyJob);
  if(!job) return;
  const cover=document.getElementById('applyCover').value.trim();
  if(!cover){toast('Please write a cover letter.',true);return;}
  if(!spendTokens(job.cost,`Applied to ${job.title} @ ${job.company}`))return;
  closeModal('applyOverlay');
  document.getElementById('applyCover').value='';
  document.getElementById('applyPortfolioLink').value='';
  renderWallet();
  toast(`🎉 Application sent to ${job.company}! They'll reach out via Skillit.`);
}

// ═══════════════════════════════════════════════════
// CHATBOT
// ═══════════════════════════════════════════════════
let chatbotOpen=false;
const CHATBOT_RESPONSES={
  'hello':`Hi there! 👋 I'm Skillit AI. I can help you find skill matches, understand how tokens work, explain verification, or guide you to freelance opportunities. What's on your mind?`,
  'hi':`Hey! 🙌 Welcome to Skillit. Ask me anything — tokens, verification, freelancing, or how to find the right skill exchange partner.`,
  'token':`🪙 **Tokens** are Skillit's currency. You start with 100. Earn more by:<br>• Teaching sessions (+25 each)<br>• .edu verification (+50 bonus)<br>• AI document check (+30 bonus)<br>• Pro subscription (200/mo)<br><br>Spend tokens to apply for freelance jobs!`,
  'verify':`🛡 **Verification** builds trust! Two ways to get verified:<br>1. **.edu Email** — proves academic credentials<br>2. **AI Document Check** — upload certificates & our AI validates them<br><br>Verified profiles get more connections + bonus tokens. Click "Wallet" → "Get Verified"!`,
  'freelance':`💼 **Freelancing** unlocks after 5+ successful peer sessions. Then spend tokens (25–75) to apply to positions from companies like Razorpay, Zomato, PhonePe & more. All payments are escrow-protected!`,
  'escrow':`🔒 **Escrow** means your payment is held safely until you confirm delivery. No risk of non-payment — the company deposits funds before work starts, and you get paid when milestones are complete.`,
  'session':`A **peer session** is a skill exchange with another user. Each successful session earns you 25 tokens and counts toward your session total. You need 5+ sessions to unlock freelancing!`,
  'pro':`⭐ **Pro subscription** is ₹499/month. It gives you:<br>• 200 tokens per month<br>• Unlimited freelance applications<br>• Priority in search results<br>• Access to Expert-tier jobs (₹4,000+/hr)`,
  'contact':`📧 For company partnerships or platform enquiries, email us at **hello@skillit.com**. Companies can post freelance opportunities for our verified talent pool!`,
  'help':`I can help with:<br>• 🪙 Tokens & earning<br>• 🛡 Verification<br>• 💼 Freelancing<br>• 🔒 Escrow payments<br>• ⭐ Pro subscription<br><br>Just ask about any of these topics!`,
};

function initChatbot(){
  const msgsEl=document.getElementById('chatbotMsgs');
  msgsEl.innerHTML=`<div class="bot-msg">Hey! 👋 I'm your Skillit AI assistant. Ask me about tokens, verification, freelancing, or anything else on the platform!</div>`;
}

function toggleChatbot(){
  chatbotOpen=!chatbotOpen;
  const win=document.getElementById('chatbotWindow');
  win.classList.toggle('open',chatbotOpen);
  if(chatbotOpen&&document.getElementById('chatbotMsgs').children.length===0) initChatbot();
  document.getElementById('chatbotToggle').textContent=chatbotOpen?'✕':'🤖';
}

function chatbotKey(e){if(e.key==='Enter')sendChatbot();}

function sendChatbot(){
  const inp=document.getElementById('chatbotIn');
  const text=(inp.value||'').trim();
  if(!text) return;
  inp.value='';
  const msgsEl=document.getElementById('chatbotMsgs');
  msgsEl.innerHTML+=`<div class="user-msg">${esc(text)}</div>`;
  msgsEl.scrollTop=msgsEl.scrollHeight;

  // Find best response
  setTimeout(()=>{
    const lower=text.toLowerCase();
    let reply=`Thanks for your question! I'm still learning. Try asking about **tokens**, **verification**, **freelancing**, **escrow**, **sessions**, **pro**, or type **help** for all topics.`;
    for(const [key,val] of Object.entries(CHATBOT_RESPONSES)){
      if(lower.includes(key)){reply=val;break;}
    }
    msgsEl.innerHTML+=`<div class="bot-msg">${reply}</div>`;
    msgsEl.scrollTop=msgsEl.scrollHeight;
  },600+Math.random()*400);
}

// ═══════════════════════════════════════════════════
// ENHANCED PROFILE (with verification badges)
// ═══════════════════════════════════════════════════
const _origOpenProfile=openProfile;
// patch verification badges into card rendering via overriding renderBrowse card
// (badges added in card rendering below)

// ═══════════════════════════════════════════════════
// INIT
// ═══════════════════════════════════════════════════
saveAll();
renderBrowse();
renderWallet();
updateDots();
saveTokens();

// ═══════════════════════════════════════════════════
// AUTH SYSTEM
// ═══════════════════════════════════════════════════
let currentUser = store.get('sk2_user') || null;
let currentPlan = store.get('sk2_plan') || 'free';
let deviceId = store.get('sk2_device') || ('FP-' + Math.random().toString(36).substr(2,8).toUpperCase());
store.set('sk2_device', deviceId);
let pendingAuthOtp = null;
let livenessVerified = store.get('sk2_liveness') || false;
let skillMode = 'both';
let authMode = 'signin';

document.getElementById('deviceIdDisplay').textContent = deviceId;

// Show auth overlay if not logged in
function checkAuth(){
  if(!currentUser){
    document.getElementById('authOverlay').style.display='flex';
  } else {
    document.getElementById('authOverlay').style.display='none';
    updatePlanBadge();
    renderSessions();
    renderLeaderboard();
    renderBounties();
  }
}
checkAuth();

function switchAuthTab(tab){
  authMode = tab;
  document.getElementById('authTabSignIn').classList.toggle('active', tab==='signin');
  document.getElementById('authTabSignUp').classList.toggle('active', tab==='signup');
  document.getElementById('authSignIn').style.display = tab==='signin'?'block':'none';
  document.getElementById('authSignUp').style.display = tab==='signup'?'block':'none';
  const title = document.getElementById('authBoxTitle');
  const sub = document.getElementById('authBoxSub');
  if(title) title.textContent = tab==='signin' ? 'Welcome back' : 'Create your account';
  if(sub) sub.textContent = tab==='signin'
    ? 'Sign in with your institutional email to continue.'
    : 'Join India\'s most verified skill exchange platform.';
}

function setSkillMode(mode){
  skillMode = mode;
  ['learn','teach','both'].forEach(m=>document.getElementById('mode'+m.charAt(0).toUpperCase()+m.slice(1)).classList.toggle('active',m===mode));
}

function authSendOtp(){
  const email = document.getElementById('authEmail').value.trim();
  if(!email){ toast('Please enter your email address.',true); return; }
  pendingAuthOtp = Math.floor(100000+Math.random()*900000).toString();
  document.getElementById('authOtpHint').textContent = `Demo OTP: ${pendingAuthOtp} (sent to ${email})`;
  document.getElementById('authOtpGroup').style.display='block';
  document.getElementById('authConfirmBtn').style.display='block';
  // Show liveness if new device
  if(!livenessVerified){
    document.getElementById('authLivenessBox').style.display='block';
  }
  toast('OTP sent! Check your .edu email.');
}

function simulateLiveness(){
  setTimeout(()=>{
    livenessVerified=true;
    store.set('sk2_liveness',true);
    const r1=document.getElementById('livenessResult');
    const r2=document.getElementById('signupLivenessResult');
    const msg='<span style="color:var(--teal)">✓ Liveness check passed. Identity confirmed.</span>';
    if(r1) r1.innerHTML=msg;
    if(r2) r2.innerHTML=msg;
    toast('✓ Liveness verification complete!');
    document.getElementById('authLivenessBox').style.display='none';
  },1800);
  const r=document.getElementById('livenessResult')||document.getElementById('signupLivenessResult');
  if(r) r.innerHTML='<span style="color:var(--muted)">⟳ Scanning…</span>';
}

function authConfirmOtp(){
  const otp = (document.getElementById('authOtp').value||'').trim();
  if(otp !== pendingAuthOtp){ toast('Incorrect OTP. Try again.',true); return; }
  const email = document.getElementById('authEmail').value.trim();
  currentUser = { email, name: email.split('@')[0].replace('.',' '), mode: skillMode, device: deviceId };
  store.set('sk2_user', currentUser);
  document.getElementById('authOverlay').style.display='none';
  updatePlanBadge();
  renderSessions();
  renderLeaderboard();
  renderBounties();
  toast(`Welcome back, ${currentUser.name}! 🎉`);
}

function authSignUp(){
  const name = document.getElementById('signupName').value.trim();
  const email = document.getElementById('signupEmail').value.trim();
  if(!document.getElementById('antiscamCheck').checked){ toast('Please read and accept the Anti-Scam Agreement.',true); return; }
  if(!name||!email){ toast('Name and email are required.',true); return; }
  if(!livenessVerified){ toast('Please complete liveness verification first.',true); return; }
  currentUser = { email, name, mode: skillMode, device: deviceId };
  store.set('sk2_user', currentUser);
  document.getElementById('authOverlay').style.display='none';
  updatePlanBadge();
  renderSessions();
  renderLeaderboard();
  renderBounties();
  toast(`Account created! Welcome to Skillit, ${name} 🎉`);
}

function logOut(){
  store.set('sk2_user', null);
  currentUser = null;
  livenessVerified = false;
  document.getElementById('authOtpGroup').style.display='none';
  document.getElementById('authConfirmBtn').style.display='none';
  document.getElementById('authLivenessBox').style.display='none';
  document.getElementById('authEmail').value='';
  document.getElementById('authOtp').value='';
  document.getElementById('authOverlay').style.display='flex';
}

function switchToRecruiterAuth(){
  toast('Recruiter portal — please use your company email to register.'); 
  switchAuthTab('signup');
}

// ═══════════════════════════════════════════════════
// PLAN MANAGEMENT
// ═══════════════════════════════════════════════════
function upgradePlan(plan){
  currentPlan = plan;
  store.set('sk2_plan', plan);
  updatePlanBadge();
  const prices = { pro:'₹499/mo', expert:'₹999/mo' };
  toast(`🎉 Upgraded to ${plan.charAt(0).toUpperCase()+plan.slice(1)}! ${prices[plan]||''} — All benefits activated.`);
  // Update active request limits
  checkRequestLimit();
}

function setCurrentPlan(plan){
  toast('You are already on the Free plan.');
}

function updatePlanBadge(){
  const badge = document.getElementById('navPlanBadge');
  if(!badge) return;
  const configs = {
    free: { cls:'badge-free', text:'● Free' },
    pro: { cls:'badge-pro', text:'⭐ Pro' },
    expert: { cls:'badge-expert', text:'🔮 Expert' }
  };
  const c = configs[currentPlan] || configs.free;
  badge.className = 'public-badge ' + c.cls;
  badge.textContent = c.text;
  // Update free limit banner
  const banner = document.getElementById('freeLimitBanner');
  if(banner) banner.style.display = currentPlan==='free' ? 'flex' : 'none';
}

function checkRequestLimit(){
  if(currentPlan==='free'){
    const activeReqs = requests.filter(r=>r.from===ME&&r.status==='pending').length;
    if(activeReqs>=2) return false;
  }
  return true;
}

// Patch sendRequest to check plan limits
const _origSendRequest = sendRequest;
window.sendRequest = function(){
  if(currentPlan==='free'){
    const activeReqs = requests.filter(r=>r.from===ME&&r.status==='pending').length;
    if(activeReqs>=2){
      toast('Free plan limit: max 2 active requests. Upgrade to Pro for unlimited!',true);
      closeModal('connectOverlay');
      showView('pricing');
      return;
    }
  }
  _origSendRequest();
};

// ═══════════════════════════════════════════════════
// SESSIONS COMMAND CENTER — COMPLETE REDESIGN
// ═══════════════════════════════════════════════════
let sessionTimerInterval = null;
let sessionSeconds = 45 * 60;
let sessionStarted = false;
let partnerCheckedIn = false;
let myCheckedIn = false;
let proofUploaded = false;
let currentRating = 0;
const selectedBadges = new Set();
const totalSessionSeconds = 45 * 60;
const minSessionSeconds = 30 * 60;

function renderSessions(){
  document.getElementById('sessionRepCount').textContent = sessionCount;
  const hist = [
    {name:'Rahul Verma', skill:'React ↔ Figma', date:'Today · 2h ago', status:'completed', earned:25, rating:4.8},
    {name:'Poornima Iyengar', skill:'Carnatic ↔ Web Dev', date:'Yesterday', status:'completed', earned:25, rating:4.6},
    {name:'Ananya Krishnan', skill:'ML ↔ Python', date:'2 days ago', status:'disputed', earned:0, rating:0},
  ];
  const el = document.getElementById('sessionHistory');
  if(!el) return;
  el.innerHTML = hist.map(h=>`
    <div class="session-hist-item">
      <div style="flex:1">
        <div style="font-weight:600;font-size:0.85rem;margin-bottom:0.15rem">${h.name}</div>
        <div style="font-family:'JetBrains Mono',monospace;font-size:0.64rem;color:var(--muted)">${h.skill} · ${h.date}</div>
      </div>
      <div style="display:flex;gap:0.4rem;align-items:center;flex-wrap:wrap">
        ${h.status==='completed'?`<span class="public-badge badge-verified">✓ Completed</span><span style="font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--accent)">+${h.earned} 🪙</span><span style="font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--muted)">★ ${h.rating}</span>`:''}
        ${h.status==='disputed'?`<span class="public-badge" style="background:rgba(255,77,77,0.1);border:1px solid rgba(255,77,77,0.3);color:var(--red)">⚠ Disputed</span>`:''}
      </div>
    </div>
  `).join('');
  document.getElementById('sessionsBadge').textContent = sessionStarted ? '1 active' : '0 active';
}

function doCheckin(){
  myCheckedIn = true;
  document.getElementById('myStatusBadge').textContent = '● Checked-In';
  document.getElementById('myStatusBadge').className = 'status-indicator online';
  document.getElementById('myStatusCard').className = 'status-user active-user';
  toast('📍 GPS check-in confirmed! Waiting for partner…');
  setTimeout(()=>{
    partnerCheckedIn = true;
    document.getElementById('partnerStatusBadge').textContent = '✓ Checked-In';
    document.getElementById('partnerStatusBadge').className = 'status-indicator online';
    document.getElementById('partnerStatusCard').className = 'status-user active-user';
    const btn = document.getElementById('startSessionBtn');
    btn.disabled = false;
    btn.textContent = '⚡ Both Active — Start Session Now';
    toast('✓ Both users confirmed! You can now start the session.');
  }, 2000);
}

function startSession(){
  if(!myCheckedIn){ toast('You must check in first.',true); return; }
  sessionStarted = true;
  document.getElementById('startSessionBtn').textContent = '● Session Active';
  document.getElementById('startSessionBtn').disabled = true;
  document.getElementById('escrowLockBadge').textContent = '🔒 Sparks Locked — Session Live';
  startEscrowTimer();
  document.getElementById('sessionsBadge').textContent = '1 active';
  toast('🚀 Session started! Timer running. Escrow locked.');
}

function startEscrowTimer(){
  if(sessionTimerInterval) clearInterval(sessionTimerInterval);
  sessionTimerInterval = setInterval(()=>{
    if(sessionSeconds > 0) sessionSeconds--;
    else { clearInterval(sessionTimerInterval); }
    const m = Math.floor(sessionSeconds/60);
    const s = sessionSeconds%60;
    const el = document.getElementById('sessionCountdown');
    if(el){
      el.textContent = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
      el.className = sessionSeconds < 300 ? 'escrow-countdown urgent' : 'escrow-countdown';
    }
    const elapsed = totalSessionSeconds - sessionSeconds;
    const pct = Math.min(100,(elapsed/totalSessionSeconds)*100);
    const fill = document.getElementById('escrowProgressFill');
    if(fill) fill.style.width = pct+'%';
    const minMsg = document.getElementById('escrowMinMsg');
    if(minMsg && elapsed >= minSessionSeconds){
      minMsg.style.color='var(--teal)';
      minMsg.textContent='✓ Minimum session time met — credits can be released';
      const n = document.getElementById('escrowMinNote');
      if(n) n.style.display='none';
    }
  },1000);
}

function triggerProofUpload(){
  document.getElementById('proofFileInput').click();
}

function handleProofUpload(e){
  const files = e.target.files;
  if(!files.length) return;
  proofUploaded = true;
  const badge = document.getElementById('proofRequiredBadge');
  if(badge){ badge.className='proof-required-badge satisfied'; badge.textContent=`✓ ${files.length} file(s) uploaded`; }
  const zone = document.getElementById('proofDropZone');
  if(zone){
    zone.classList.add('has-file');
    const icon = zone.querySelector('.proof-drop-icon');
    const txt = zone.querySelector('.proof-drop-text');
    if(icon) icon.textContent='✅';
    if(txt) txt.textContent=`${files.length} file(s) uploaded`;
  }
  const thumbs = document.querySelectorAll('.proof-thumb');
  for(let i=0;i<Math.min(files.length,thumbs.length);i++) thumbs[i].classList.add('uploaded');
  toast(`📸 ${files.length} proof file(s) uploaded!`);
}

function checkTakeaways(){
  const vals = ['takeaway1','takeaway2','takeaway3'].map(id=>document.getElementById(id)?.value.trim()||'');
  vals.forEach((v,i)=>{
    const num = document.getElementById(`t${i+1}num`);
    const inp = document.getElementById(`takeaway${i+1}`);
    if(num) num.className = v.length>5?'takeaway-num filled':'takeaway-num';
    if(inp) inp.className = v.length>5?'takeaway-input filled':'takeaway-input';
  });
  const allFilled = vals.every(v=>v.length>5);
  const btn = document.getElementById('completeBtn');
  if(btn){
    if(allFilled){
      btn.className='complete-btn ready';
      btn.textContent='✅ Complete Session & Release Credits';
    } else {
      btn.className='complete-btn';
      const rem = vals.filter(v=>v.length<=5).length;
      btn.textContent=`🔒 Complete Session (${rem} takeaway${rem!==1?'s':''} remaining)`;
    }
  }
}

function completeSession(){
  const vals = ['takeaway1','takeaway2','takeaway3'].map(id=>document.getElementById(id)?.value.trim()||'');
  if(!vals.every(v=>v.length>5)){ toast('Fill all 3 key takeaways before completing.',true); return; }
  if(!proofUploaded){ toast('Tutor must upload proof of work first.',true); return; }
  if(sessionTimerInterval) clearInterval(sessionTimerInterval);
  addTokens(25,'Session completed — Key takeaways submitted');
  renderWallet(); sessionCount++; store.set('sk2_sessions',sessionCount);
  document.getElementById('sessionRepCount').textContent = sessionCount;
  toast('🎉 Session complete! 25 tokens earned. Submit feedback below.');
  const fb = document.getElementById('feedbackSubmit');
  if(fb){ fb.className='feedback-submit ready'; fb.textContent='Submit Feedback & Update Profile'; }
}

function rateStar(n){
  currentRating=n;
  document.querySelectorAll('.star').forEach((s,i)=>{ s.className=i<n?'star lit':'star'; });
  const fb=document.getElementById('feedbackSubmit');
  if(fb){ fb.className='feedback-submit ready'; fb.textContent=`Submit Feedback (★${n}${selectedBadges.size>0?' + '+selectedBadges.size+' badge(s)':''})`; }
}

function toggleBadge(btn){
  const badge=btn.dataset.badge;
  if(selectedBadges.has(badge)){ selectedBadges.delete(badge); btn.classList.remove('selected'); }
  else { selectedBadges.add(badge); btn.classList.add('selected'); }
}

function submitFeedback(){
  if(!currentRating){ toast('Please rate the session first.',true); return; }
  toast(`⭐ Feedback submitted! ★${currentRating}${selectedBadges.size?` + badges: ${Array.from(selectedBadges).join(', ')}`:''}. Tutor profile updated instantly!`);
  const fb=document.getElementById('feedbackSubmit');
  if(fb){ fb.textContent='✓ Feedback Submitted'; fb.disabled=true; }
}

function launchTool(type){
  const map={whiteboard:'🖊 Whiteboard launched — Excalidraw integration',doc:'📄 Shared Google Doc — link copied',video:'📹 Video call started — Jitsi Meet',code:'💻 Code editor opened — CodeSandbox'};
  toast(map[type]||'Tool launching…');
}

function openDisputeModal(){ document.getElementById('disputeOverlay').classList.add('open'); }
function submitDispute(){ closeModal('disputeOverlay'); toast('⚠ Dispute submitted. Mediation team reviews within 2 hours. Credits frozen.'); }
function uploadProof(){ triggerProofUpload(); }
function openSummaryModal(){
  document.getElementById('summaryOverlay').classList.add('open');
  const ta=document.getElementById('summaryText');
  if(ta) ta.addEventListener('input',function(){
    const len=this.value.length;
    const cc=document.getElementById('summaryCharCount');
    if(cc){ cc.textContent=`${len} / 100 min characters`; cc.style.color=len>=100?'var(--teal)':'var(--orange)'; }
  });
}
function submitSummary(){
  const txt=document.getElementById('summaryText')?.value||'';
  if(txt.length<100){ toast('Please write at least 100 characters.',true); return; }
  closeModal('summaryOverlay');
  addTokens(25,'Session completed — Summary submitted'); renderWallet(); sessionCount++; store.set('sk2_sessions',sessionCount);
  toast('🎉 Session complete! Credits released. +25 tokens earned.');
}

// ═══════════════════════════════════════════════════
// RECRUITER PORTAL
// ═══════════════════════════════════════════════════
const LEADERBOARD_DATA = [
  {rank:1,name:'Aarav Sharma',skill:'Full-Stack (React, Node, AWS)',sessions:47,rating:4.98,plan:'expert',tokens:820,verified:true,badge:'gold'},
  {rank:2,name:'Shruti Agarwal',skill:'Data Science & ML (Python)',sessions:42,rating:4.95,plan:'expert',tokens:740,verified:true,badge:'gold'},
  {rank:3,name:'Preethi Rajan',skill:'Bharatanatyam & Performing Arts',sessions:38,rating:4.94,plan:'expert',tokens:680,verified:true,badge:'silver'},
  {rank:4,name:'Ranjit Deshmukh',skill:'Chess & Strategy (FIDE 2180)',sessions:35,rating:4.91,plan:'expert',tokens:650,verified:true,badge:'silver'},
  {rank:5,name:'Aditi Chandra',skill:'Clinical Psychology & CBT',sessions:31,rating:4.89,plan:'pro',tokens:580,verified:true,badge:'bronze'},
  {rank:6,name:'Karthik Subramanian',skill:'Unity Game Dev & C#',sessions:28,rating:4.87,plan:'pro',tokens:510,verified:true,badge:'bronze'},
  {rank:7,name:'Tara Joshi',skill:'Artisan Baking & Pastry Arts',sessions:25,rating:4.85,plan:'expert',tokens:490,verified:true,badge:''},
  {rank:8,name:'Farhan Qureshi',skill:'Hindustani Classical Vocals',sessions:24,rating:4.83,plan:'pro',tokens:460,verified:true,badge:''},
];

const BOUNTIES_DATA = [
  {id:1,company:'Razorpay',title:'React Dashboard Architect',desc:'Build real-time merchant analytics dashboard with complex state management.',reward:'₹85,000 project',tokens:['React','TypeScript','Redux','WebSockets'],deadline:'Feb 28'},
  {id:2,company:'Swiggy',title:'Data Science Bounty — Demand Forecasting',desc:'Build ML model to predict food demand by city block. 6-week contract.',reward:'₹1,20,000 project',tokens:['Python','Time Series','ML','SQL'],deadline:'Mar 15'},
  {id:3,company:'CRED',title:'iOS Performance Specialist',desc:'Optimize app launch time and smooth scrolling for payments app.',reward:'₹2,800/hr',tokens:['Swift','iOS','Instruments','Performance'],deadline:'Mar 1'},
  {id:4,company:'EduTech Startup',title:'Carnatic Music Curriculum Designer',desc:'Design 40-lesson video curriculum for online Carnatic music school.',reward:'₹45,000 project',tokens:['Carnatic Music','Curriculum','Video'],deadline:'Apr 1'},
];

function renderLeaderboard(){
  const el = document.getElementById('leaderboardList');
  if(!el) return;
  const q = (document.getElementById('leaderboardSearch')?.value||'').toLowerCase();
  let data = LEADERBOARD_DATA.filter(d=>!q||d.name.toLowerCase().includes(q)||d.skill.toLowerCase().includes(q)||d.tokens.toString().toLowerCase().includes(q));
  el.innerHTML = data.map(d=>`
    <div class="lboard-item ${d.badge}" onclick="toast('📧 Recruiter contact: In production this sends a direct message to ${d.name}.')">
      <div class="lboard-rank" style="color:${d.badge==='gold'?'var(--accent)':d.badge==='silver'?'var(--blue)':d.badge==='bronze'?'var(--orange)':'var(--muted)'}">${d.rank}</div>
      <div class="lboard-info">
        <div class="lboard-name">${d.name}
          ${d.verified?'<span class="public-badge badge-verified" style="margin-left:0.3rem">✓ Verified</span>':''}
          <span class="public-badge ${d.plan==='expert'?'badge-expert':'badge-pro'}" style="margin-left:0.2rem">${d.plan==='expert'?'🔮 Expert':'⭐ Pro'}</span>
        </div>
        <div class="lboard-skill">${d.skill}</div>
        <div class="lboard-meta">
          <span class="lboard-stat">⟳ ${d.sessions} sessions</span>
          <span class="lboard-stat">★ ${d.rating}</span>
          <span class="lboard-stat">🪙 ${d.tokens} tokens</span>
        </div>
      </div>
      <div class="lboard-right">
        <button class="btn btn-purple btn-sm">Contact →</button>
      </div>
    </div>
  `).join('');
}

function renderBounties(){
  const el = document.getElementById('bountyGrid');
  if(!el) return;
  el.innerHTML = BOUNTIES_DATA.map(b=>`
    <div class="bounty-card">
      <div class="bounty-company">🏢 ${b.company}</div>
      <div class="bounty-title">${b.title}</div>
      <div style="font-size:0.76rem;color:var(--muted);margin-bottom:0.7rem;line-height:1.6">${b.desc}</div>
      <div class="bounty-reward">${b.reward}</div>
      <div class="bounty-tokens">🪙 Required tokens: ${b.tokens.join(', ')}</div>
      <div class="bounty-tags">
        ${b.tokens.map(t=>`<span class="btag">${t}</span>`).join('')}
      </div>
      <div style="display:flex;align-items:center;justify-content:space-between;margin-top:0.8rem">
        <span style="font-family:'JetBrains Mono',monospace;font-size:0.6rem;color:var(--muted)">Deadline: ${b.deadline}</span>
        ${currentPlan==='expert'
          ?`<button class="btn btn-purple btn-sm" onclick="applyBounty(${b.id})">Apply →</button>`
          :`<button class="btn btn-ghost btn-sm" onclick="showView('pricing')" style="opacity:0.7">🔮 Expert Only</button>`}
      </div>
    </div>
  `).join('');
}

function applyBounty(id){
  const b = BOUNTIES_DATA.find(x=>x.id===id);
  if(!b) return;
  if(!spendTokens(75,`Applied to bounty: ${b.title} @ ${b.company}`)) return;
  renderWallet();
  toast(`🎉 Bounty application submitted to ${b.company}! They'll review your profile.`);
}

function openPostBounty(){
  if(currentPlan==='free'){ toast('Recruiter portal requires a plan. Contact us at hello@skillit.com',true); return; }
  document.getElementById('bountyOverlay').classList.add('open');
}

function submitBounty(){
  const company = document.getElementById('bountyCompany').value.trim();
  const title = document.getElementById('bountyTitle').value.trim();
  if(!company||!title){ toast('Company and title are required.',true); return; }
  closeModal('bountyOverlay');
  toast(`✓ Bounty posted! "₹2,000 posting fee" charged. Applicants will reach out soon.`);
}

function openRecruiterSignup(){
  toast('🏢 Recruiter signup: In production this opens a company verification flow with business email OTP.');
}

// ═══════════════════════════════════════════════════
// EXTEND showView to include new views
// ═══════════════════════════════════════════════════
const _origShowView = showView;
window.showView = function(name){
  _origShowView(name);
  if(name==='sessions') renderSessions();
  if(name==='recruiter'){ renderLeaderboard(); renderBounties(); }
  if(name==='pricing') updatePlanBadge();
};

// Init on load
updatePlanBadge();
if(currentUser){ renderSessions(); renderLeaderboard(); renderBounties(); }
</script>
</body>
</html>
